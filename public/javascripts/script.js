"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden"),document.querySelector("body").className="book"):(w3.removeClass("#nav-bar-top","hidden"),document.querySelector("body").className="",utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(n){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden")},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?w3.addClass("#nav-bar-top","hidden"):w3.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n)},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n)},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/",utils.activeLink()}}();
"use strict";var book=function(){var e=document.querySelector("#bookContainer"),t=function(){var t,i,n,a,r;window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,a=16):(t=window.innerHeight,i=window.innerWidth,a=14),n=t%(r=1.5*a)!=0?2*r+t%r/2:3*r;var c=new WebBook(e,{height:t,maxWidth:i,marginY:45});window.innerWidth>=1366&&(document.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(e){window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,a=16):(t=window.innerHeight,i=window.innerWidth,a=14),window.innerWidth>=1366&&(document.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),n=t%(r=1.5*a)!=0?2*r+t%r/2:3*r,c.setHeight(t),c.setMaxWidth(i),c.setMarginY(n),!0===c.col&&c.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?c.forward():"swiperight"===e.type&&c.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?c.forward():37===e.which||33===e.which?c.backward():36===e.which?c.toFirstPage():35===e.which&&c.toLastPage()},!1);var o=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");o.addEventListener("click",function(e){c.forward()},!1),l.addEventListener("click",function(e){c.backward()},!1);for(var s=e.querySelector("#toc"),d=e.querySelectorAll(".open-toc"),h=0;h<d.length;h++)d[h].addEventListener("click",function(e){s.className="open"===s.className?"":"open"},!1);s.querySelector("#close-toc").addEventListener("click",function(){s.className=""},!1);for(var w=s.querySelectorAll("a"),h=0;h<w.length;h++)w[h].addEventListener("click",function(){s.className=""},!1);var u=e.querySelector("#toc-large-device"),m=e.querySelector("#swing-container"),p=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){u.className.match(/open/)?(u.className=u.className.replace(/ open/,""),m.className=m.className.replace(/ left/,""),p.className=m.className.replace(/ left/,"")):(u.className+=" open",m.className+=" left",p.className+=" left")},!1),e.className="show"},i={method:"GET",url:location.hash.replace(/#/,"")},n=e.querySelector("[data-wb-text]");utils.ajax(i).then(function(e){var t=JSON.parse(e).book,i=t.author+"&ensp;&mdash;&ensp;"+t.title;return utils.setHTML("#top-title",i),utils.setHTML("#toc-title p:nth-child(1)",t.author),utils.setHTML("#toc-title p:nth-child(2)",t.title),utils.setHTML("#toc-large-device p:nth-child(1)",t.author),utils.setHTML("#toc-large-device p:nth-child(2)",t.title),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var i=document.createElement("div");i.innerHTML=e,n.appendChild(i),t()})};
"use strict";var home=function(){document.querySelector("#home.content");w3.hide("#books-list");utils.ajax({method:"GET",url:"/books"}).then(function(o){var t=JSON.parse(o);w3.displayObject("books-list",t),w3.show("#books-list")})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,n){var a=e.method,r=e.url,s=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):n(Error(o.statusText)))},o.open(a,r,!0),o.setRequestHeader("Content-type","application/json"),s?o.send(s):o.send()})},getFragment:function(e,t,n){t.innerHTML="";var a={method:"GET",url:e};return utils.ajax(a).then(function(e){return new Promise(function(a){t.innerHTML=e,a(n)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(w3.addClass("#"+e[t].id,"w3-text-black"),w3.removeClass("#"+e[t].id,"w3-text-gray")):(w3.addClass("#"+e[t].id,"w3-text-gray"),w3.removeClass("#"+e[t].id,"w3-text-black")),location.hash.match(/#\/admin/)&&(e[t].href.match(/#\/admin/)?e[t].className="clicked":e[t].className="")},setHTML:function(e,t){document.querySelector(e).innerHTML=t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidzMiLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbW92ZUNsYXNzIiwidXRpbHMiLCJlIiwiaW5uZXJXaWR0aCIsIm9sZGhhc2giLCJuZXdoYXNoIiwicm91dGVyIiwiY29udGFpbmVyIiwiaG9tZSIsInRoZW4iLCJjb250cm9sbGVyIiwiZ2V0RnJhZ21lbnQiLCJhY3RpdmVMaW5rIiwiYm9vayIsImJvb2tDb250YWluZXIiLCJpbml0IiwiaCIsInciLCJtYXJnaW5ZIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJXZWJCb29rIiwiaGVpZ2h0IiwibWF4V2lkdGgiLCJzdHlsZSIsIm1heEhlaWdodCIsImV2ZW50Iiwic2V0SGVpZ2h0Iiwic2V0TWF4V2lkdGgiLCJzZXRNYXJnaW5ZIiwiY29sIiwidG9Cb29rIiwiSGFtbWVyIiwib24iLCJ0eXBlIiwiYmFja3dhcmQiLCJmb3J3YXJkIiwid2hpY2giLCJ0b0ZpcnN0UGFnZSIsInRvTGFzdFBhZ2UiLCJmb3J3YXJkTGFyZ2UiLCJiYWNrd2FyZExhcmdlIiwidG9jIiwib3BlblRvYyIsImkiLCJsZW5ndGgiLCJ0b2NMaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b2NMYXJnZSIsInN3aW5nQ29udGFpbmVyIiwicmVwbGFjZSIsInN3aW5nQmFyIiwibWV0aG9kIiwiY29udGVudCIsImF1dGhvciIsInNldEhUTUwiLCJyZXNwb25zZSIsInBhcnNlIiwiYWpheCIsIm1ldGEiLCJ0aXRsZSIsImRpdiIsImlubmVySFRNTCIsInRleHQiLCJhcHBlbmRDaGlsZCIsInVybCIsInBhdGgiLCJjcmVhdGVFbGVtZW50IiwiaGlkZSIsIm9wdGlvbnMiLCJib29rcyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInByb21pc2UiLCJ4bWxodHRwIiwiZGF0YSIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInRlbXBsYXRlIiwibGlua3MiLCJocmVmIiwiaWQiLCJyb290Iiwic2VsZWN0b3IiXSwibWFwcGluZ3MiOiJhQUVDQSxPQUFBQyxpQkFBQSxhQUFBLFdBR0lDLFNBQVNDLEtBQUtDLE1BQU0sdUJBRHhCSixPQUFPQyxXQUFpQixLQUN2QkksR0FBR0gsU0FBU0MsZUFBVyxVQUVyQkUsU0FBR0MsY0FBUyxRQUFnQkMsVUFBNUIsU0FFREMsR0FBQUEsWUFBU0MsZUFBc0JGLFVBSmhDQyxTQUtPQyxjQUFBLFFBQUFGLFVBQUEsR0FDTkYsTUFBR0ssUUFBSCxhQUFlLE9BRWZDLEdBRURYLE9BQUVDLGlCQVhILE9BQUEsU0FBQVcsR0FjSVYsU0FBU0MsS0FBS0MsTUFBTSx1QkFBeUJKLE9BQU9hLFdBQWEsS0FEckViLEdBQUFBLFNBQU9DLGVBQVAsWUFJRSxHQUdGRCxPQUFPQyxpQkFBaUIsU0FBVSxXQUFsQ0QsU0FBT0MsS0FBQUEsTUFBaUIsdUJBQWdCRCxPQUFBYSxXQUFBLElBQ3ZDUixHQUFHSCxTQUFTQyxlQUFXLFVBQXZCRSxHQUFBSyxZQUVPLGVBQUEsWUFFTjtjQzVCSCxXQUFZLEtBQVhSLFNBQVdDLE9BQUFELFNBQUFDLEtBQUEsTUFJWCxJQUFJVyxPQUFBQSxFQUFTQyxPQUFBQSxFQUZjYixPQUFBQSxpQkFBQSxtQkFBQSxXQUF1QmEsRUFBQWIsU0FBQUMsS0FNaERhLEVBQU9GLEVBQVNDLEtBSmRELEdBT0pkLE9BQU9DLGlCQUFpQixhQUFjLFdBTHRDRCxFQUFPQyxFQUNMYyxFQUFVYixTQUFTQyxLQUNuQmEsRUFBT0YsRUFBU0MsS0FDZCxHQUdGRCxJQUFBQSxFQUFV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QUFBLEVBQVlpQyxFQUFBMEMsRUFBQXpDLE9BQUFELElBQ1hyRCxTQUFBZ0csT0FBQUQsRUFBQTFDLEdBQUEyQyxNQUtFN0YsR0FBR0MsU0FBUyxJQUFNMkYsRUFBTTFDLEdBQUc0QyxHQUFJLGlCQUpqQzlGLEdBQUkrRixZQUFPNUYsSUFBU0MsRUFBQUEsR0FBQUEsR0FBYyxrQkFFbENKLEdBQUlDLFNBQUosSUFBZTJGLEVBQU16QyxHQUFBQSxHQUFyQixnQkFDQ25ELEdBQUdILFlBQVNnRyxJQUFPRCxFQUFNMUMsR0FBRzJDLEdBQTVCLGtCQUFBaEcsU0FHT0MsS0FBQUMsTUFBQSxjQUNIRSxFQUFBQSxHQUFTNEYsS0FBQTlGLE1BQU02RixZQUNsQjVGLEVBQUdLLEdBQUFBLFVBQWtCdUYsVUFPcEJBLEVBQU0xQyxHQUFHaEQsVUFBWSxLQUNyQjJELFFBQUEsU0FBQW1DLEVBQUFyQyxHQUNEeEQsU0FBQUMsY0FBQTRGLEdBQUE1QixVQUFBVCIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2luZGV4LmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc05hbWU9XCJib29rXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTmFtZT1cIlwiO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgXCJcIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykgJiYgd2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdHczLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dzMucmVtb3ZlQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHQvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHQvL2lmKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMTAgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIikuc2Nyb2xsVG9wID4gMTApIHtcblx0XHRcdC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1iYXItdG9wJykuY2xhc3NOYW1lID0gJ3Njcm9sbGVkJztcblx0XHQvL30gZWxzZSB7XG5cdFx0XHQvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXYtYmFyLXRvcCcpLmNsYXNzTmFtZSA9ICcnO1xuXHRcdC8vfVxuXHQvL30sIGZhbHNlKTtcblx0XG59KSgpO1xuIiwiLy9yb3V0ZXMuanNcbihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZihsb2NhdGlvbi5oYXNoID09PSBcIlwiKSB7IGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7IH1cblx0XG5cdGxldCBvbGRoYXNoLCBuZXdoYXNoO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0b2xkaGFzaCA9IG5ld2hhc2g7XG5cdFx0XHRuZXdoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0XHRcdHJvdXRlcihvbGRoYXNoLCBuZXdoYXNoKTtcblx0XHR9LCBmYWxzZSk7XG5cblxuXHRsZXQgcm91dGVyID0gKG9sZGhhc2gsIG5ld2hhc2gpID0+IHtcblx0XHRcblx0XHR2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdC8vUk9VVEVTXG5cdFx0aWYobmV3aGFzaCA9PT0gJyMvJykge1xuXHRcdFx0Ly9IT01FXG5cdFx0XHR1dGlscy5nZXRGcmFnbWVudCgnL2ZyYWdtZW50cy9ob21lL2hvbWUuaHRtbCcsIGNvbnRhaW5lciwgaG9tZSlcblx0XHRcdC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHQgfSBlbHNlIGlmKG5ld2hhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHQgLy9CT09LXG5cdFx0XHQgdXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvYm9vay9ib29rLmh0bWwnLCBjb250YWluZXIsIGJvb2spXG5cdFx0XHQgLnRoZW4oIGNvbnRyb2xsZXIgPT4geyBjb250cm9sbGVyKCk7IH0pO1xuXHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL0ZBTExCQUNLXG5cdFx0XHRsb2NhdGlvbi5oYXNoID0gJyMvJztcblx0XHR9XG5cdFx0XG5cdFx0Ly9hY3RpdmUgbGlua1xuXHRcdHV0aWxzLmFjdGl2ZUxpbmsoKTtcblx0fTtcblxufSkoKTtcbiIsIi8vYm9vay5qc1xuY29uc3QgYm9vayA9IGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRcblx0XG5cdFx0dmFyIGJvb2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9va0NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvL0RJTUVOU0lPTlNcblx0XHRcdHZhciBoLCB3LCBtYXJnaW5ZLCBmb250U2l6ZSwgbGluZUhlaWdodDtcblx0XHRcdFxuXHRcdFx0Ly93aWR0aCAocmVzcG9uc2l2ZSlcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0LTg4LTYwOy8vbmF2QmFycyBoZWlnaHQgKjIgKDIqNDQpICsgdGV4dENvbnRhaW5lciB0b3AgKiAyICgyKjMwKVxuXHRcdFx0XHR3ID0gNjQwO1xuXHRcdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdFx0IH0gZWxzZSB7XG5cdFx0XHRcdCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0XHQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0XHQgZm9udFNpemUgPSAxNDtcblx0XHRcdCB9XG5cdFx0XHQgXG5cdFx0XHQgLy9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0XHQgbGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHRcdCBtYXJnaW5ZID0gaCVsaW5lSGVpZ2h0IT09MCA/IGxpbmVIZWlnaHQqMisoKGglbGluZUhlaWdodCkvMikgOiBsaW5lSGVpZ2h0KjM7XG5cdFx0XHRcblx0XHRcdC8vbmV3IEJvb2tcblx0XHRcdHZhciBib29rID0gbmV3IFdlYkJvb2soYm9va0NvbnRhaW5lciwge1xuXHRcdFx0XHQgaGVpZ2h0OiBoLFxuXHRcdFx0XHQgbWF4V2lkdGg6IHcsXG5cdFx0XHRcdCBtYXJnaW5ZOiA0NX0pO1xuXHRcdFx0XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvYy1sYXJnZS1kZXZpY2UgZGl2XCIpLnN0eWxlLm1heEhlaWdodCA9IGgtMzAgKyBcInB4XCI7XG5cdFx0XHR9XG5cdFx0XHRcdFx0XHRcdCBcblx0XHRcdC8vb24gcmVzaXplXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZXZlbnQgPT4ge1xuXHRcdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcblx0XHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0LTg4LTYwO1xuXHRcdFx0XHRcdHcgPSA2NDA7XG5cdFx0XHRcdFx0Zm9udFNpemUgPSAxNjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0XHRcdHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdFx0XHRmb250U2l6ZSA9IDE0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHRcdFx0Ly9Ub2MtbGFyZ2UgaGVpZ2h0XG5cdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2MtbGFyZ2UtZGV2aWNlIGRpdlwiKS5zdHlsZS5tYXhIZWlnaHQgPSBoLTMwICsgXCJweFwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvL21hcmdpblkgaXMgcmVsYXRpdmUgdG8gbGluZS1oZWlnaHRcblx0XHRcdFx0bGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHRcdFx0bWFyZ2luWSA9IGglbGluZUhlaWdodCE9PTAgPyBsaW5lSGVpZ2h0KjIrKChoJWxpbmVIZWlnaHQpLzIpIDogbGluZUhlaWdodCozO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9zZXQgbmV3IGRpbWVuc2lvbnNcblx0XHRcdFx0Ym9vay5zZXRIZWlnaHQoaCk7XG5cdFx0XHRcdGJvb2suc2V0TWF4V2lkdGgodyk7XG5cdFx0XHRcdGJvb2suc2V0TWFyZ2luWShtYXJnaW5ZKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGJvb2suY29sPT09dHJ1ZSkge1xuXHRcdFx0XHRcdGJvb2sudG9Cb29rKCk7XG5cdFx0XHRcdH1cblx0XHRcdFxuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0XG5cdFx0XHRcblx0XHRcdC8vU1dJUEUgLSBmb3J3YXJkLCBiYWNrd2FyZCBvbiBzd2lwZSBsZWZ0IGFuZCByaWdodCAoaGFtbWVyLmpzKVxuXHRcdFx0Ly8gc21hbGwgZGV2aWNlc1xuXHRcdFx0dmFyIHN3aXBlQ29udGFpbmVyID0gbmV3IEhhbW1lcihib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHQtY29udGFpbmVyXScpKTtcblx0XHRcdHN3aXBlQ29udGFpbmVyLm9uKFwic3dpcGVyaWdodCBzd2lwZWxlZnRcIiwgZXZlbnQgPT4ge1xuXHRcdFx0XHRpZihldmVudC50eXBlPT09XCJzd2lwZWxlZnRcIikge1xuXHRcdFx0XHRcdGJvb2suZm9yd2FyZCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYoZXZlbnQudHlwZT09PVwic3dpcGVyaWdodFwiKSB7XG5cdFx0XHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly9UT1VDSEVTLCBmb3J3YXJkLCBiYWNrd2FyZFxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcblx0XHRcdFx0aWYoZXZlbnQud2hpY2g9PT0zOSB8fCBldmVudC53aGljaD09PTM0KSB7XG5cdFx0XHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdFx0fSBlbHNlIGlmKGV2ZW50LndoaWNoPT09MzcgfHwgZXZlbnQud2hpY2g9PT0zMykge1xuXHRcdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdFx0fSBlbHNlIGlmKGV2ZW50LndoaWNoPT09MzYpIHtcblx0XHRcdFx0XHRib29rLnRvRmlyc3RQYWdlKCk7XG5cdFx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM1KSB7XG5cdFx0XHRcdFx0Ym9vay50b0xhc3RQYWdlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XHRcblx0XHRcdC8vQlVUVE9OU1xuXHRcdFx0Ly9sYXJnZVxuXHRcdFx0dmFyIGZvcndhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2ZvcndhcmQtbGFyZ2UnKTtcblx0XHRcdHZhciBiYWNrd2FyZExhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYmFja3dhcmQtbGFyZ2UnKTtcblx0XHRcdFxuXHRcdFx0Zm9yd2FyZExhcmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdH0sIGZhbHNlKTtcblxuXHRcdFx0YmFja3dhcmRMYXJnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0XG5cdFx0XHRcblx0XHRcdC8vVE9DXHRcdFxuXHRcdFx0dmFyIHRvYyA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvYycpO1xuXHRcdFx0dmFyIG9wZW5Ub2MgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcGVuLXRvYycpO1xuXHRcdFx0XG5cdFx0XHRmb3IodmFyIGk9MDsgaTxvcGVuVG9jLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdG9wZW5Ub2NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdFx0dG9jLmNsYXNzTmFtZSA9IHRvYy5jbGFzc05hbWUgPT09IFwib3BlblwiID8gXCJcIiA6IFwib3BlblwiO1xuXHRcdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHRvYy5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLXRvY1wiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dG9jLmNsYXNzTmFtZSA9IFwiXCI7XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdC8vQ2xvc2UgdG9jIG9uIGNsaWNrXG5cdFx0XHR2YXIgdG9jTGlua3MgPSB0b2MucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXHRcdFx0Zm9yKHZhciBpPTA7IGk8dG9jTGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dG9jTGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdFx0dG9jLmNsYXNzTmFtZSA9IFwiXCI7XG5cdFx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvL1RPQy1MQVJHRS1ERVZJQ0Vcblx0XHRcdHZhciB0b2NMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvYy1sYXJnZS1kZXZpY2UnKTtcblx0XHRcdHZhciBzd2luZ0NvbnRhaW5lciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWNvbnRhaW5lcicpO1xuXHRcdFx0dmFyIHN3aW5nQmFyID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjc3dpbmctYmFyJyk7XG5cdFx0XHQvL1RvZ2dsZSB0b2MtbGFyZ2UtZGV2aWNlLCBzd2luZy1jb250YWluZXIsIHN3aW5nLWJhclxuXHRcdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9nZ2xlLXRvYy1sYXJnZS1kZXZpY2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdFx0aWYoIXRvY0xhcmdlLmNsYXNzTmFtZS5tYXRjaCgvb3Blbi8pKSB7XG5cdFx0XHRcdFx0dG9jTGFyZ2UuY2xhc3NOYW1lICs9IFwiIG9wZW5cIjtcblx0XHRcdFx0XHRzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0XHRcdHN3aW5nQmFyLmNsYXNzTmFtZSArPSBcIiBsZWZ0XCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dG9jTGFyZ2UuY2xhc3NOYW1lID0gdG9jTGFyZ2UuY2xhc3NOYW1lLnJlcGxhY2UoLyBvcGVuLywnJyk7XG5cdFx0XHRcdFx0c3dpbmdDb250YWluZXIuY2xhc3NOYW1lID0gc3dpbmdDb250YWluZXIuY2xhc3NOYW1lLnJlcGxhY2UoLyBsZWZ0LywnJyk7XG5cdFx0XHRcdFx0c3dpbmdCYXIuY2xhc3NOYW1lID0gc3dpbmdDb250YWluZXIuY2xhc3NOYW1lLnJlcGxhY2UoLyBsZWZ0LywnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0Ly9lbmQgbG9hZGVyXG5cdFx0XHRib29rQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdzaG93Jztcblx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dmFyIHVybCA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZSgvIy8sJycpO1xuXHRcdHZhciBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHVybCB9O1xuXHRcdHZhciB0ZXh0ID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS13Yi10ZXh0XScpO1xuXHRcdFxuXHRcdHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdFx0bGV0IG1ldGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKS5ib29rO1xuXHRcdFx0bGV0IGNvbnRlbnQgPSBtZXRhLmF1dGhvciArICcmZW5zcDsmbWRhc2g7JmVuc3A7JyArIG1ldGEudGl0bGU7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvcC10aXRsZVwiLCBjb250ZW50KTtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLXRpdGxlIHA6bnRoLWNoaWxkKDEpXCIsIG1ldGEuYXV0aG9yKTtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLXRpdGxlIHA6bnRoLWNoaWxkKDIpXCIsIG1ldGEudGl0bGUpO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b2MtbGFyZ2UtZGV2aWNlIHA6bnRoLWNoaWxkKDEpXCIsIG1ldGEuYXV0aG9yKTtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLWxhcmdlLWRldmljZSBwOm50aC1jaGlsZCgyKVwiLCBtZXRhLnRpdGxlKTtcblx0XHRcdHJldHVybiB1dGlscy5hamF4KHsgbWV0aG9kOiAnR0VUJywgdXJsOiBtZXRhLnBhdGggKyAnLmh0bWwnIH0pXG5cdFx0fSkudGhlbiggYm9vayA9PiB7XG5cdFx0XHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRkaXYuaW5uZXJIVE1MID0gYm9vaztcblx0XHRcdHRleHQuYXBwZW5kQ2hpbGQoZGl2KTtcblx0XHRcdGluaXQoKTtcblx0XHR9KVxuXHRcblxufTtcbiIsIi8vaG9tZS5qc1xuY29uc3QgaG9tZSA9IGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdC8vcm9vdEVsZW1lbnRcblx0bGV0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUuY29udGVudFwiKTtcblx0dzMuaGlkZShcIiNib29rcy1saXN0XCIpO1xuXHQvL2dldCBib29rc1xuXHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnL2Jvb2tzJyB9O1xuXHR1dGlscy5hamF4KG9wdGlvbnMpXG5cdC50aGVuKCByZXNwb25zZSA9PiB7XG5cdFx0bGV0IGJvb2tzID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG5cdFx0dzMuZGlzcGxheU9iamVjdCgnYm9va3MtbGlzdCcsIGJvb2tzKTtcblx0XHR3My5zaG93KFwiI2Jvb2tzLWxpc3RcIik7XG5cdH0pO1xuXG59O1xuXG4iLCIvL3V0aWxzLmpzXG5jb25zdCB1dGlscyA9IHtcblx0Ly9BSkFYIHJlcXVlc3RzXG5cdGFqYXg6IG9wdGlvbnMgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCAocmVzb2x2ZSxyZWplY3QpID0+IHtcblx0XHRcdGxldCBtZXRob2QgPSBvcHRpb25zLm1ldGhvZDtcblx0XHRcdGxldCB1cmwgPSBvcHRpb25zLnVybDtcblx0XHRcdGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuXHRcdFx0bGV0IHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0XHRpZih4bWxodHRwLnJlYWR5U3RhdGU9PT00KSB7XG5cdFx0XHRcdFx0aWYoeG1saHR0cC5zdGF0dXM9PT0yMDApIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoeG1saHR0cC5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoRXJyb3IoeG1saHR0cC5zdGF0dXNUZXh0KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHhtbGh0dHAub3BlbihtZXRob2QsdXJsLHRydWUpO1xuXHRcdFx0eG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblx0XHRcdGlmKGRhdGEpIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKGRhdGEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH0sXG5cdFx0XG5cdC8vZ2V0IEhUTUwgZnJhZ21lbnQsIGNvbnRhaW5lciwgY29udHJvbGxlclx0XG5cdGdldEZyYWdtZW50OiAodGVtcGxhdGUsIGNvbnRhaW5lciwgY29udHJvbGxlcikgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB0ZW1wbGF0ZSB9XG5cdFx0cmV0dXJuIHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHRjb250YWluZXIuaW5uZXJIVE1MID0gcmVzcG9uc2U7XG5cdFx0XHRcdHJlc29sdmUoY29udHJvbGxlcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSxcblx0XG5cdC8vYWN0aXZlIGxpbmsgOiBjaGFuZ2UgY2xhc3Ncblx0YWN0aXZlTGluazogKCkgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmF2LWJhci10b3BcIik7XG5cdFx0bGV0IGxpbmtzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKTtcblx0XHRmb3IobGV0IGk9MDsgaTxsaW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYobG9jYXRpb24uaHJlZj09PWxpbmtzW2ldLmhyZWYpIHtcblx0XHRcdFx0dzMuYWRkQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWJsYWNrXCIpO1xuXHRcdFx0XHR3My5yZW1vdmVDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtZ3JheVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHczLmFkZENsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ncmF5XCIpO1xuXHRcdFx0XHR3My5yZW1vdmVDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtYmxhY2tcIik7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9hZG1pbi8pKSB7XG5cdFx0XHRcdGlmKGxpbmtzW2ldLmhyZWYubWF0Y2goLyNcXC9hZG1pbi8pKSB7XG5cdFx0XHRcdFx0bGlua3NbaV0uY2xhc3NOYW1lID0gXCJjbGlja2VkXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGlua3NbaV0uY2xhc3NOYW1lID0gXCJcIjsgXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdFxuXHRzZXRIVE1MOiAoc2VsZWN0b3IsY29udGVudCkgPT4ge1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLmlubmVySFRNTCA9IGNvbnRlbnQ7XG5cdH1cbn1cbiJdfQ==
