"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden"),document.querySelector("body").className="book"):(w3.removeClass("#nav-bar-top","hidden"),document.querySelector("body").className="",utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(n){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden")},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?w3.addClass("#nav-bar-top","hidden"):w3.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n),utils.activeLink()},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n),utils.activeLink()},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/"}}();
"use strict";var book=function(){document.querySelector("#home.content");var e=document.querySelector("#bookContainer"),t=function(){var t=void 0,i=void 0,n=void 0,r=void 0,a=void 0;window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,r=16):(t=window.innerHeight,i=window.innerWidth,r=14),n=t%(a=1.5*r)!=0?2*a+t%a/2:3*a;var c=new WebBook(e,{height:t,maxWidth:i,marginY:45});window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(o){window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,r=16):(t=window.innerHeight,i=window.innerWidth,r=14),window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),n=t%(a=1.5*r)!=0?2*a+t%a/2:3*a,c.setHeight(t),c.setMaxWidth(i),c.setMarginY(n),!0===c.col&&c.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?c.forward():"swiperight"===e.type&&c.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?c.forward():37===e.which||33===e.which?c.backward():36===e.which?c.toFirstPage():35===e.which&&c.toLastPage()},!1);var o=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");o.addEventListener("click",function(e){c.forward()},!1),l.addEventListener("click",function(e){c.backward()},!1);for(var d=e.querySelector("#toc"),s=e.querySelectorAll(".open-toc"),h=0;h<s.length;h++)s[h].addEventListener("click",function(e){d.className="open"===d.className?"":"open"},!1);d.querySelector("#close-toc").addEventListener("click",function(){d.className=""},!1);for(var w=d.querySelectorAll("a"),u=0;u<w.length;u++)w[u].addEventListener("click",function(){d.className=""},!1);var m=e.querySelector("#toc-large-device"),v=e.querySelector("#swing-container"),p=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){m.className.match(/open/)?(m.className=m.className.replace(/ open/,""),v.className=v.className.replace(/ left/,""),p.className=v.className.replace(/ left/,"")):(m.className+=" open",v.className+=" left",p.className+=" left")},!1),e.className="show"},i={method:"GET",url:location.hash.replace(/#/,"")},n=e.querySelector("[data-wb-text]");utils.ajax(i).then(function(e){var t=JSON.parse(e).book,i=t.author+"&ensp;&mdash;&ensp;"+t.title;return utils.setHTML("#top-title",i),utils.setHTML("#toc-title p:nth-child(1)",t.author),utils.setHTML("#toc-title p:nth-child(2)",t.title),utils.setHTML("#toc-large-device p:nth-child(1)",t.author),utils.setHTML("#toc-large-device p:nth-child(2)",t.title),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var i=document.createElement("div");i.innerHTML=e,n.appendChild(i),t()})};
"use strict";var home=function(){document.querySelector("#home.content");w3.hide("#books-list");utils.ajax({method:"GET",url:"/books/"}).then(function(o){var t=JSON.parse(o);w3.displayObject("books-list",t),w3.show("#books-list")})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,n){var a=e.method,r=e.url,s=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):n(Error(o.statusText)))},o.open(a,r,!0),o.setRequestHeader("Content-type","application/json"),s?o.send(s):o.send()})},getFragment:function(e,t,n){t.innerHTML="";var a={method:"GET",url:e};return utils.ajax(a).then(function(e){return new Promise(function(a){t.innerHTML=e,a(n)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(w3.addClass("#"+e[t].id,"w3-text-black"),w3.removeClass("#"+e[t].id,"w3-text-gray")):(w3.addClass("#"+e[t].id,"w3-text-gray"),w3.removeClass("#"+e[t].id,"w3-text-black")),location.hash.match(/#\/admin/)&&(e[t].href.match(/#\/admin/)?e[t].className="clicked":e[t].className="")},setHTML:function(e,t){document.querySelector(e).innerHTML=t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidzMiLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbW92ZUNsYXNzIiwidXRpbHMiLCJlIiwiaW5uZXJXaWR0aCIsIm9sZGhhc2giLCJuZXdoYXNoIiwicm91dGVyIiwiYWN0aXZlTGluayIsImNvbnRhaW5lciIsImhvbWUiLCJ0aGVuIiwiY29udHJvbGxlciIsImdldEZyYWdtZW50IiwiYm9vayIsImJvb2tDb250YWluZXIiLCJpbml0IiwiaCIsInciLCJtYXJnaW5ZIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJXZWJCb29rIiwiaGVpZ2h0IiwibWF4V2lkdGgiLCJzdHlsZSIsIm1heEhlaWdodCIsImV2ZW50Iiwic2V0SGVpZ2h0Iiwic2V0TWF4V2lkdGgiLCJzZXRNYXJnaW5ZIiwidG9Cb29rIiwiSGFtbWVyIiwib24iLCJ0eXBlIiwiZm9yd2FyZCIsInN3aXBlQ29udGFpbmVyIiwiYmFja3dhcmQiLCJ3aGljaCIsInRvTGFzdFBhZ2UiLCJmb3J3YXJkTGFyZ2UiLCJiYWNrd2FyZExhcmdlIiwidG9jIiwib3BlblRvYyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b2NMaW5rcyIsImkiLCJsZW5ndGgiLCJ0b2NMYXJnZSIsInN3aW5nQ29udGFpbmVyIiwic3dpbmdCYXIiLCJyZXBsYWNlIiwidXJsIiwib3B0aW9ucyIsImFqYXgiLCJyZXNwb25zZSIsIm1ldGEiLCJKU09OIiwicGFyc2UiLCJ0aXRsZSIsImNvbnRlbnQiLCJzZXRIVE1MIiwiYXV0aG9yIiwibWV0aG9kIiwicGF0aCIsImNyZWF0ZUVsZW1lbnQiLCJkaXYiLCJpbm5lckhUTUwiLCJ0ZXh0IiwiaGlkZSIsImJvb2tzIiwic2hvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvbWlzZSIsInhtbGh0dHAiLCJkYXRhIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwidGVtcGxhdGUiLCJsaW5rcyIsImhyZWYiLCJpZCIsInJvb3QiLCJzZWxlY3RvciJdLCJtYXBwaW5ncyI6ImFBRUNBLE9BQUFDLGlCQUFBLGFBQUEsV0FHSUMsU0FBU0MsS0FBS0MsTUFBTSx1QkFEeEJKLE9BQU9DLFdBQWlCLEtBQ3ZCSSxHQUFHSCxTQUFTQyxlQUFXLFVBRXJCRSxTQUFHQyxjQUFTLFFBQWdCQyxVQUE1QixTQUVEQyxHQUFBQSxZQUFTQyxlQUFzQkYsVUFKaENDLFNBS09DLGNBQUEsUUFBQUYsVUFBQSxHQUNORixNQUFHSyxRQUFILGFBQWUsT0FFZkMsR0FFRFgsT0FBRUMsaUJBWEgsT0FBQSxTQUFBVyxHQWNJVixTQUFTQyxLQUFLQyxNQUFNLHVCQUF5QkosT0FBT2EsV0FBYSxLQURyRWIsR0FBQUEsU0FBT0MsZUFBUCxZQUlFLEdBR0ZELE9BQU9DLGlCQUFpQixTQUFVLFdBQWxDRCxTQUFPQyxLQUFBQSxNQUFpQix1QkFBZ0JELE9BQUFhLFdBQUEsSUFDdkNSLEdBQUdILFNBQVNDLGVBQVcsVUFBdkJFLEdBQUFLLFlBRU8sZUFBQSxZQUVOO2NDNUJILFdBQVksS0FBWFIsU0FBV0MsT0FBQUQsU0FBQUMsS0FBQSxNQUlYLElBQUlXLE9BQUFBLEVBQVNDLE9BQUFBLEVBRmNiLE9BQUFBLGlCQUFBLG1CQUFBLFdBQXVCYSxFQUFBYixTQUFBQyxLQU1oRGEsRUFBT0YsRUFBU0MsR0FKbEJKLE1BQWFJLGVBT1QsR0FKRkEsT0FBQUEsaUJBQUEsYUFBQSxXQUNBQyxFQUFPRixFQUNQQyxFQUFBYixTQUFBQyxLQUNBUSxFQUFNTSxFQUFORixHQVFBSixNQUFNTSxlQUxSakIsR0FH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RixTQUFTQyxjQUFjLGdCQUhuQzZDLGlCQUFBLEtBQ0FyQyxFQUFBQSxFQUFZdUMsRUFBQXdDLEVBQUF2QyxPQUFBRCxJQUNYdEQsU0FBQStGLE9BQUFELEVBQUF4QyxHQUFBeUMsTUFLRTVGLEdBQUdDLFNBQVMsSUFBTTBGLEVBQU14QyxHQUFHMEMsR0FBSSxpQkFKakM3RixHQUFJOEYsWUFBTzNGLElBQVNDLEVBQUFBLEdBQUFBLEdBQWMsa0JBRWxDSixHQUFJQyxTQUFKLElBQWUwRixFQUFNdkMsR0FBQUEsR0FBckIsZ0JBQ0NwRCxHQUFHSCxZQUFTK0YsSUFBT0QsRUFBTXhDLEdBQUd5QyxHQUE1QixrQkFBQS9GLFNBR09DLEtBQUFDLE1BQUEsY0FDSEUsRUFBQUEsR0FBUzJGLEtBQUE3RixNQUFNNEYsWUFDbEIzRixFQUFHSyxHQUFBQSxVQUFrQnNGLFVBT3BCQSxFQUFNeEMsR0FBR2pELFVBQVksS0FDckJnRSxRQUFBLFNBQUE2QixFQUFBOUIsR0FDRDlELFNBQUFDLGNBQUEyRixHQUFBdkIsVUFBQVAiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9pbmRleC5qc1xuKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcblx0XHRpZihsb2NhdGlvbi5oYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSkge1xuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdFx0dzMuYWRkQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0XHR9XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NOYW1lPVwiYm9va1wiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3My5yZW1vdmVDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc05hbWU9XCJcIjtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9wLXRpdGxlXCIsIFwiXCIpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXHRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoZSkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdFxuXHRcdH1cblx0fSwgZmFsc2UpO1xuXHRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcblx0XHRpZihsb2NhdGlvbi5oYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0dzMuYWRkQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXHRcblx0Ly93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZihkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IDEwIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJodG1sXCIpLnNjcm9sbFRvcCA+IDEwKSB7XG5cdFx0XHQvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXYtYmFyLXRvcCcpLmNsYXNzTmFtZSA9ICdzY3JvbGxlZCc7XG5cdFx0Ly99IGVsc2Uge1xuXHRcdFx0Ly9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmF2LWJhci10b3AnKS5jbGFzc05hbWUgPSAnJztcblx0XHQvL31cblx0Ly99LCBmYWxzZSk7XG5cdFxufSkoKTtcbiIsIi8vcm91dGVzLmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0aWYobG9jYXRpb24uaGFzaCA9PT0gXCJcIikgeyBsb2NhdGlvbi5oYXNoID0gXCIjL1wiOyB9XG5cdFxuXHRsZXQgb2xkaGFzaCwgbmV3aGFzaDtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0XHRcdG5ld2hhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXHRcdFx0cm91dGVyKG9sZGhhc2gsIG5ld2hhc2gpO1xuXHRcdFx0Ly9hY3RpdmUgbGlua1xuXHRcdFx0dXRpbHMuYWN0aXZlTGluaygpO1xuXHRcdH0sIGZhbHNlKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcblx0XHRcdG9sZGhhc2ggPSBuZXdoYXNoO1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0XHQvL2FjdGl2ZSBsaW5rXG5cdFx0XHR1dGlscy5hY3RpdmVMaW5rKCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cblx0bGV0IHJvdXRlciA9IChvbGRoYXNoLCBuZXdoYXNoKSA9PiB7XG5cdFx0XG5cdFx0dmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250YWluZXInKTtcblx0XHRcblx0XHQvL1JPVVRFU1xuXHRcdGlmKG5ld2hhc2ggPT09ICcjLycpIHtcblx0XHRcdC8vSE9NRVxuXHRcdFx0dXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvaG9tZS9ob21lLmh0bWwnLCBjb250YWluZXIsIGhvbWUpXG5cdFx0XHQudGhlbiggY29udHJvbGxlciA9PiB7IGNvbnRyb2xsZXIoKTsgfSk7XG5cdFx0XG5cdFx0IH0gZWxzZSBpZihuZXdoYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSkge1xuXHRcdFx0IC8vQk9PS1xuXHRcdFx0IHV0aWxzLmdldEZyYWdtZW50KCcvZnJhZ21lbnRzL2Jvb2svYm9vay5odG1sJywgY29udGFpbmVyLCBib29rKVxuXHRcdFx0IC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9GQUxMQkFDS1xuXHRcdFx0bG9jYXRpb24uaGFzaCA9ICcjLyc7XG5cdFx0fVxuXHRcdFxuXHR9O1xuXG59KSgpO1xuIiwiLy9ib29rLmpzXG5jb25zdCBib29rID0gZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vcm9vdEVsZW1lbnRcblx0Y29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaG9tZS5jb250ZW50XCIpO1xuXG5cdGNvbnN0IGJvb2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9va0NvbnRhaW5lcicpO1xuXHRcblx0bGV0IGluaXQgPSBmdW5jdGlvbigpIHtcblx0XHQvL0RJTUVOU0lPTlNcblx0XHRsZXQgaCwgdywgbWFyZ2luWSwgZm9udFNpemUsIGxpbmVIZWlnaHQ7XG5cdFx0XG5cdFx0Ly93aWR0aCAocmVzcG9uc2l2ZSlcblx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcblx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQtODgtNjA7Ly9uYXZCYXJzIGhlaWdodCAqMiAoMio0NCkgKyB0ZXh0Q29udGFpbmVyIHRvcCAqIDIgKDIqMzApXG5cdFx0XHR3ID0gNjQwO1xuXHRcdFx0Zm9udFNpemUgPSAxNjtcblx0XHQgfSBlbHNlIHtcblx0XHRcdCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdCBmb250U2l6ZSA9IDE0O1xuXHRcdCB9XG5cdFx0IFxuXHRcdCAvL21hcmdpblkgaXMgcmVsYXRpdmUgdG8gbGluZS1oZWlnaHRcblx0XHQgbGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHQgbWFyZ2luWSA9IGglbGluZUhlaWdodCE9PTAgPyBsaW5lSGVpZ2h0KjIrKChoJWxpbmVIZWlnaHQpLzIpIDogbGluZUhlaWdodCozO1xuXHRcdFxuXHRcdC8vbmV3IEJvb2tcblx0XHRsZXQgYm9vayA9IG5ldyBXZWJCb29rKGJvb2tDb250YWluZXIsIHtcblx0XHRcdCBoZWlnaHQ6IGgsXG5cdFx0XHQgbWF4V2lkdGg6IHcsXG5cdFx0XHQgbWFyZ2luWTogNDV9KTtcblx0XHRcblx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHQvL1RvYy1sYXJnZSBoZWlnaHRcblx0XHRcdGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcihcIiN0b2MtbGFyZ2UtZGV2aWNlIGRpdlwiKS5zdHlsZS5tYXhIZWlnaHQgPSBoLTMwICsgXCJweFwiO1xuXHRcdH1cblx0XHRcdFx0XHRcdCBcblx0XHQvL29uIHJlc2l6ZVxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBldmVudCA9PiB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcblx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodC04OC02MDtcblx0XHRcdFx0dyA9IDY0MDtcblx0XHRcdFx0Zm9udFNpemUgPSAxNjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0XHRcdHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdFx0Zm9udFNpemUgPSAxNDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gMTM2Nikge1xuXHRcdFx0XHQvL1RvYy1sYXJnZSBoZWlnaHRcblx0XHRcdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3RvYy1sYXJnZS1kZXZpY2UgZGl2XCIpLnN0eWxlLm1heEhlaWdodCA9IGgtMzAgKyBcInB4XCI7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vbWFyZ2luWSBpcyByZWxhdGl2ZSB0byBsaW5lLWhlaWdodFxuXHRcdFx0bGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHRcdG1hcmdpblkgPSBoJWxpbmVIZWlnaHQhPT0wID8gbGluZUhlaWdodCoyKygoaCVsaW5lSGVpZ2h0KS8yKSA6IGxpbmVIZWlnaHQqMztcblx0XHRcdFxuXHRcdFx0Ly9zZXQgbmV3IGRpbWVuc2lvbnNcblx0XHRcdGJvb2suc2V0SGVpZ2h0KGgpO1xuXHRcdFx0Ym9vay5zZXRNYXhXaWR0aCh3KTtcblx0XHRcdGJvb2suc2V0TWFyZ2luWShtYXJnaW5ZKTtcblx0XHRcdFxuXHRcdFx0aWYoYm9vay5jb2w9PT10cnVlKSB7XG5cdFx0XHRcdGJvb2sudG9Cb29rKCk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdFxuXHRcdC8vU1dJUEUgLSBmb3J3YXJkLCBiYWNrd2FyZCBvbiBzd2lwZSBsZWZ0IGFuZCByaWdodCAoaGFtbWVyLmpzKVxuXHRcdC8vIHNtYWxsIGRldmljZXNcblx0XHRsZXQgc3dpcGVDb250YWluZXIgPSBuZXcgSGFtbWVyKGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dC1jb250YWluZXJdJykpO1xuXHRcdHN3aXBlQ29udGFpbmVyLm9uKFwic3dpcGVyaWdodCBzd2lwZWxlZnRcIiwgZXZlbnQgPT4ge1xuXHRcdFx0aWYoZXZlbnQudHlwZT09PVwic3dpcGVsZWZ0XCIpIHtcblx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQudHlwZT09PVwic3dpcGVyaWdodFwiKSB7XG5cdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvL1RPVUNIRVMsIGZvcndhcmQsIGJhY2t3YXJkXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcblx0XHRcdGlmKGV2ZW50LndoaWNoPT09MzkgfHwgZXZlbnQud2hpY2g9PT0zNCkge1xuXHRcdFx0XHRcdGJvb2suZm9yd2FyZCgpO1xuXHRcdFx0fSBlbHNlIGlmKGV2ZW50LndoaWNoPT09MzcgfHwgZXZlbnQud2hpY2g9PT0zMykge1xuXHRcdFx0XHRib29rLmJhY2t3YXJkKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNikge1xuXHRcdFx0XHRib29rLnRvRmlyc3RQYWdlKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNSkge1xuXHRcdFx0XHRib29rLnRvTGFzdFBhZ2UoKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0XHRcblx0XHQvL0JVVFRPTlNcblx0XHQvL2xhcmdlXG5cdFx0bGV0IGZvcndhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2ZvcndhcmQtbGFyZ2UnKTtcblx0XHRsZXQgYmFja3dhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2JhY2t3YXJkLWxhcmdlJyk7XG5cdFx0XG5cdFx0Zm9yd2FyZExhcmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdFx0YmFja3dhcmRMYXJnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0XG5cdFx0Ly9UT0NcdFx0XG5cdFx0bGV0IHRvYyA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvYycpO1xuXHRcdGxldCBvcGVuVG9jID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcub3Blbi10b2MnKTtcblx0XHRcblx0XHRmb3IobGV0IGk9MDsgaTxvcGVuVG9jLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRvcGVuVG9jW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHR0b2MuY2xhc3NOYW1lID0gdG9jLmNsYXNzTmFtZSA9PT0gXCJvcGVuXCIgPyBcIlwiIDogXCJvcGVuXCI7XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0fVxuXHRcdFxuXHRcdHRvYy5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLXRvY1wiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHQvL0Nsb3NlIHRvYyBvbiBjbGlja1xuXHRcdGxldCB0b2NMaW5rcyA9IHRvYy5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG5cdFx0Zm9yKGxldCBpPTA7IGk8dG9jTGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRvY0xpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0b2MuY2xhc3NOYW1lID0gXCJcIjtcblx0XHRcdH0sIGZhbHNlKTtcblx0XHR9XG5cdFx0XG5cdFx0XG5cdFx0Ly9UT0MtTEFSR0UtREVWSUNFXG5cdFx0bGV0IHRvY0xhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9jLWxhcmdlLWRldmljZScpO1xuXHRcdGxldCBzd2luZ0NvbnRhaW5lciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWNvbnRhaW5lcicpO1xuXHRcdGxldCBzd2luZ0JhciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWJhcicpO1xuXHRcdC8vVG9nZ2xlIHRvYy1sYXJnZS1kZXZpY2UsIHN3aW5nLWNvbnRhaW5lciwgc3dpbmctYmFyXG5cdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9nZ2xlLXRvYy1sYXJnZS1kZXZpY2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdGlmKCF0b2NMYXJnZS5jbGFzc05hbWUubWF0Y2goL29wZW4vKSkge1xuXHRcdFx0XHR0b2NMYXJnZS5jbGFzc05hbWUgKz0gXCIgb3BlblwiO1xuXHRcdFx0XHRzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0XHRzd2luZ0Jhci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG9jTGFyZ2UuY2xhc3NOYW1lID0gdG9jTGFyZ2UuY2xhc3NOYW1lLnJlcGxhY2UoLyBvcGVuLywnJyk7XG5cdFx0XHRcdHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0XHRzd2luZ0Jhci5jbGFzc05hbWUgPSBzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUucmVwbGFjZSgvIGxlZnQvLCcnKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0Ly9lbmQgbG9hZGVyXG5cdFx0Ym9va0NvbnRhaW5lci5jbGFzc05hbWUgPSAnc2hvdyc7XG5cdFxuXHR9XG5cdFxuXHRsZXQgdXJsID0gbG9jYXRpb24uaGFzaC5yZXBsYWNlKC8jLywnJyk7XG5cdGxldCBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHVybCB9O1xuXHRsZXQgdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XG5cdHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdGxldCBtZXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSkuYm9vaztcblx0XHRsZXQgY29udGVudCA9IG1ldGEuYXV0aG9yICsgJyZlbnNwOyZtZGFzaDsmZW5zcDsnICsgbWV0YS50aXRsZTtcblx0XHR1dGlscy5zZXRIVE1MKFwiI3RvcC10aXRsZVwiLCBjb250ZW50KTtcblx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy10aXRsZSBwOm50aC1jaGlsZCgxKVwiLCBtZXRhLmF1dGhvcik7XG5cdFx0dXRpbHMuc2V0SFRNTChcIiN0b2MtdGl0bGUgcDpudGgtY2hpbGQoMilcIiwgbWV0YS50aXRsZSk7XG5cdFx0dXRpbHMuc2V0SFRNTChcIiN0b2MtbGFyZ2UtZGV2aWNlIHA6bnRoLWNoaWxkKDEpXCIsIG1ldGEuYXV0aG9yKTtcblx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy1sYXJnZS1kZXZpY2UgcDpudGgtY2hpbGQoMilcIiwgbWV0YS50aXRsZSk7XG5cdFx0cmV0dXJuIHV0aWxzLmFqYXgoeyBtZXRob2Q6ICdHRVQnLCB1cmw6IG1ldGEucGF0aCArICcuaHRtbCcgfSlcblx0fSkudGhlbiggYm9vayA9PiB7XG5cdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdGRpdi5pbm5lckhUTUwgPSBib29rO1xuXHRcdHRleHQuYXBwZW5kQ2hpbGQoZGl2KTtcblx0XHRpbml0KCk7XG5cdH0pXG5cdFxuXG59O1xuIiwiLy9ob21lLmpzXG5jb25zdCBob21lID0gZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly9yb290RWxlbWVudFxuXHRjb25zdCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLmNvbnRlbnRcIik7XG5cdHczLmhpZGUoXCIjYm9va3MtbGlzdFwiKTtcblx0Ly9nZXQgYm9va3Ncblx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogJy9ib29rcy8nIH07XG5cdHV0aWxzLmFqYXgob3B0aW9ucylcblx0LnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRsZXQgYm9va3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcblx0XHR3My5kaXNwbGF5T2JqZWN0KCdib29rcy1saXN0JywgYm9va3MpO1xuXHRcdHczLnNob3coXCIjYm9va3MtbGlzdFwiKTtcblx0fSk7XG5cbn07XG5cbiIsIi8vdXRpbHMuanNcbmNvbnN0IHV0aWxzID0ge1xuXHQvL0FKQVggcmVxdWVzdHNcblx0YWpheDogb3B0aW9ucyA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoIChyZXNvbHZlLHJlamVjdCkgPT4ge1xuXHRcdFx0bGV0IG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kO1xuXHRcdFx0bGV0IHVybCA9IG9wdGlvbnMudXJsO1xuXHRcdFx0bGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG5cdFx0XHRsZXQgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0eG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRcdGlmKHhtbGh0dHAucmVhZHlTdGF0ZT09PTQpIHtcblx0XHRcdFx0XHRpZih4bWxodHRwLnN0YXR1cz09PTIwMCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChFcnJvcih4bWxodHRwLnN0YXR1c1RleHQpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0eG1saHR0cC5vcGVuKG1ldGhvZCx1cmwsdHJ1ZSk7XG5cdFx0XHR4bWxodHRwLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXHRcdFx0aWYoZGF0YSkge1xuXHRcdFx0XHR4bWxodHRwLnNlbmQoZGF0YSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR4bWxodHRwLnNlbmQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fSxcblx0XHRcblx0Ly9nZXQgSFRNTCBmcmFnbWVudCwgY29udGFpbmVyLCBjb250cm9sbGVyXHRcblx0Z2V0RnJhZ21lbnQ6ICh0ZW1wbGF0ZSwgY29udGFpbmVyLCBjb250cm9sbGVyKSA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdGxldCBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHRlbXBsYXRlIH1cblx0XHRyZXR1cm4gdXRpbHMuYWpheChvcHRpb25zKS50aGVuKCByZXNwb25zZSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdGNvbnRhaW5lci5pbm5lckhUTUwgPSByZXNwb25zZTtcblx0XHRcdFx0cmVzb2x2ZShjb250cm9sbGVyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9LFxuXHRcblx0Ly9hY3RpdmUgbGluayA6IGNoYW5nZSBjbGFzc1xuXHRhY3RpdmVMaW5rOiAoKSA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGxldCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYXYtYmFyLXRvcFwiKTtcblx0XHRsZXQgbGlua3MgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCJhXCIpO1xuXHRcdGZvcihsZXQgaT0wOyBpPGxpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZihsb2NhdGlvbi5ocmVmPT09bGlua3NbaV0uaHJlZikge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtYmxhY2tcIik7XG5cdFx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ncmF5XCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dzMuYWRkQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWdyYXlcIik7XG5cdFx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ibGFja1wiKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2FkbWluLykpIHtcblx0XHRcdFx0aWYobGlua3NbaV0uaHJlZi5tYXRjaCgvI1xcL2FkbWluLykpIHtcblx0XHRcdFx0XHRsaW5rc1tpXS5jbGFzc05hbWUgPSBcImNsaWNrZWRcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaW5rc1tpXS5jbGFzc05hbWUgPSBcIlwiOyBcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0XG5cdHNldEhUTUw6IChzZWxlY3Rvcixjb250ZW50KSA9PiB7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikuaW5uZXJIVE1MID0gY29udGVudDtcblx0fVxufVxuIl19
