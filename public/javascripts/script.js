"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&utils.addClass("#nav-bar-top","hidden"),utils.addClass("body","book")):(utils.removeClass("#nav-bar-top","hidden"),utils.removeClass("body","book"),utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(o){location.hash.match(/#\/books\/.+[^\/]$/)&&(window.innerWidth<768&&utils.addClass("#nav-bar-top","hidden"),utils.addClass("body","book"))},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?utils.addClass("#nav-bar-top","hidden"):utils.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n),utils.activeLink()},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n),utils.activeLink()},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/"}}();
"use strict";var book=function(){document.querySelector("#home.content");var e=document.querySelector("#bookContainer"),t=function(){var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0;window.innerWidth>=768?(t=window.innerHeight-88-60,n=640,r=16):(t=window.innerHeight,n=window.innerWidth,r=14),i=t%(a=1.5*r)!=0?2*a+t%a/2:3*a;var o=new WebBook(e,{height:t,maxWidth:n,marginY:45});window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(c){window.innerWidth>=768?(t=window.innerHeight-88-60,n=640,r=16):(t=window.innerHeight,n=window.innerWidth,r=14),window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),i=t%(a=1.5*r)!=0?2*a+t%a/2:3*a,o.setHeight(t),o.setMaxWidth(n),o.setMarginY(i),!0===o.col&&o.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?o.forward():"swiperight"===e.type&&o.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?o.forward():37===e.which||33===e.which?o.backward():36===e.which?o.toFirstPage():35===e.which&&o.toLastPage()},!1);var c=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");c.addEventListener("click",function(e){o.forward()},!1),l.addEventListener("click",function(e){o.backward()},!1);for(var d=e.querySelector("#toc"),s=e.querySelectorAll(".open-toc"),w=0;w<s.length;w++)s[w].addEventListener("click",function(e){d.className="open"===d.className?"":"open"},!1);d.querySelector("#close-toc").addEventListener("click",function(){d.className=""},!1);for(var h=d.querySelectorAll("a"),u=0;u<h.length;u++)h[u].addEventListener("click",function(){d.className=""},!1);var m=e.querySelector("#toc-large-device"),v=e.querySelector("#swing-container"),g=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){m.className.match(/open/)?(m.className=m.className.replace(/ open/,""),v.className=v.className.replace(/ left/,""),g.className=v.className.replace(/ left/,"")):(m.className+=" open",v.className+=" left",g.className+=" left")},!1),e.className="show"},n={method:"GET",url:location.hash.replace(/#/,"")},i=e.querySelector("[data-wb-text]");utils.ajax(n).then(function(e){var t=JSON.parse(e).book;return utils.bind(t),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var n=document.createElement("div");n.innerHTML=e,i.appendChild(n),t()})};
"use strict";var home=function(){document.querySelector("#home.content");utils.ajax({method:"GET",url:"/books/"}).then(function(e){var t=JSON.parse(e);utils.repeat(t)})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,n){var r=e.method,a=e.url,l=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):n(Error(o.statusText)))},o.open(r,a,!0),o.setRequestHeader("Content-type","application/json"),l?o.send(l):o.send()})},getFragment:function(e,t,n){var r={method:"GET",url:e};return utils.ajax(r).then(function(e){return new Promise(function(r){t.innerHTML="";var a=document.createElement("div");a.innerHTML=e,t.appendChild(a),r(n)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(utils.addClass("#"+e[t].id,"w3-text-black"),utils.removeClass("#"+e[t].id,"w3-text-gray")):(utils.addClass("#"+e[t].id,"w3-text-gray"),utils.removeClass("#"+e[t].id,"w3-text-black"))},setHTML:function(e,t){for(var n=document.querySelectorAll(e),r=0;r<n.length;r++)n[r].innerHTML=t},repeat:function(e){for(var t=function(e,t,n,r,a){if(0===n.length)return e;for(var l="",o=0;o<n.length;o++){var i=n[o],c=t[o],u=new RegExp(c,"g");e=l="#item"===i?e.replace(u,r):"#index"===i?e.replace(u,a):e.replace(u,r[i])}return l},n=document.querySelectorAll("[data-jin-repeat]"),r=0;r<n.length;r++){var a=[],l=[],o=n[r].getAttribute("data-jin-repeat");o.match(/{{[^{]+}}/g)&&(a=o.match(/{{[^{]+}}/g));for(var i=0;i<a.length;i++)l.push(a[i].replace(/({|})/g,"").trim());!function(e,n,r,a,l){for(var o=0;o<r.length;o++){var i=t(n,a,l,r[o],o),c=document.createElement(e.nodeName);c.innerHTML=i,e.parentElement.insertBefore(c,e)}e.parentElement.removeChild(e)}(n[r],o,e,a,l)}},bind:function(e){for(var t=document.querySelectorAll("[data-jin-bind]"),n=0;n<t.length;n++){var r=[],a=[],l=t[n].getAttribute("data-jin-bind");l.match(/{{[^{]+}}/g)&&(r=l.match(/{{[^{]+}}/g));for(var o=0;o<r.length;o++){var i=r[o].replace(/({|})/g,"").trim();a.push(i);var c=new RegExp(r[o],"g");l=l.replace(c,e[i])}t[n].innerHTML=l}},addClass:function(e,t){for(var n=document.querySelectorAll(e),r=void 0,a=0;a<n.length;a++)r=t,-1==n[a].className.split(" ").indexOf(r)&&(n[a].className+=" "+t)},removeClass:function(e,t){for(var n=document.querySelectorAll(e),r=0;r<n.length;r++){t;var a=new RegExp(t,"g");n[r].className=n[r].className.replace(a,"")}},hide:function(e){for(var t=document.querySelectorAll(e),n=0;n<t.length;n++)t[n].style.display="none"}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidXRpbHMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwic2V0SFRNTCIsImUiLCJpbm5lcldpZHRoIiwib2xkaGFzaCIsIm5ld2hhc2giLCJyb3V0ZXIiLCJhY3RpdmVMaW5rIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwiaG9tZSIsInRoZW4iLCJjb250cm9sbGVyIiwiZ2V0RnJhZ21lbnQiLCJib29rIiwiYm9va0NvbnRhaW5lciIsImluaXQiLCJoIiwidyIsIm1hcmdpblkiLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJpbm5lckhlaWdodCIsIldlYkJvb2siLCJoZWlnaHQiLCJtYXhXaWR0aCIsInN0eWxlIiwibWF4SGVpZ2h0IiwiZXZlbnQiLCJzZXRIZWlnaHQiLCJzZXRNYXhXaWR0aCIsInNldE1hcmdpblkiLCJ0b0Jvb2siLCJIYW1tZXIiLCJvbiIsInR5cGUiLCJmb3J3YXJkIiwic3dpcGVDb250YWluZXIiLCJiYWNrd2FyZCIsIndoaWNoIiwidG9MYXN0UGFnZSIsImZvcndhcmRMYXJnZSIsImJhY2t3YXJkTGFyZ2UiLCJ0b2MiLCJvcGVuVG9jIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTmFtZSIsInRvY0xpbmtzIiwiaSIsImxlbmd0aCIsInRvY0xhcmdlIiwic3dpbmdDb250YWluZXIiLCJzd2luZ0JhciIsInJlcGxhY2UiLCJ1cmwiLCJvcHRpb25zIiwiYWpheCIsInJlc3BvbnNlIiwibWV0YSIsIkpTT04iLCJiaW5kIiwibWV0aG9kIiwicGF0aCIsImNyZWF0ZUVsZW1lbnQiLCJkaXYiLCJpbm5lckhUTUwiLCJ0ZXh0Iiwicm9vdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvbWlzZSIsInhtbGh0dHAiLCJkYXRhIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwidGVtcGxhdGUiLCJsaW5rcyIsImhyZWYiLCJpZCIsImVsZW1lbnRzIiwic2VsZWN0b3IiLCJjb250ZW50IiwicmVwZWF0IiwiYXJyYXkiLCJycGMiLCJicmFja2V0cyIsInByb3BzIiwiaXRlbSIsImluZGV4IiwibmV3Q29udGVudCIsImJyYWNrZXQiLCJwYXR0ZXJuIiwiUmVnRXhwIiwicHJvcCIsImVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJqIiwidHJpbSIsImVsIiwibm9kZU5hbWUiLCJycHQiLCJwYXJlbnRFbGVtZW50IiwiaW5zZXJ0QmVmb3JlIiwicHVzaCIsIm5hbWUiLCJoaWRlIiwiZGlzcGxheSJdLCJtYXBwaW5ncyI6ImFBRUNBLE9BQUFDLGlCQUFBLGFBQUEsV0FHSUMsU0FBU0MsS0FBS0MsTUFBTSx1QkFEeEJKLE9BQU9DLFdBQWlCLEtBQ3ZCSSxNQUFHSCxTQUFBLGVBQW9CLFVBRXJCRyxNQUFBQSxTQUFBLE9BQWUsVUFFaEJBLE1BQU1DLFlBQVMsZUFBZixVQUVBRCxNQUFNRSxZQUFZLE9BQUEsUUFHbEJGLE1BQU1HLFFBQVEsYUFBYyxPQUE1QkgsR0FFREwsT0FBRUMsaUJBWkgsT0FBQSxTQUFBUSxHQWVJUCxTQUFTQyxLQUFLQyxNQUFNLHdCQUR4QkosT0FBT0MsV0FBaUIsS0FDdkJJLE1BQUdILFNBQUEsZUFBb0IsVUFFckJHLE1BQUFBLFNBQUEsT0FBZSxXQUVoQkEsR0FFREwsT0FBRUMsaUJBUEgsU0FBQSxXQVVJQyxTQUFTQyxLQUFLQyxNQUFNLHVCQUF5QkosT0FBT1UsV0FBYSxJQURyRVYsTUFBT0MsU0FBQUEsZUFBUCxVQUVFSSxNQUFNQyxZQUFTLGVBQWdCLFlBRS9CRDtjQzlCSCxXQUFZLEtBQVhILFNBQVdDLE9BQUFELFNBQUFDLEtBQUEs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SXRCZ0MsU0FBQUEsU0FBU3JDLEVBQUdpQixHQU9iLElBQUksSUFOSG9CLEVBQUE5RSxTQUFBc0MsaUJBQUF5QyxHQW5KV3dCLE9BQUFBLEVBeUpKOUQsRUFBRSxFQUFHQSxFQUFHcUMsRUFBU3BDLE9BQVFELElBSGxDbEQsRUFBQUEsR0FFQyxHQURJdUYsRUFBVzlFLEdBQUFBLFVBQVNzQyxNQUFBQSxLQUNwQmlFLFFBQUpBLEtBQUF6QixFQUFVSSxHQUFBQSxXQUFWLElBQUEzQyxJQUtFdUMsWUFBQSxTQUFBQyxFQUFBeEMsR0E3SlUsSUFBQSxJQThKVnVDLEVBQUE5RSxTQUFBc0MsaUJBQUF5QyxHQTlKVXRDLEVBQUEsRUFBQUEsRUFBQXFDLEVBQUFwQyxPQUFBRCxJQUFBLENBc0tKRixFQUpUL0MsSUFBQUEsRUFBYSxJQUFBbUcsT0FBQXBELEVBQUN3QyxLQUNiRCxFQUFJQSxHQUFBQSxVQUFvQnhDLEVBQUFBLEdBQUFBLFVBQWlCeUMsUUFBekNXLEVBQUEsTUFJQ2MsS0FBSWQsU0FBQUEsR0FFSixJQUFBLElBREFaLEVBQVl2QyxTQUFaRCxpQkFBb0NDLEdBQ3BDRSxFQUFBLEVBQUFBLEVBQUFxQyxFQUFBcEMsT0FBQUQsSUF6S1dxQyxFQUFBckMsR0FBQXRCLE1BQUFzRixRQUFBIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vaW5kZXguanNcbihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykpIHtcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHRcdHV0aWxzLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0fVxuXHRcdFx0dXRpbHMuYWRkQ2xhc3MoJ2JvZHknLCAnYm9vaycpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR1dGlscy5yZW1vdmVDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdFxuXHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoJ2JvZHknLCAnYm9vaycpO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgXCJcIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykpIHtcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHRcdHV0aWxzLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0fVxuXHRcdFx0dXRpbHMuYWRkQ2xhc3MoJ2JvZHknLCAnYm9vaycpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXHRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcblx0XHRpZihsb2NhdGlvbi5oYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0dXRpbHMuYWRkQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHV0aWxzLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXHRcbn0pKCk7XG4iLCIvL3JvdXRlcy5qc1xuKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdGlmKGxvY2F0aW9uLmhhc2ggPT09IFwiXCIpIHsgbG9jYXRpb24uaGFzaCA9IFwiIy9cIjsgfVxuXHRcblx0bGV0IG9sZGhhc2gsIG5ld2hhc2g7XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG5cdFx0XHRuZXdoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0XHRcdHJvdXRlcihvbGRoYXNoLCBuZXdoYXNoKTtcblx0XHRcdC8vYWN0aXZlIGxpbmtcblx0XHRcdHV0aWxzLmFjdGl2ZUxpbmsoKTtcblx0XHR9LCBmYWxzZSk7XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHRvbGRoYXNoID0gbmV3aGFzaDtcblx0XHRcdG5ld2hhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXHRcdFx0cm91dGVyKG9sZGhhc2gsIG5ld2hhc2gpO1xuXHRcdFx0Ly9hY3RpdmUgbGlua1xuXHRcdFx0dXRpbHMuYWN0aXZlTGluaygpO1xuXHRcdH0sIGZhbHNlKTtcblxuXG5cdGxldCByb3V0ZXIgPSAob2xkaGFzaCwgbmV3aGFzaCkgPT4ge1xuXHRcdFxuXHRcdHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGFpbmVyJyk7XG5cdFx0XG5cdFx0Ly9ST1VURVNcblx0XHRpZihuZXdoYXNoID09PSAnIy8nKSB7XG5cdFx0XHQvL0hPTUVcblx0XHRcdHV0aWxzLmdldEZyYWdtZW50KCcvZnJhZ21lbnRzL2hvbWUvaG9tZS5odG1sJywgY29udGFpbmVyLCBob21lKVxuXHRcdFx0LnRoZW4oIGNvbnRyb2xsZXIgPT4geyBjb250cm9sbGVyKCk7IH0pO1xuXHRcdFxuXHRcdCB9IGVsc2UgaWYobmV3aGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykpIHtcblx0XHRcdCAvL0JPT0tcblx0XHRcdCB1dGlscy5nZXRGcmFnbWVudCgnL2ZyYWdtZW50cy9ib29rL2Jvb2suaHRtbCcsIGNvbnRhaW5lciwgYm9vaylcblx0XHRcdCAudGhlbiggY29udHJvbGxlciA9PiB7IGNvbnRyb2xsZXIoKTsgfSk7XG5cdFx0XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vRkFMTEJBQ0tcblx0XHRcdGxvY2F0aW9uLmhhc2ggPSAnIy8nO1xuXHRcdH1cblx0XHRcblx0fTtcblxufSkoKTtcbiIsIi8vYm9vay5qc1xuY29uc3QgYm9vayA9IGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvL3Jvb3RFbGVtZW50XG5cdGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUuY29udGVudFwiKTtcblxuXHRjb25zdCBib29rQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Jvb2tDb250YWluZXInKTtcblx0XG5cdGxldCBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9ESU1FTlNJT05TXG5cdFx0bGV0IGgsIHcsIG1hcmdpblksIGZvbnRTaXplLCBsaW5lSGVpZ2h0O1xuXHRcdFxuXHRcdC8vd2lkdGggKHJlc3BvbnNpdmUpXG5cdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gNzY4KSB7XG5cdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0LTg4LTYwOy8vbmF2QmFycyBoZWlnaHQgKjIgKDIqNDQpICsgdGV4dENvbnRhaW5lciB0b3AgKiAyICgyKjMwKVxuXHRcdFx0dyA9IDY0MDtcblx0XHRcdGZvbnRTaXplID0gMTY7XG5cdFx0IH0gZWxzZSB7XG5cdFx0XHQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdCB3ID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0XHQgZm9udFNpemUgPSAxNDtcblx0XHQgfVxuXHRcdCBcblx0XHQgLy9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0IGxpbmVIZWlnaHQgPSBmb250U2l6ZSoxLjU7XG5cdFx0IG1hcmdpblkgPSBoJWxpbmVIZWlnaHQhPT0wID8gbGluZUhlaWdodCoyKygoaCVsaW5lSGVpZ2h0KS8yKSA6IGxpbmVIZWlnaHQqMztcblx0XHRcblx0XHQvL25ldyBCb29rXG5cdFx0bGV0IGJvb2sgPSBuZXcgV2ViQm9vayhib29rQ29udGFpbmVyLCB7XG5cdFx0XHQgaGVpZ2h0OiBoLFxuXHRcdFx0IG1heFdpZHRoOiB3LFxuXHRcdFx0IG1hcmdpblk6IDQ1fSk7XG5cdFx0XG5cdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gMTM2Nikge1xuXHRcdFx0Ly9Ub2MtbGFyZ2UgaGVpZ2h0XG5cdFx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjdG9jLWxhcmdlLWRldmljZSBkaXZcIikuc3R5bGUubWF4SGVpZ2h0ID0gaC0zMCArIFwicHhcIjtcblx0XHR9XG5cdFx0XHRcdFx0XHQgXG5cdFx0Ly9vbiByZXNpemVcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZXZlbnQgPT4ge1xuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gNzY4KSB7XG5cdFx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQtODgtNjA7XG5cdFx0XHRcdHcgPSA2NDA7XG5cdFx0XHRcdGZvbnRTaXplID0gMTY7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0XHR3ID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0XHRcdGZvbnRTaXplID0gMTQ7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDEzNjYpIHtcblx0XHRcdFx0Ly9Ub2MtbGFyZ2UgaGVpZ2h0XG5cdFx0XHRcdGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcihcIiN0b2MtbGFyZ2UtZGV2aWNlIGRpdlwiKS5zdHlsZS5tYXhIZWlnaHQgPSBoLTMwICsgXCJweFwiO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvL21hcmdpblkgaXMgcmVsYXRpdmUgdG8gbGluZS1oZWlnaHRcblx0XHRcdGxpbmVIZWlnaHQgPSBmb250U2l6ZSoxLjU7XG5cdFx0XHRtYXJnaW5ZID0gaCVsaW5lSGVpZ2h0IT09MCA/IGxpbmVIZWlnaHQqMisoKGglbGluZUhlaWdodCkvMikgOiBsaW5lSGVpZ2h0KjM7XG5cdFx0XHRcblx0XHRcdC8vc2V0IG5ldyBkaW1lbnNpb25zXG5cdFx0XHRib29rLnNldEhlaWdodChoKTtcblx0XHRcdGJvb2suc2V0TWF4V2lkdGgodyk7XG5cdFx0XHRib29rLnNldE1hcmdpblkobWFyZ2luWSk7XG5cdFx0XHRcblx0XHRcdGlmKGJvb2suY29sPT09dHJ1ZSkge1xuXHRcdFx0XHRib29rLnRvQm9vaygpO1xuXHRcdFx0fVxuXHRcdFxuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHRcblx0XHQvL1NXSVBFIC0gZm9yd2FyZCwgYmFja3dhcmQgb24gc3dpcGUgbGVmdCBhbmQgcmlnaHQgKGhhbW1lci5qcylcblx0XHQvLyBzbWFsbCBkZXZpY2VzXG5cdFx0bGV0IHN3aXBlQ29udGFpbmVyID0gbmV3IEhhbW1lcihib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHQtY29udGFpbmVyXScpKTtcblx0XHRzd2lwZUNvbnRhaW5lci5vbihcInN3aXBlcmlnaHQgc3dpcGVsZWZ0XCIsIGV2ZW50ID0+IHtcblx0XHRcdGlmKGV2ZW50LnR5cGU9PT1cInN3aXBlbGVmdFwiKSB7XG5cdFx0XHRcdGJvb2suZm9yd2FyZCgpO1xuXHRcdFx0fSBlbHNlIGlmKGV2ZW50LnR5cGU9PT1cInN3aXBlcmlnaHRcIikge1xuXHRcdFx0XHRib29rLmJhY2t3YXJkKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly9UT1VDSEVTLCBmb3J3YXJkLCBiYWNrd2FyZFxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG5cdFx0XHRpZihldmVudC53aGljaD09PTM5IHx8IGV2ZW50LndoaWNoPT09MzQpIHtcblx0XHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM3IHx8IGV2ZW50LndoaWNoPT09MzMpIHtcblx0XHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdFx0fSBlbHNlIGlmKGV2ZW50LndoaWNoPT09MzYpIHtcblx0XHRcdFx0Ym9vay50b0ZpcnN0UGFnZSgpO1xuXHRcdFx0fSBlbHNlIGlmKGV2ZW50LndoaWNoPT09MzUpIHtcblx0XHRcdFx0Ym9vay50b0xhc3RQYWdlKCk7XG5cdFx0XHR9XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdFx0XG5cdFx0Ly9CVVRUT05TXG5cdFx0Ly9sYXJnZVxuXHRcdGxldCBmb3J3YXJkTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNmb3J3YXJkLWxhcmdlJyk7XG5cdFx0bGV0IGJhY2t3YXJkTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNiYWNrd2FyZC1sYXJnZScpO1xuXHRcdFxuXHRcdGZvcndhcmRMYXJnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdGJvb2suZm9yd2FyZCgpO1xuXHRcdH0sIGZhbHNlKTtcblxuXHRcdGJhY2t3YXJkTGFyZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRib29rLmJhY2t3YXJkKCk7XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdFxuXHRcdC8vVE9DXHRcdFxuXHRcdGxldCB0b2MgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MnKTtcblx0XHRsZXQgb3BlblRvYyA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm9wZW4tdG9jJyk7XG5cdFx0XG5cdFx0Zm9yKGxldCBpPTA7IGk8b3BlblRvYy5sZW5ndGg7IGkrKykge1xuXHRcdFx0b3BlblRvY1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdFx0dG9jLmNsYXNzTmFtZSA9IHRvYy5jbGFzc05hbWUgPT09IFwib3BlblwiID8gXCJcIiA6IFwib3BlblwiO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdH1cblx0XHRcblx0XHR0b2MucXVlcnlTZWxlY3RvcihcIiNjbG9zZS10b2NcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0b2MuY2xhc3NOYW1lID0gXCJcIjtcblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0Ly9DbG9zZSB0b2Mgb24gY2xpY2tcblx0XHRsZXQgdG9jTGlua3MgPSB0b2MucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXHRcdGZvcihsZXQgaT0wOyBpPHRvY0xpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0b2NMaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dG9jLmNsYXNzTmFtZSA9IFwiXCI7XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0fVxuXHRcdFxuXHRcdFxuXHRcdC8vVE9DLUxBUkdFLURFVklDRVxuXHRcdGxldCB0b2NMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvYy1sYXJnZS1kZXZpY2UnKTtcblx0XHRsZXQgc3dpbmdDb250YWluZXIgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzd2luZy1jb250YWluZXInKTtcblx0XHRsZXQgc3dpbmdCYXIgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzd2luZy1iYXInKTtcblx0XHQvL1RvZ2dsZSB0b2MtbGFyZ2UtZGV2aWNlLCBzd2luZy1jb250YWluZXIsIHN3aW5nLWJhclxuXHRcdGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvZ2dsZS10b2MtbGFyZ2UtZGV2aWNlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRpZighdG9jTGFyZ2UuY2xhc3NOYW1lLm1hdGNoKC9vcGVuLykpIHtcblx0XHRcdFx0dG9jTGFyZ2UuY2xhc3NOYW1lICs9IFwiIG9wZW5cIjtcblx0XHRcdFx0c3dpbmdDb250YWluZXIuY2xhc3NOYW1lICs9IFwiIGxlZnRcIjtcblx0XHRcdFx0c3dpbmdCYXIuY2xhc3NOYW1lICs9IFwiIGxlZnRcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvY0xhcmdlLmNsYXNzTmFtZSA9IHRvY0xhcmdlLmNsYXNzTmFtZS5yZXBsYWNlKC8gb3Blbi8sJycpO1xuXHRcdFx0XHRzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUgPSBzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUucmVwbGFjZSgvIGxlZnQvLCcnKTtcblx0XHRcdFx0c3dpbmdCYXIuY2xhc3NOYW1lID0gc3dpbmdDb250YWluZXIuY2xhc3NOYW1lLnJlcGxhY2UoLyBsZWZ0LywnJyk7XG5cdFx0XHR9XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdC8vZW5kIGxvYWRlclxuXHRcdGJvb2tDb250YWluZXIuY2xhc3NOYW1lID0gJ3Nob3cnO1xuXHRcblx0fVxuXHRcblx0bGV0IHVybCA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZSgvIy8sJycpO1xuXHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB1cmwgfTtcblx0bGV0IHRleHQgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHRdJyk7XG5cdFxuXHR1dGlscy5hamF4KG9wdGlvbnMpLnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRsZXQgbWV0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLmJvb2s7XG5cdFx0dXRpbHMuYmluZChtZXRhKTtcblx0XHRyZXR1cm4gdXRpbHMuYWpheCh7IG1ldGhvZDogJ0dFVCcsIHVybDogbWV0YS5wYXRoICsgJy5odG1sJyB9KVxuXHR9KS50aGVuKCBib29rID0+IHtcblx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0ZGl2LmlubmVySFRNTCA9IGJvb2s7XG5cdFx0dGV4dC5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdGluaXQoKTtcblx0fSlcblx0XG5cbn07XG4iLCIvL2hvbWUuanNcbmNvbnN0IGhvbWUgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQvL3Jvb3RFbGVtZW50XG5cdGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUuY29udGVudFwiKTtcblx0Ly9nZXQgYm9va3Ncblx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogJy9ib29rcy8nIH07XG5cdHV0aWxzLmFqYXgob3B0aW9ucylcblx0LnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRsZXQgYm9va3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcblx0XHR1dGlscy5yZXBlYXQoYm9va3MpO1xuXHR9KTtcblx0XG59O1xuXG4iLCIvL3V0aWxzLmpzXG5jb25zdCB1dGlscyA9IHtcblx0Ly9BSkFYIHJlcXVlc3RzXG5cdGFqYXg6IG9wdGlvbnMgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCAocmVzb2x2ZSxyZWplY3QpID0+IHtcblx0XHRcdGxldCBtZXRob2QgPSBvcHRpb25zLm1ldGhvZDtcblx0XHRcdGxldCB1cmwgPSBvcHRpb25zLnVybDtcblx0XHRcdGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuXHRcdFx0bGV0IHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0XHRpZih4bWxodHRwLnJlYWR5U3RhdGU9PT00KSB7XG5cdFx0XHRcdFx0aWYoeG1saHR0cC5zdGF0dXM9PT0yMDApIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoeG1saHR0cC5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoRXJyb3IoeG1saHR0cC5zdGF0dXNUZXh0KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHhtbGh0dHAub3BlbihtZXRob2QsdXJsLHRydWUpO1xuXHRcdFx0eG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblx0XHRcdGlmKGRhdGEpIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKGRhdGEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH0sXG5cdFx0XG5cdC8vZ2V0IEhUTUwgZnJhZ21lbnQsIGNvbnRhaW5lciwgY29udHJvbGxlclx0XG5cdGdldEZyYWdtZW50OiAodGVtcGxhdGUsIGNvbnRhaW5lciwgY29udHJvbGxlcikgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB0ZW1wbGF0ZSB9XG5cdFx0cmV0dXJuIHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHRjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gcmVzcG9uc2U7XG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdFx0XHRyZXNvbHZlKGNvbnRyb2xsZXIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cdFxuXHQvL2FjdGl2ZSBsaW5rIDogY2hhbmdlIGNsYXNzXG5cdGFjdGl2ZUxpbms6ICgpID0+IHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0bGV0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hdi1iYXItdG9wXCIpO1xuXHRcdGxldCBsaW5rcyA9IHJvb3QucXVlcnlTZWxlY3RvckFsbChcImFcIik7XG5cdFx0Zm9yKGxldCBpPTA7IGk8bGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKGxvY2F0aW9uLmhyZWY9PT1saW5rc1tpXS5ocmVmKSB7XG5cdFx0XHRcdHV0aWxzLmFkZENsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ibGFja1wiKTtcblx0XHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWdyYXlcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR1dGlscy5hZGRDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtZ3JheVwiKTtcblx0XHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWJsYWNrXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0XG5cdHNldEhUTUw6IChzZWxlY3Rvcixjb250ZW50KSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRlbGVtZW50c1tpXS5pbm5lckhUTUwgPSBjb250ZW50O1xuXHRcdH1cblx0fSxcblx0XG5cdHJlcGVhdDogKGFycmF5KSA9PiB7XG5cdFx0Ly9yZXBsYWNlIGVhY2ggcHJvcCBvZiBhcnJheSBpdGVtXG5cdFx0bGV0IHJwYyA9IChjb250ZW50LGJyYWNrZXRzLHByb3BzLGl0ZW0saW5kZXgpID0+IHtcblx0XHRcdGlmKHByb3BzLmxlbmd0aD09PTApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbmV3Q29udGVudCA9ICcnO1xuXHRcdFx0Zm9yKGxldCBpPTA7IGk8cHJvcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bGV0IHByb3AgPSBwcm9wc1tpXTtcblx0XHRcdFx0bGV0IGJyYWNrZXQgPSBicmFja2V0c1tpXTtcblx0XHRcdFx0bGV0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGJyYWNrZXQsIFwiZ1wiKTtcblx0XHRcdFx0aWYocHJvcD09PScjaXRlbScpIHtcblx0XHRcdFx0XHRuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHBhdHRlcm4saXRlbSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAocHJvcD09PScjaW5kZXgnKSB7XG5cdFx0XHRcdFx0bmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZShwYXR0ZXJuLGluZGV4KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHBhdHRlcm4saXRlbVtwcm9wXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGVudCA9IG5ld0NvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3Q29udGVudDtcblx0XHR9XG5cdFx0XG5cdFx0Ly9yZXBlYXQgZm9yIGVhY2ggaXRlbSBvZiBhcnJheVxuXHRcdGxldCBycHQgPSAoZWxlbWVudCxjb250ZW50LGFycmF5LGJyYWNrZXRzLHByb3BzKSA9PiB7XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPGFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxldCBuZXdDb250ZW50ID0gcnBjKGNvbnRlbnQsYnJhY2tldHMscHJvcHMsYXJyYXlbaV0saSlcblx0XHRcdFx0bGV0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50Lm5vZGVOYW1lKTtcblx0XHRcdFx0ZWwuaW5uZXJIVE1MID0gbmV3Q29udGVudDtcblx0XHRcdFx0ZWxlbWVudC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCxlbGVtZW50KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9yZW1vdmUgZWxlbWVudFxuXHRcdFx0ZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuXHRcdH1cblx0XHQvL2dldCB0ZW1wbGF0ZSBhbmQgcHJvcHMgZm9yIGVhY2ggcmVwZWF0IGVsZW1lbnRcblx0XHRsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1qaW4tcmVwZWF0XScpO1xuXHRcdGZvcihsZXQgaT0wOyBpPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IGJyYWNrZXRzID0gW107XG5cdFx0XHRsZXQgcHJvcHMgPSBbXTtcblx0XHRcdGxldCBjb250ZW50ID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLWppbi1yZXBlYXQnKTtcblx0XHRcdFxuXHRcdFx0aWYoY29udGVudC5tYXRjaCgve3tbXntdK319L2cpKSB7XG5cdFx0XHRcdGJyYWNrZXRzID0gY29udGVudC5tYXRjaCgve3tbXntdK319L2cpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGo9MDsgajxicmFja2V0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwcm9wcy5wdXNoKGJyYWNrZXRzW2pdLnJlcGxhY2UoLyh7fH0pL2csJycpLnRyaW0oKSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHJwdChlbGVtZW50c1tpXSxjb250ZW50LGFycmF5LGJyYWNrZXRzLHByb3BzKTtcblx0XHRcdFxuXHRcdH1cblx0fSxcblx0XG5cdGJpbmQ6IChvYmplY3QpID0+IHtcblx0XHRsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1qaW4tYmluZF0nKTtcblx0XHQvL2dldCB0ZW1wbGF0ZSBhbmQgcHJvcHMgZm9yIGVhY2ggcmVwZWF0IGVsZW1lbnRcblx0XHRmb3IobGV0IGk9MDsgaTwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBicmFja2V0cyA9IFtdO1xuXHRcdFx0bGV0IHByb3BzID0gW107XG5cdFx0XHRsZXQgY29udGVudCA9IGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1qaW4tYmluZCcpO1xuXHRcdFx0bGV0IG5ld0NvbnRlbnQgPSAnJztcblx0XHRcdFxuXHRcdFx0aWYoY29udGVudC5tYXRjaCgve3tbXntdK319L2cpKSB7XG5cdFx0XHRcdGJyYWNrZXRzID0gY29udGVudC5tYXRjaCgve3tbXntdK319L2cpO1xuXHRcdFx0fVxuXHRcdFx0Ly9yZXBsYWNlIGVhY2ggYnJhY2tldCBvZiBlbGVtZW50XG5cdFx0XHRmb3IobGV0IGo9MDsgajxicmFja2V0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRsZXQgcHJvcCA9IGJyYWNrZXRzW2pdLnJlcGxhY2UoLyh7fH0pL2csJycpLnRyaW0oKTtcblx0XHRcdFx0cHJvcHMucHVzaChwcm9wKTtcblx0XHRcdFx0bGV0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGJyYWNrZXRzW2pdLCAnZycpO1xuXHRcdFx0XHRuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHBhdHRlcm4sb2JqZWN0W3Byb3BdKTtcblx0XHRcdFx0Y29udGVudCA9IG5ld0NvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGVsZW1lbnRzW2ldLmlubmVySFRNTCA9IGNvbnRlbnQ7XG5cdFx0fVxuXHR9LFxuXHRcblx0YWRkQ2xhc3M6IChzZWxlY3RvciwgY2xhc3NOYW1lKSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0bGV0IG5hbWUsIGFycmF5XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRuYW1lID0gY2xhc3NOYW1lO1xuXHRcdFx0YXJyYXkgPSBlbGVtZW50c1tpXS5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuXHRcdFx0aWYgKGFycmF5LmluZGV4T2YobmFtZSkgPT0gLTEpIHtcblx0XHRcdFx0ZWxlbWVudHNbaV0uY2xhc3NOYW1lICs9IFwiIFwiICsgY2xhc3NOYW1lO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0XG5cdHJlbW92ZUNsYXNzOiAoc2VsZWN0b3IsIGNsYXNzTmFtZSkgPT4ge1xuXHRcdGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXHRcdGxldCBuYW1lO1xuXHRcdGZvcihsZXQgaT0wOyBpPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bmFtZSA9IGNsYXNzTmFtZTtcblx0XHRcdGxldCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChjbGFzc05hbWUsICdnJyk7XG5cdFx0XHRlbGVtZW50c1tpXS5jbGFzc05hbWUgPSBlbGVtZW50c1tpXS5jbGFzc05hbWUucmVwbGFjZShwYXR0ZXJuLCBcIlwiKTtcblx0XHR9XG5cdH0sXG5cdFx0XG5cdGhpZGU6IChzZWxlY3RvcikgPT4ge1xuXHRcdGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXHRcdGZvcihsZXQgaT0wOyBpPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZWxlbWVudHNbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHR9XG5cdH1cbn1cbiJdfQ==
