"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&utils.addClass("#nav-bar-top","hidden"),utils.addClass("body","book")):(utils.removeClass("#nav-bar-top","hidden"),utils.removeClass("body","book"),utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(o){location.hash.match(/#\/books\/.+[^\/]$/)&&(window.innerWidth<768&&utils.addClass("#nav-bar-top","hidden"),utils.addClass("body","book"))},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?utils.addClass("#nav-bar-top","hidden"):utils.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n),utils.activeLink()},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n),utils.activeLink()},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/"}}();
"use strict";var book=function(){document.querySelector("#home.content");var e=document.querySelector("#bookContainer"),t=function(){var t=void 0,i=void 0,n=void 0,r=void 0,o=void 0;window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,r=16):(t=window.innerHeight,i=window.innerWidth,r=14),n=t%(o=1.5*r)!=0?2*o+t%o/2:3*o;var a=new WebBook(e,{height:t,maxWidth:i,marginY:45});window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(c){window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,r=16):(t=window.innerHeight,i=window.innerWidth,r=14),window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),n=t%(o=1.5*r)!=0?2*o+t%o/2:3*o,a.setHeight(t),a.setMaxWidth(i),a.setMarginY(n),!0===a.col&&a.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?a.forward():"swiperight"===e.type&&a.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?a.forward():37===e.which||33===e.which?a.backward():36===e.which?a.toFirstPage():35===e.which&&a.toLastPage()},!1);var c=e.querySelector("#forward-large"),d=e.querySelector("#backward-large");c.addEventListener("click",function(e){a.forward()},!1),d.addEventListener("click",function(e){a.backward()},!1);for(var l=e.querySelector("#toc"),s=e.querySelectorAll(".open-toc"),w=0;w<s.length;w++)s[w].addEventListener("click",function(e){l.className="open"===l.className?"":"open"},!1);l.querySelector("#close-toc").addEventListener("click",function(){l.className=""},!1);for(var u=l.querySelectorAll("a"),h=0;h<u.length;h++)u[h].addEventListener("click",function(){l.className=""},!1);var v=e.querySelector("#toc-large-device");e.querySelector("#swing-container"),e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){v.className.match(/open/)?(utils.removeClass("#toc-large-device","open"),utils.removeClass("#swing-container","left"),utils.removeClass("#swing-bar","left")):(utils.addClass("#toc-large-device","open"),utils.addClass("#swing-container","left"),utils.addClass("#swing-bar","left"))},!1),e.className="show"},i={method:"GET",url:location.hash.replace(/#/,"")},n=e.querySelector("[data-wb-text]");utils.ajax(i).then(function(e){var t=JSON.parse(e).book;return utils.bind(t),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var i=document.createElement("div");i.innerHTML=e,n.appendChild(i),t()})};
"use strict";var home=function(){document.querySelector("#home.content");utils.ajax({method:"GET",url:"/books/"}).then(function(e){var t=JSON.parse(e);utils.repeat(t)})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,r){var n=e.method,a=e.url,l=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):r(Error(o.statusText)))},o.open(n,a,!0),o.setRequestHeader("Content-type","application/json"),l?o.send(l):o.send()})},getFragment:function(e,t,r){var n={method:"GET",url:e};return utils.ajax(n).then(function(e){return new Promise(function(n){t.innerHTML="";var a=document.createElement("div");a.innerHTML=e,t.appendChild(a),n(r)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(utils.addClass("#"+e[t].id,"w3-text-black"),utils.removeClass("#"+e[t].id,"w3-text-gray")):(utils.addClass("#"+e[t].id,"w3-text-gray"),utils.removeClass("#"+e[t].id,"w3-text-black"))},setHTML:function(e,t){for(var r=document.querySelectorAll(e),n=0;n<r.length;n++)r[n].innerHTML=t},repeat:function(e){for(var t=function(e,t,r,n,a){if(0===r.length)return e;for(var l="",o=0;o<r.length;o++){var i=r[o],u=t[o],c=new RegExp(u,"g");e=l="#item"===i?e.replace(c,n):"#index"===i?e.replace(c,a):e.replace(c,n[i])}return l},r=document.querySelectorAll("[data-utils-repeat]"),n=0;n<r.length;n++){var a=[],l=[],o=r[n].getAttribute("data-utils-repeat");o.match(/{{[^{]+}}/g)&&(a=o.match(/{{[^{]+}}/g));for(var i=0;i<a.length;i++)l.push(a[i].replace(/({|})/g,"").trim());!function(e,r,n,a,l){for(var o=0;o<n.length;o++){var i=t(r,a,l,n[o],o),u=document.createElement(e.nodeName);u.innerHTML=i,e.parentElement.insertBefore(u,e)}e.parentElement.removeChild(e)}(r[n],o,e,a,l)}},bind:function(e){for(var t=document.querySelectorAll("[data-utils-bind]"),r=0;r<t.length;r++){var n=[],a=[],l=t[r].getAttribute("data-utils-bind");l.match(/{{[^{]+}}/g)&&(n=l.match(/{{[^{]+}}/g));for(var o=0;o<n.length;o++){var i=n[o].replace(/({|})/g,"").trim();a.push(i);var u=new RegExp(n[o],"g");l=l.replace(u,e[i])}t[r].innerHTML=l}},addClass:function(e,t){for(var r=document.querySelectorAll(e),n=void 0,a=0;a<r.length;a++)n=t,-1==r[a].className.split(" ").indexOf(n)&&(r[a].className+=" "+t)},removeClass:function(e,t){for(var r=document.querySelectorAll(e),n=0;n<r.length;n++){t;var a=new RegExp(t,"g");r[n].className=r[n].className.replace(a,"")}},hide:function(e){for(var t=document.querySelectorAll(e),r=0;r<t.length;r++)t[r].style.display="none"}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidXRpbHMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwic2V0SFRNTCIsImUiLCJpbm5lcldpZHRoIiwib2xkaGFzaCIsIm5ld2hhc2giLCJyb3V0ZXIiLCJhY3RpdmVMaW5rIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwiaG9tZSIsInRoZW4iLCJjb250cm9sbGVyIiwiZ2V0RnJhZ21lbnQiLCJib29rIiwiYm9va0NvbnRhaW5lciIsImluaXQiLCJoIiwidyIsIm1hcmdpblkiLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJpbm5lckhlaWdodCIsIldlYkJvb2siLCJoZWlnaHQiLCJtYXhXaWR0aCIsInN0eWxlIiwibWF4SGVpZ2h0IiwiZXZlbnQiLCJzZXRIZWlnaHQiLCJzZXRNYXhXaWR0aCIsInNldE1hcmdpblkiLCJ0b0Jvb2siLCJIYW1tZXIiLCJvbiIsInR5cGUiLCJmb3J3YXJkIiwic3dpcGVDb250YWluZXIiLCJiYWNrd2FyZCIsIndoaWNoIiwidG9MYXN0UGFnZSIsImZvcndhcmRMYXJnZSIsImJhY2t3YXJkTGFyZ2UiLCJ0b2MiLCJvcGVuVG9jIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTmFtZSIsInRvY0xpbmtzIiwiaSIsImxlbmd0aCIsInRvY0xhcmdlIiwic3dpbmdCYXIiLCJ1cmwiLCJyZXBsYWNlIiwib3B0aW9ucyIsImFqYXgiLCJyZXNwb25zZSIsIm1ldGEiLCJKU09OIiwiYmluZCIsIm1ldGhvZCIsInBhdGgiLCJjcmVhdGVFbGVtZW50IiwiZGl2IiwiaW5uZXJIVE1MIiwidGV4dCIsInJvb3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInByb21pc2UiLCJ4bWxodHRwIiwiZGF0YSIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInRlbXBsYXRlIiwibGlua3MiLCJocmVmIiwiaWQiLCJlbGVtZW50cyIsInNlbGVjdG9yIiwiY29udGVudCIsInJlcGVhdCIsImFycmF5IiwicnBjIiwiYnJhY2tldHMiLCJwcm9wcyIsIml0ZW0iLCJpbmRleCIsIm5ld0NvbnRlbnQiLCJicmFja2V0IiwicGF0dGVybiIsIlJlZ0V4cCIsInByb3AiLCJlbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiaiIsInRyaW0iLCJlbCIsIm5vZGVOYW1lIiwicnB0IiwicGFyZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsInB1c2giLCJuYW1lIiwiaGlkZSIsImRpc3BsYXkiXSwibWFwcGluZ3MiOiJhQUVDQSxPQUFBQyxpQkFBQSxhQUFBLFdBR0lDLFNBQVNDLEtBQUtDLE1BQU0sdUJBRHhCSixPQUFPQyxXQUFpQixLQUN2QkksTUFBR0gsU0FBQSxlQUFvQixVQUVyQkcsTUFBQUEsU0FBQSxPQUFlLFVBRWhCQSxNQUFNQyxZQUFTLGVBQWYsVUFFQUQsTUFBTUUsWUFBWSxPQUFBLFFBR2xCRixNQUFNRyxRQUFRLGFBQWMsT0FBNUJILEdBRURMLE9BQUVDLGlCQVpILE9BQUEsU0FBQVEsR0FlSVAsU0FBU0MsS0FBS0MsTUFBTSx3QkFEeEJKLE9BQU9DLFdBQWlCLEtBQ3ZCSSxNQUFHSCxTQUFBLGVBQW9CLFVBRXJCRyxNQUFBQSxTQUFBLE9BQWUsV0FFaEJBLEdBRURMLE9BQUVDLGlCQVBILFNBQUEsV0FVSUMsU0FBU0MsS0FBS0MsTUFBTSx1QkFBeUJKLE9BQU9VLFdBQWEsSUFEckVWLE1BQU9DLFNBQUFBLGVBQVAsVUFFRUksTUFBTUMsWUFBUyxlQUFnQixZQUUvQkQ7Y0M5QkgsV0FBWSxLQUFYSCxTQUFXQyxPQUFBRCxTQUFBQyxLQUFBLE1BSVgsSUFBSVEsT0FBQUEs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R0FuSld3QixPQUFBQSxFQXlKSjdELEVBQUUsRUFBR0EsRUFBR29DLEVBQVNuQyxPQUFRRCxJQUhsQ2xELEVBQUFBLEdBRUMsR0FESXNGLEVBQVc3RSxHQUFBQSxVQUFTc0MsTUFBQUEsS0FDcEJnRSxRQUFKQSxLQUFBekIsRUFBVUksR0FBQUEsV0FBVixJQUFBMUMsSUFLRXNDLFlBQUEsU0FBQUMsRUFBQXZDLEdBN0pVLElBQUEsSUE4SlZzQyxFQUFBN0UsU0FBQXNDLGlCQUFBd0MsR0E5SlVyQyxFQUFBLEVBQUFBLEVBQUFvQyxFQUFBbkMsT0FBQUQsSUFBQSxDQXNLSkYsRUFKVC9DLElBQUFBLEVBQWEsSUFBQWtHLE9BQUFuRCxFQUFDdUMsS0FDYkQsRUFBSUEsR0FBQUEsVUFBb0J2QyxFQUFBQSxHQUFBQSxVQUFpQndDLFFBQXpDVyxFQUFBLE1BSUNjLEtBQUlkLFNBQUFBLEdBRUosSUFBQSxJQURBWixFQUFZdEMsU0FBWkQsaUJBQW9DQyxHQUNwQ0UsRUFBQSxFQUFBQSxFQUFBb0MsRUFBQW5DLE9BQUFELElBektXb0MsRUFBQXBDLEdBQUF0QixNQUFBcUYsUUFBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2luZGV4LmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0XHR1dGlscy5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XHRcdHV0aWxzLmFkZENsYXNzKCdib2R5JywgJ2Jvb2snKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0XHRcblx0XHRcdHV0aWxzLnJlbW92ZUNsYXNzKCdib2R5JywgJ2Jvb2snKTtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9wLXRpdGxlXCIsIFwiXCIpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXHRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoZSkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0XHR1dGlscy5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XHRcdHV0aWxzLmFkZENsYXNzKCdib2R5JywgJ2Jvb2snKTtcblx0XHR9XG5cdH0sIGZhbHNlKTtcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykgJiYgd2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdHV0aWxzLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR1dGlscy5yZW1vdmVDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHR9XG5cdH0sIGZhbHNlKTtcblx0XG59KSgpO1xuIiwiLy9yb3V0ZXMuanNcbihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZihsb2NhdGlvbi5oYXNoID09PSBcIlwiKSB7IGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7IH1cblx0XG5cdGxldCBvbGRoYXNoLCBuZXdoYXNoO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0XHQvL2FjdGl2ZSBsaW5rXG5cdFx0XHR1dGlscy5hY3RpdmVMaW5rKCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0b2xkaGFzaCA9IG5ld2hhc2g7XG5cdFx0XHRuZXdoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0XHRcdHJvdXRlcihvbGRoYXNoLCBuZXdoYXNoKTtcblx0XHRcdC8vYWN0aXZlIGxpbmtcblx0XHRcdHV0aWxzLmFjdGl2ZUxpbmsoKTtcblx0XHR9LCBmYWxzZSk7XG5cblxuXHRsZXQgcm91dGVyID0gKG9sZGhhc2gsIG5ld2hhc2gpID0+IHtcblx0XHRcblx0XHR2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdC8vUk9VVEVTXG5cdFx0aWYobmV3aGFzaCA9PT0gJyMvJykge1xuXHRcdFx0Ly9IT01FXG5cdFx0XHR1dGlscy5nZXRGcmFnbWVudCgnL2ZyYWdtZW50cy9ob21lL2hvbWUuaHRtbCcsIGNvbnRhaW5lciwgaG9tZSlcblx0XHRcdC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHQgfSBlbHNlIGlmKG5ld2hhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHQgLy9CT09LXG5cdFx0XHQgdXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvYm9vay9ib29rLmh0bWwnLCBjb250YWluZXIsIGJvb2spXG5cdFx0XHQgLnRoZW4oIGNvbnRyb2xsZXIgPT4geyBjb250cm9sbGVyKCk7IH0pO1xuXHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL0ZBTExCQUNLXG5cdFx0XHRsb2NhdGlvbi5oYXNoID0gJyMvJztcblx0XHR9XG5cdFx0XG5cdH07XG5cbn0pKCk7XG4iLCIvL2Jvb2suanNcbmNvbnN0IGJvb2sgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly9yb290RWxlbWVudFxuXHRjb25zdCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLmNvbnRlbnRcIik7XG5cblx0Y29uc3QgYm9va0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib29rQ29udGFpbmVyJyk7XG5cdFxuXHRsZXQgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vRElNRU5TSU9OU1xuXHRcdGxldCBoLCB3LCBtYXJnaW5ZLCBmb250U2l6ZSwgbGluZUhlaWdodDtcblx0XHRcblx0XHQvL3dpZHRoIChyZXNwb25zaXZlKVxuXHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodC04OC02MDsvL25hdkJhcnMgaGVpZ2h0ICoyICgyKjQ0KSArIHRleHRDb250YWluZXIgdG9wICogMiAoMiozMClcblx0XHRcdHcgPSA2NDA7XG5cdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdCB9IGVsc2Uge1xuXHRcdFx0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0XHQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0IGZvbnRTaXplID0gMTQ7XG5cdFx0IH1cblx0XHQgXG5cdFx0IC8vbWFyZ2luWSBpcyByZWxhdGl2ZSB0byBsaW5lLWhlaWdodFxuXHRcdCBsaW5lSGVpZ2h0ID0gZm9udFNpemUqMS41O1xuXHRcdCBtYXJnaW5ZID0gaCVsaW5lSGVpZ2h0IT09MCA/IGxpbmVIZWlnaHQqMisoKGglbGluZUhlaWdodCkvMikgOiBsaW5lSGVpZ2h0KjM7XG5cdFx0XG5cdFx0Ly9uZXcgQm9va1xuXHRcdGxldCBib29rID0gbmV3IFdlYkJvb2soYm9va0NvbnRhaW5lciwge1xuXHRcdFx0IGhlaWdodDogaCxcblx0XHRcdCBtYXhXaWR0aDogdyxcblx0XHRcdCBtYXJnaW5ZOiA0NX0pO1xuXHRcdFxuXHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDEzNjYpIHtcblx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3RvYy1sYXJnZS1kZXZpY2UgZGl2XCIpLnN0eWxlLm1heEhlaWdodCA9IGgtMzAgKyBcInB4XCI7XG5cdFx0fVxuXHRcdFx0XHRcdFx0IFxuXHRcdC8vb24gcmVzaXplXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50ID0+IHtcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0LTg4LTYwO1xuXHRcdFx0XHR3ID0gNjQwO1xuXHRcdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdFx0dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0XHRmb250U2l6ZSA9IDE0O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjdG9jLWxhcmdlLWRldmljZSBkaXZcIikuc3R5bGUubWF4SGVpZ2h0ID0gaC0zMCArIFwicHhcIjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0XHRsaW5lSGVpZ2h0ID0gZm9udFNpemUqMS41O1xuXHRcdFx0bWFyZ2luWSA9IGglbGluZUhlaWdodCE9PTAgPyBsaW5lSGVpZ2h0KjIrKChoJWxpbmVIZWlnaHQpLzIpIDogbGluZUhlaWdodCozO1xuXHRcdFx0XG5cdFx0XHQvL3NldCBuZXcgZGltZW5zaW9uc1xuXHRcdFx0Ym9vay5zZXRIZWlnaHQoaCk7XG5cdFx0XHRib29rLnNldE1heFdpZHRoKHcpO1xuXHRcdFx0Ym9vay5zZXRNYXJnaW5ZKG1hcmdpblkpO1xuXHRcdFx0XG5cdFx0XHRpZihib29rLmNvbD09PXRydWUpIHtcblx0XHRcdFx0Ym9vay50b0Jvb2soKTtcblx0XHRcdH1cblx0XHRcblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0XG5cdFx0Ly9TV0lQRSAtIGZvcndhcmQsIGJhY2t3YXJkIG9uIHN3aXBlIGxlZnQgYW5kIHJpZ2h0IChoYW1tZXIuanMpXG5cdFx0Ly8gc21hbGwgZGV2aWNlc1xuXHRcdGxldCBzd2lwZUNvbnRhaW5lciA9IG5ldyBIYW1tZXIoYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS13Yi10ZXh0LWNvbnRhaW5lcl0nKSk7XG5cdFx0c3dpcGVDb250YWluZXIub24oXCJzd2lwZXJpZ2h0IHN3aXBlbGVmdFwiLCBldmVudCA9PiB7XG5cdFx0XHRpZihldmVudC50eXBlPT09XCJzd2lwZWxlZnRcIikge1xuXHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC50eXBlPT09XCJzd2lwZXJpZ2h0XCIpIHtcblx0XHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vVE9VQ0hFUywgZm9yd2FyZCwgYmFja3dhcmRcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4ge1xuXHRcdFx0aWYoZXZlbnQud2hpY2g9PT0zOSB8fCBldmVudC53aGljaD09PTM0KSB7XG5cdFx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNyB8fCBldmVudC53aGljaD09PTMzKSB7XG5cdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM2KSB7XG5cdFx0XHRcdGJvb2sudG9GaXJzdFBhZ2UoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM1KSB7XG5cdFx0XHRcdGJvb2sudG9MYXN0UGFnZSgpO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHRcdFxuXHRcdC8vQlVUVE9OU1xuXHRcdC8vbGFyZ2Vcblx0XHRsZXQgZm9yd2FyZExhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjZm9yd2FyZC1sYXJnZScpO1xuXHRcdGxldCBiYWNrd2FyZExhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYmFja3dhcmQtbGFyZ2UnKTtcblx0XHRcblx0XHRmb3J3YXJkTGFyZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHR9LCBmYWxzZSk7XG5cblx0XHRiYWNrd2FyZExhcmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHRcblx0XHQvL1RPQ1x0XHRcblx0XHRsZXQgdG9jID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9jJyk7XG5cdFx0bGV0IG9wZW5Ub2MgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcGVuLXRvYycpO1xuXHRcdFxuXHRcdGZvcihsZXQgaT0wOyBpPG9wZW5Ub2MubGVuZ3RoOyBpKyspIHtcblx0XHRcdG9wZW5Ub2NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdHRvYy5jbGFzc05hbWUgPSB0b2MuY2xhc3NOYW1lID09PSBcIm9wZW5cIiA/IFwiXCIgOiBcIm9wZW5cIjtcblx0XHRcdH0sIGZhbHNlKTtcblx0XHR9XG5cdFx0XG5cdFx0dG9jLnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtdG9jXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dG9jLmNsYXNzTmFtZSA9IFwiXCI7XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdC8vQ2xvc2UgdG9jIG9uIGNsaWNrXG5cdFx0bGV0IHRvY0xpbmtzID0gdG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcblx0XHRmb3IobGV0IGk9MDsgaTx0b2NMaW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dG9jTGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdH1cblx0XHRcblx0XHRcblx0XHQvL1RPQy1MQVJHRS1ERVZJQ0Vcblx0XHRsZXQgdG9jTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MtbGFyZ2UtZGV2aWNlJyk7XG5cdFx0bGV0IHN3aW5nQ29udGFpbmVyID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjc3dpbmctY29udGFpbmVyJyk7XG5cdFx0bGV0IHN3aW5nQmFyID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjc3dpbmctYmFyJyk7XG5cdFx0Ly9Ub2dnbGUgdG9jLWxhcmdlLWRldmljZSwgc3dpbmctY29udGFpbmVyLCBzd2luZy1iYXJcblx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2dnbGUtdG9jLWxhcmdlLWRldmljZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0aWYoIXRvY0xhcmdlLmNsYXNzTmFtZS5tYXRjaCgvb3Blbi8pKSB7XG5cdFx0XHRcdHV0aWxzLmFkZENsYXNzKCcjdG9jLWxhcmdlLWRldmljZScsJ29wZW4nKTtcblx0XHRcdFx0dXRpbHMuYWRkQ2xhc3MoJyNzd2luZy1jb250YWluZXInLCdsZWZ0Jyk7XG5cdFx0XHRcdHV0aWxzLmFkZENsYXNzKCcjc3dpbmctYmFyJywnbGVmdCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoJyN0b2MtbGFyZ2UtZGV2aWNlJywnb3BlbicpO1xuXHRcdFx0XHR1dGlscy5yZW1vdmVDbGFzcygnI3N3aW5nLWNvbnRhaW5lcicsJ2xlZnQnKTtcblx0XHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoJyNzd2luZy1iYXInLCdsZWZ0Jyk7XG5cdFx0XHR9XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdC8vZW5kIGxvYWRlclxuXHRcdGJvb2tDb250YWluZXIuY2xhc3NOYW1lID0gJ3Nob3cnO1xuXHRcblx0fVxuXHRcblx0bGV0IHVybCA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZSgvIy8sJycpO1xuXHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB1cmwgfTtcblx0bGV0IHRleHQgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHRdJyk7XG5cdFxuXHR1dGlscy5hamF4KG9wdGlvbnMpLnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRsZXQgbWV0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLmJvb2s7XG5cdFx0dXRpbHMuYmluZChtZXRhKTtcblx0XHRyZXR1cm4gdXRpbHMuYWpheCh7IG1ldGhvZDogJ0dFVCcsIHVybDogbWV0YS5wYXRoICsgJy5odG1sJyB9KVxuXHR9KS50aGVuKCBib29rID0+IHtcblx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0ZGl2LmlubmVySFRNTCA9IGJvb2s7XG5cdFx0dGV4dC5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdGluaXQoKTtcblx0fSlcblx0XG5cbn07XG4iLCIvL2hvbWUuanNcbmNvbnN0IGhvbWUgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQvL3Jvb3RFbGVtZW50XG5cdGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUuY29udGVudFwiKTtcblx0Ly9nZXQgYm9va3Ncblx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogJy9ib29rcy8nIH07XG5cdHV0aWxzLmFqYXgob3B0aW9ucylcblx0LnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRsZXQgYm9va3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcblx0XHR1dGlscy5yZXBlYXQoYm9va3MpO1xuXHR9KTtcblx0XG59O1xuXG4iLCIvL3V0aWxzLmpzXG5jb25zdCB1dGlscyA9IHtcblx0Ly9BSkFYIHJlcXVlc3RzXG5cdGFqYXg6IG9wdGlvbnMgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCAocmVzb2x2ZSxyZWplY3QpID0+IHtcblx0XHRcdGxldCBtZXRob2QgPSBvcHRpb25zLm1ldGhvZDtcblx0XHRcdGxldCB1cmwgPSBvcHRpb25zLnVybDtcblx0XHRcdGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuXHRcdFx0bGV0IHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0XHRpZih4bWxodHRwLnJlYWR5U3RhdGU9PT00KSB7XG5cdFx0XHRcdFx0aWYoeG1saHR0cC5zdGF0dXM9PT0yMDApIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoeG1saHR0cC5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoRXJyb3IoeG1saHR0cC5zdGF0dXNUZXh0KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHhtbGh0dHAub3BlbihtZXRob2QsdXJsLHRydWUpO1xuXHRcdFx0eG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblx0XHRcdGlmKGRhdGEpIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKGRhdGEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH0sXG5cdFx0XG5cdC8vZ2V0IEhUTUwgZnJhZ21lbnQsIGNvbnRhaW5lciwgY29udHJvbGxlclx0XG5cdGdldEZyYWdtZW50OiAodGVtcGxhdGUsIGNvbnRhaW5lciwgY29udHJvbGxlcikgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB0ZW1wbGF0ZSB9XG5cdFx0cmV0dXJuIHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHRjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gcmVzcG9uc2U7XG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdFx0XHRyZXNvbHZlKGNvbnRyb2xsZXIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cdFxuXHQvL2FjdGl2ZSBsaW5rIDogY2hhbmdlIGNsYXNzXG5cdGFjdGl2ZUxpbms6ICgpID0+IHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0bGV0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hdi1iYXItdG9wXCIpO1xuXHRcdGxldCBsaW5rcyA9IHJvb3QucXVlcnlTZWxlY3RvckFsbChcImFcIik7XG5cdFx0Zm9yKGxldCBpPTA7IGk8bGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKGxvY2F0aW9uLmhyZWY9PT1saW5rc1tpXS5ocmVmKSB7XG5cdFx0XHRcdHV0aWxzLmFkZENsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ibGFja1wiKTtcblx0XHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWdyYXlcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR1dGlscy5hZGRDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtZ3JheVwiKTtcblx0XHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWJsYWNrXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0XG5cdHNldEhUTUw6IChzZWxlY3Rvcixjb250ZW50KSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRlbGVtZW50c1tpXS5pbm5lckhUTUwgPSBjb250ZW50O1xuXHRcdH1cblx0fSxcblx0XG5cdHJlcGVhdDogKGFycmF5KSA9PiB7XG5cdFx0Ly9yZXBsYWNlIGVhY2ggcHJvcCBvZiBhcnJheSBpdGVtXG5cdFx0bGV0IHJwYyA9IChjb250ZW50LGJyYWNrZXRzLHByb3BzLGl0ZW0saW5kZXgpID0+IHtcblx0XHRcdGlmKHByb3BzLmxlbmd0aD09PTApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbmV3Q29udGVudCA9ICcnO1xuXHRcdFx0Zm9yKGxldCBpPTA7IGk8cHJvcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bGV0IHByb3AgPSBwcm9wc1tpXTtcblx0XHRcdFx0bGV0IGJyYWNrZXQgPSBicmFja2V0c1tpXTtcblx0XHRcdFx0bGV0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGJyYWNrZXQsIFwiZ1wiKTtcblx0XHRcdFx0aWYocHJvcD09PScjaXRlbScpIHtcblx0XHRcdFx0XHRuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHBhdHRlcm4saXRlbSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAocHJvcD09PScjaW5kZXgnKSB7XG5cdFx0XHRcdFx0bmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZShwYXR0ZXJuLGluZGV4KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHBhdHRlcm4saXRlbVtwcm9wXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGVudCA9IG5ld0NvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3Q29udGVudDtcblx0XHR9XG5cdFx0XG5cdFx0Ly9yZXBlYXQgZm9yIGVhY2ggaXRlbSBvZiBhcnJheVxuXHRcdGxldCBycHQgPSAoZWxlbWVudCxjb250ZW50LGFycmF5LGJyYWNrZXRzLHByb3BzKSA9PiB7XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPGFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxldCBuZXdDb250ZW50ID0gcnBjKGNvbnRlbnQsYnJhY2tldHMscHJvcHMsYXJyYXlbaV0saSlcblx0XHRcdFx0bGV0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50Lm5vZGVOYW1lKTtcblx0XHRcdFx0ZWwuaW5uZXJIVE1MID0gbmV3Q29udGVudDtcblx0XHRcdFx0ZWxlbWVudC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCxlbGVtZW50KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9yZW1vdmUgZWxlbWVudFxuXHRcdFx0ZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuXHRcdH1cblx0XHQvL2dldCB0ZW1wbGF0ZSBhbmQgcHJvcHMgZm9yIGVhY2ggcmVwZWF0IGVsZW1lbnRcblx0XHRsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS11dGlscy1yZXBlYXRdJyk7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgYnJhY2tldHMgPSBbXTtcblx0XHRcdGxldCBwcm9wcyA9IFtdO1xuXHRcdFx0bGV0IGNvbnRlbnQgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXRpbHMtcmVwZWF0Jyk7XG5cdFx0XHRcblx0XHRcdGlmKGNvbnRlbnQubWF0Y2goL3t7W157XSt9fS9nKSkge1xuXHRcdFx0XHRicmFja2V0cyA9IGNvbnRlbnQubWF0Y2goL3t7W157XSt9fS9nKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBqPTA7IGo8YnJhY2tldHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cHJvcHMucHVzaChicmFja2V0c1tqXS5yZXBsYWNlKC8oe3x9KS9nLCcnKS50cmltKCkpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRycHQoZWxlbWVudHNbaV0sY29udGVudCxhcnJheSxicmFja2V0cyxwcm9wcyk7XG5cdFx0XHRcblx0XHR9XG5cdH0sXG5cdFxuXHRiaW5kOiAob2JqZWN0KSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdXRpbHMtYmluZF0nKTtcblx0XHQvL2dldCB0ZW1wbGF0ZSBhbmQgcHJvcHMgZm9yIGVhY2ggcmVwZWF0IGVsZW1lbnRcblx0XHRmb3IobGV0IGk9MDsgaTwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBicmFja2V0cyA9IFtdO1xuXHRcdFx0bGV0IHByb3BzID0gW107XG5cdFx0XHRsZXQgY29udGVudCA9IGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS11dGlscy1iaW5kJyk7XG5cdFx0XHRsZXQgbmV3Q29udGVudCA9ICcnO1xuXHRcdFx0XG5cdFx0XHRpZihjb250ZW50Lm1hdGNoKC97e1tee10rfX0vZykpIHtcblx0XHRcdFx0YnJhY2tldHMgPSBjb250ZW50Lm1hdGNoKC97e1tee10rfX0vZyk7XG5cdFx0XHR9XG5cdFx0XHQvL3JlcGxhY2UgZWFjaCBicmFja2V0IG9mIGVsZW1lbnRcblx0XHRcdGZvcihsZXQgaj0wOyBqPGJyYWNrZXRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGxldCBwcm9wID0gYnJhY2tldHNbal0ucmVwbGFjZSgvKHt8fSkvZywnJykudHJpbSgpO1xuXHRcdFx0XHRwcm9wcy5wdXNoKHByb3ApO1xuXHRcdFx0XHRsZXQgcGF0dGVybiA9IG5ldyBSZWdFeHAoYnJhY2tldHNbal0sICdnJyk7XG5cdFx0XHRcdG5ld0NvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocGF0dGVybixvYmplY3RbcHJvcF0pO1xuXHRcdFx0XHRjb250ZW50ID0gbmV3Q29udGVudDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZWxlbWVudHNbaV0uaW5uZXJIVE1MID0gY29udGVudDtcblx0XHR9XG5cdH0sXG5cdFxuXHRhZGRDbGFzczogKHNlbGVjdG9yLCBjbGFzc05hbWUpID0+IHtcblx0XHRsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblx0XHRsZXQgbmFtZSwgYXJyYXlcblx0XHRmb3IobGV0IGk9MDsgaTwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG5hbWUgPSBjbGFzc05hbWU7XG5cdFx0XHRhcnJheSA9IGVsZW1lbnRzW2ldLmNsYXNzTmFtZS5zcGxpdChcIiBcIik7XG5cdFx0XHRpZiAoYXJyYXkuaW5kZXhPZihuYW1lKSA9PSAtMSkge1xuXHRcdFx0XHRlbGVtZW50c1tpXS5jbGFzc05hbWUgKz0gXCIgXCIgKyBjbGFzc05hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRcblx0cmVtb3ZlQ2xhc3M6IChzZWxlY3RvciwgY2xhc3NOYW1lKSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0bGV0IG5hbWU7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRuYW1lID0gY2xhc3NOYW1lO1xuXHRcdFx0bGV0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGNsYXNzTmFtZSwgJ2cnKTtcblx0XHRcdGVsZW1lbnRzW2ldLmNsYXNzTmFtZSA9IGVsZW1lbnRzW2ldLmNsYXNzTmFtZS5yZXBsYWNlKHBhdHRlcm4sIFwiXCIpO1xuXHRcdH1cblx0fSxcblx0XHRcblx0aGlkZTogKHNlbGVjdG9yKSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRlbGVtZW50c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdH1cblx0fVxufVxuIl19
