"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&utils.addClass("#nav-bar-top","hidden"),utils.addClass("body","book")):(utils.removeClass("#nav-bar-top","hidden"),utils.removeClass("body","book"),utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(o){location.hash.match(/#\/books\/.+[^\/]$/)&&(window.innerWidth<768&&utils.addClass("#nav-bar-top","hidden"),utils.addClass("body","book"))},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?utils.addClass("#nav-bar-top","hidden"):utils.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n),utils.activeLink()},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n),utils.activeLink()},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/"}}();
"use strict";var book=function(){document.querySelector("#home.content");var e=document.querySelector("#bookContainer"),t=function(){var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0;window.innerWidth>=768?(t=window.innerHeight-88-60,n=640,r=16):(t=window.innerHeight,n=window.innerWidth,r=14),i=t%(a=1.5*r)!=0?2*a+t%a/2:3*a;var o=new WebBook(e,{height:t,maxWidth:n,marginY:45});window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(c){window.innerWidth>=768?(t=window.innerHeight-88-60,n=640,r=16):(t=window.innerHeight,n=window.innerWidth,r=14),window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),i=t%(a=1.5*r)!=0?2*a+t%a/2:3*a,o.setHeight(t),o.setMaxWidth(n),o.setMarginY(i),!0===o.col&&o.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?o.forward():"swiperight"===e.type&&o.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?o.forward():37===e.which||33===e.which?o.backward():36===e.which?o.toFirstPage():35===e.which&&o.toLastPage()},!1);var c=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");c.addEventListener("click",function(e){o.forward()},!1),l.addEventListener("click",function(e){o.backward()},!1);for(var d=e.querySelector("#toc"),s=e.querySelectorAll(".open-toc"),w=0;w<s.length;w++)s[w].addEventListener("click",function(e){d.className="open"===d.className?"":"open"},!1);d.querySelector("#close-toc").addEventListener("click",function(){d.className=""},!1);for(var h=d.querySelectorAll("a"),u=0;u<h.length;u++)h[u].addEventListener("click",function(){d.className=""},!1);var m=e.querySelector("#toc-large-device"),v=e.querySelector("#swing-container"),g=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){m.className.match(/open/)?(m.className=m.className.replace(/ open/,""),v.className=v.className.replace(/ left/,""),g.className=v.className.replace(/ left/,"")):(m.className+=" open",v.className+=" left",g.className+=" left")},!1),e.className="show"},n={method:"GET",url:location.hash.replace(/#/,"")},i=e.querySelector("[data-wb-text]");utils.ajax(n).then(function(e){var t=JSON.parse(e).book;return utils.bind(t),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var n=document.createElement("div");n.innerHTML=e,i.appendChild(n),t()})};
"use strict";var home=function(){document.querySelector("#home.content");utils.ajax({method:"GET",url:"/books/"}).then(function(e){var t=JSON.parse(e);utils.repeat(t)})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,r){var n=e.method,a=e.url,l=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):r(Error(o.statusText)))},o.open(n,a,!0),o.setRequestHeader("Content-type","application/json"),l?o.send(l):o.send()})},getFragment:function(e,t,r){t.childNodes[0]&&t.removeChild(t.childNodes[0]);var n={method:"GET",url:e};return utils.ajax(n).then(function(e){return new Promise(function(n){var a=document.createElement("div");a.innerHTML=e,t.appendChild(a),n(r)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(utils.addClass("#"+e[t].id,"w3-text-black"),utils.removeClass("#"+e[t].id,"w3-text-gray")):(utils.addClass("#"+e[t].id,"w3-text-gray"),utils.removeClass("#"+e[t].id,"w3-text-black"))},setHTML:function(e,t){for(var r=document.querySelectorAll(e),n=0;n<r.length;n++)r[n].innerHTML=t},repeat:function(e){for(var t=function(e,t,r,n,a){if(0===r.length)return e;for(var l="",o=0;o<r.length;o++){var i=r[o],c=t[o],u=new RegExp(c,"g");e=l="#item"===i?e.replace(u,n):"#index"===i?e.replace(u,a):e.replace(u,n[i])}return l},r=document.querySelectorAll("[data-jin-repeat]"),n=0;n<r.length;n++){var a=[],l=[],o=r[n].getAttribute("data-jin-repeat");o.match(/{{[^{]+}}/g)&&(a=o.match(/{{[^{]+}}/g));for(var i=0;i<a.length;i++)l.push(a[i].replace(/({|})/g,"").trim());!function(e,r,n,a,l){for(var o=0;o<n.length;o++){var i=t(r,a,l,n[o],o),c=document.createElement(e.nodeName);c.innerHTML=i,e.parentElement.insertBefore(c,e)}e.parentElement.removeChild(e)}(r[n],o,e,a,l)}},bind:function(e){for(var t=document.querySelectorAll("[data-jin-bind]"),r=0;r<t.length;r++){var n=[],a=[],l=t[r].getAttribute("data-jin-bind");l.match(/{{[^{]+}}/g)&&(n=l.match(/{{[^{]+}}/g));for(var o=0;o<n.length;o++){var i=n[o].replace(/({|})/g,"").trim();a.push(i);var c=new RegExp(n[o],"g");l=l.replace(c,e[i])}t[r].innerHTML=l}},addClass:function(e,t){for(var r=document.querySelectorAll(e),n=void 0,a=0;a<r.length;a++)n=t,-1==r[a].className.split(" ").indexOf(n)&&(r[a].className+=" "+t)},removeClass:function(e,t){for(var r=document.querySelectorAll(e),n=0;n<r.length;n++){t;var a=new RegExp(t,"g");r[n].className=r[n].className.replace(a,"")}},hide:function(e){for(var t=document.querySelectorAll(e),r=0;r<t.length;r++)t[r].style.display="none"}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidXRpbHMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwic2V0SFRNTCIsImUiLCJpbm5lcldpZHRoIiwib2xkaGFzaCIsIm5ld2hhc2giLCJyb3V0ZXIiLCJhY3RpdmVMaW5rIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyIiwiaG9tZSIsInRoZW4iLCJjb250cm9sbGVyIiwiZ2V0RnJhZ21lbnQiLCJib29rIiwiYm9va0NvbnRhaW5lciIsImluaXQiLCJoIiwidyIsIm1hcmdpblkiLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJpbm5lckhlaWdodCIsIldlYkJvb2siLCJoZWlnaHQiLCJtYXhXaWR0aCIsInN0eWxlIiwibWF4SGVpZ2h0IiwiZXZlbnQiLCJzZXRIZWlnaHQiLCJzZXRNYXhXaWR0aCIsInNldE1hcmdpblkiLCJ0b0Jvb2siLCJIYW1tZXIiLCJvbiIsInR5cGUiLCJmb3J3YXJkIiwic3dpcGVDb250YWluZXIiLCJiYWNrd2FyZCIsIndoaWNoIiwidG9MYXN0UGFnZSIsImZvcndhcmRMYXJnZSIsImJhY2t3YXJkTGFyZ2UiLCJ0b2MiLCJvcGVuVG9jIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTmFtZSIsInRvY0xpbmtzIiwiaSIsImxlbmd0aCIsInRvY0xhcmdlIiwic3dpbmdDb250YWluZXIiLCJzd2luZ0JhciIsInJlcGxhY2UiLCJ1cmwiLCJvcHRpb25zIiwiYWpheCIsInJlc3BvbnNlIiwibWV0YSIsIkpTT04iLCJiaW5kIiwibWV0aG9kIiwicGF0aCIsImNyZWF0ZUVsZW1lbnQiLCJkaXYiLCJpbm5lckhUTUwiLCJ0ZXh0Iiwicm9vdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvbWlzZSIsInhtbGh0dHAiLCJkYXRhIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwidGVtcGxhdGUiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJsaW5rcyIsImhyZWYiLCJpZCIsImVsZW1lbnRzIiwic2VsZWN0b3IiLCJjb250ZW50IiwicmVwZWF0IiwiYXJyYXkiLCJycGMiLCJicmFja2V0cyIsInByb3BzIiwiaXRlbSIsImluZGV4IiwibmV3Q29udGVudCIsImJyYWNrZXQiLCJwYXR0ZXJuIiwiUmVnRXhwIiwicHJvcCIsImVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJqIiwidHJpbSIsImVsIiwibm9kZU5hbWUiLCJycHQiLCJwYXJlbnRFbGVtZW50IiwiaW5zZXJ0QmVmb3JlIiwicHVzaCIsIm5hbWUiLCJoaWRlIiwiZGlzcGxheSJdLCJtYXBwaW5ncyI6ImFBRUNBLE9BQUFDLGlCQUFBLGFBQUEsV0FHSUMsU0FBU0MsS0FBS0MsTUFBTSx1QkFEeEJKLE9BQU9DLFdBQWlCLEtBQ3ZCSSxNQUFHSCxTQUFBLGVBQW9CLFVBRXJCRyxNQUFBQSxTQUFBLE9BQWUsVUFFaEJBLE1BQU1DLFlBQVMsZUFBZixVQUVBRCxNQUFNRSxZQUFZLE9BQUEsUUFHbEJGLE1BQU1HLFFBQVEsYUFBYyxPQUE1QkgsR0FFREwsT0FBRUMsaUJBWkgsT0FBQSxTQUFBUSxHQWVJUCxTQUFTQyxLQUFLQyxNQUFNLHdCQUR4QkosT0FBT0MsV0FBaUIsS0FDdkJJLE1BQUdILFNBQUEsZUFBb0IsVUFFckJHLE1BQUFBLFNBQUEsT0FBZSxXQUVoQkEsR0FFREwsT0FBRUMsaUJBUEgsU0FBQSxXQVVJQyxTQUFTQyxLQUFLQyxNQUFNLHVCQUF5QkosT0FBT1UsV0FBYSxJQURyRVYsTUFBT0MsU0FBQUEsZUFBUCxVQUVFSSxNQUFNQyxZQUFTLGVBQWdCLFlBRS9CRDtjQzlCSCxXQUFZLEtB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LEVBRERBLEVBQWVJLFFBQVM1QyxFQUFRdUQsRUFBS0gsSUFJcENKLEVBQUFBLEdBQUFBLFVBQXFCNUMsSUFJdEJrQyxTQUFBQSxTQUFTdkMsRUFBR2lCLEdBT2IsSUFBSSxJQU5Ic0IsRUFBQWhGLFNBQUFzQyxpQkFBQTJDLEdBdEpXd0IsT0FBQUEsRUE0SkpoRSxFQUFFLEVBQUdBLEVBQUd1QyxFQUFTdEMsT0FBUUQsSUFIbENsRCxFQUFBQSxHQUVDLEdBREl5RixFQUFXaEYsR0FBQUEsVUFBU3NDLE1BQUFBLEtBQ3BCbUUsUUFBSkEsS0FBQXpCLEVBQVVJLEdBQUFBLFdBQVYsSUFBQTdDLElBS0V5QyxZQUFBLFNBQUFDLEVBQUExQyxHQWhLVSxJQUFBLElBaUtWeUMsRUFBQWhGLFNBQUFzQyxpQkFBQTJDLEdBaktVeEMsRUFBQSxFQUFBQSxFQUFBdUMsRUFBQXRDLE9BQUFELElBQUEsQ0F5S0pGLEVBSlQvQyxJQUFBQSxFQUFhLElBQUFxRyxPQUFBdEQsRUFBQzBDLEtBQ2JELEVBQUlBLEdBQUFBLFVBQW9CMUMsRUFBQUEsR0FBQUEsVUFBaUIyQyxRQUF6Q1csRUFBQSxNQUlDYyxLQUFJZCxTQUFBQSxHQUVKLElBQUEsSUFEQVosRUFBWXpDLFNBQVpELGlCQUFvQ0MsR0FDcENFLEVBQUEsRUFBQUEsRUFBQXVDLEVBQUF0QyxPQUFBRCxJQTVLV3VDLEVBQUF2QyxHQUFBdEIsTUFBQXdGLFFBQUEiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9pbmRleC5qc1xuKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcblx0XHRpZihsb2NhdGlvbi5oYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSkge1xuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdFx0dXRpbHMuYWRkQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0XHR9XG5cdFx0XHR1dGlscy5hZGRDbGFzcygnYm9keScsICdib29rJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHV0aWxzLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0XG5cdFx0XHR1dGlscy5yZW1vdmVDbGFzcygnYm9keScsICdib29rJyk7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvcC10aXRsZVwiLCBcIlwiKTtcblx0XHR9XG5cdH0sIGZhbHNlKTtcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKGUpID0+IHtcblx0XHRpZihsb2NhdGlvbi5oYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSkge1xuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdFx0dXRpbHMuYWRkQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0XHR9XG5cdFx0XHR1dGlscy5hZGRDbGFzcygnYm9keScsICdib29rJyk7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHR1dGlscy5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dXRpbHMucmVtb3ZlQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxufSkoKTtcbiIsIi8vcm91dGVzLmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0aWYobG9jYXRpb24uaGFzaCA9PT0gXCJcIikgeyBsb2NhdGlvbi5oYXNoID0gXCIjL1wiOyB9XG5cdFxuXHRsZXQgb2xkaGFzaCwgbmV3aGFzaDtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0XHRcdG5ld2hhc2ggPSBsb2NhdGlvbi5oYXNoO1xuXHRcdFx0cm91dGVyKG9sZGhhc2gsIG5ld2hhc2gpO1xuXHRcdFx0Ly9hY3RpdmUgbGlua1xuXHRcdFx0dXRpbHMuYWN0aXZlTGluaygpO1xuXHRcdH0sIGZhbHNlKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcblx0XHRcdG9sZGhhc2ggPSBuZXdoYXNoO1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0XHQvL2FjdGl2ZSBsaW5rXG5cdFx0XHR1dGlscy5hY3RpdmVMaW5rKCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cblx0bGV0IHJvdXRlciA9IChvbGRoYXNoLCBuZXdoYXNoKSA9PiB7XG5cdFx0XG5cdFx0dmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250YWluZXInKTtcblx0XHRcblx0XHQvL1JPVVRFU1xuXHRcdGlmKG5ld2hhc2ggPT09ICcjLycpIHtcblx0XHRcdC8vSE9NRVxuXHRcdFx0dXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvaG9tZS9ob21lLmh0bWwnLCBjb250YWluZXIsIGhvbWUpXG5cdFx0XHQudGhlbiggY29udHJvbGxlciA9PiB7IGNvbnRyb2xsZXIoKTsgfSk7XG5cdFx0XG5cdFx0IH0gZWxzZSBpZihuZXdoYXNoLm1hdGNoKC8jXFwvYm9va3NcXC8uK1teXFwvXSQvKSkge1xuXHRcdFx0IC8vQk9PS1xuXHRcdFx0IHV0aWxzLmdldEZyYWdtZW50KCcvZnJhZ21lbnRzL2Jvb2svYm9vay5odG1sJywgY29udGFpbmVyLCBib29rKVxuXHRcdFx0IC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9GQUxMQkFDS1xuXHRcdFx0bG9jYXRpb24uaGFzaCA9ICcjLyc7XG5cdFx0fVxuXHRcdFxuXHR9O1xuXG59KSgpO1xuIiwiLy9ib29rLmpzXG5jb25zdCBib29rID0gZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vcm9vdEVsZW1lbnRcblx0Y29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaG9tZS5jb250ZW50XCIpO1xuXG5cdGNvbnN0IGJvb2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9va0NvbnRhaW5lcicpO1xuXHRcblx0bGV0IGluaXQgPSBmdW5jdGlvbigpIHtcblx0XHQvL0RJTUVOU0lPTlNcblx0XHRsZXQgaCwgdywgbWFyZ2luWSwgZm9udFNpemUsIGxpbmVIZWlnaHQ7XG5cdFx0XG5cdFx0Ly93aWR0aCAocmVzcG9uc2l2ZSlcblx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcblx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQtODgtNjA7Ly9uYXZCYXJzIGhlaWdodCAqMiAoMio0NCkgKyB0ZXh0Q29udGFpbmVyIHRvcCAqIDIgKDIqMzApXG5cdFx0XHR3ID0gNjQwO1xuXHRcdFx0Zm9udFNpemUgPSAxNjtcblx0XHQgfSBlbHNlIHtcblx0XHRcdCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdCBmb250U2l6ZSA9IDE0O1xuXHRcdCB9XG5cdFx0IFxuXHRcdCAvL21hcmdpblkgaXMgcmVsYXRpdmUgdG8gbGluZS1oZWlnaHRcblx0XHQgbGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHQgbWFyZ2luWSA9IGglbGluZUhlaWdodCE9PTAgPyBsaW5lSGVpZ2h0KjIrKChoJWxpbmVIZWlnaHQpLzIpIDogbGluZUhlaWdodCozO1xuXHRcdFxuXHRcdC8vbmV3IEJvb2tcblx0XHRsZXQgYm9vayA9IG5ldyBXZWJCb29rKGJvb2tDb250YWluZXIsIHtcblx0XHRcdCBoZWlnaHQ6IGgsXG5cdFx0XHQgbWF4V2lkdGg6IHcsXG5cdFx0XHQgbWFyZ2luWTogNDV9KTtcblx0XHRcblx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHQvL1RvYy1sYXJnZSBoZWlnaHRcblx0XHRcdGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcihcIiN0b2MtbGFyZ2UtZGV2aWNlIGRpdlwiKS5zdHlsZS5tYXhIZWlnaHQgPSBoLTMwICsgXCJweFwiO1xuXHRcdH1cblx0XHRcdFx0XHRcdCBcblx0XHQvL29uIHJlc2l6ZVxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBldmVudCA9PiB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcblx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodC04OC02MDtcblx0XHRcdFx0dyA9IDY0MDtcblx0XHRcdFx0Zm9udFNpemUgPSAxNjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0XHRcdHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdFx0Zm9udFNpemUgPSAxNDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gMTM2Nikge1xuXHRcdFx0XHQvL1RvYy1sYXJnZSBoZWlnaHRcblx0XHRcdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3RvYy1sYXJnZS1kZXZpY2UgZGl2XCIpLnN0eWxlLm1heEhlaWdodCA9IGgtMzAgKyBcInB4XCI7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vbWFyZ2luWSBpcyByZWxhdGl2ZSB0byBsaW5lLWhlaWdodFxuXHRcdFx0bGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHRcdG1hcmdpblkgPSBoJWxpbmVIZWlnaHQhPT0wID8gbGluZUhlaWdodCoyKygoaCVsaW5lSGVpZ2h0KS8yKSA6IGxpbmVIZWlnaHQqMztcblx0XHRcdFxuXHRcdFx0Ly9zZXQgbmV3IGRpbWVuc2lvbnNcblx0XHRcdGJvb2suc2V0SGVpZ2h0KGgpO1xuXHRcdFx0Ym9vay5zZXRNYXhXaWR0aCh3KTtcblx0XHRcdGJvb2suc2V0TWFyZ2luWShtYXJnaW5ZKTtcblx0XHRcdFxuXHRcdFx0aWYoYm9vay5jb2w9PT10cnVlKSB7XG5cdFx0XHRcdGJvb2sudG9Cb29rKCk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdFxuXHRcdC8vU1dJUEUgLSBmb3J3YXJkLCBiYWNrd2FyZCBvbiBzd2lwZSBsZWZ0IGFuZCByaWdodCAoaGFtbWVyLmpzKVxuXHRcdC8vIHNtYWxsIGRldmljZXNcblx0XHRsZXQgc3dpcGVDb250YWluZXIgPSBuZXcgSGFtbWVyKGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dC1jb250YWluZXJdJykpO1xuXHRcdHN3aXBlQ29udGFpbmVyLm9uKFwic3dpcGVyaWdodCBzd2lwZWxlZnRcIiwgZXZlbnQgPT4ge1xuXHRcdFx0aWYoZXZlbnQudHlwZT09PVwic3dpcGVsZWZ0XCIpIHtcblx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQudHlwZT09PVwic3dpcGVyaWdodFwiKSB7XG5cdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvL1RPVUNIRVMsIGZvcndhcmQsIGJhY2t3YXJkXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcblx0XHRcdGlmKGV2ZW50LndoaWNoPT09MzkgfHwgZXZlbnQud2hpY2g9PT0zNCkge1xuXHRcdFx0XHRcdGJvb2suZm9yd2FyZCgpO1xuXHRcdFx0fSBlbHNlIGlmKGV2ZW50LndoaWNoPT09MzcgfHwgZXZlbnQud2hpY2g9PT0zMykge1xuXHRcdFx0XHRib29rLmJhY2t3YXJkKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNikge1xuXHRcdFx0XHRib29rLnRvRmlyc3RQYWdlKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNSkge1xuXHRcdFx0XHRib29rLnRvTGFzdFBhZ2UoKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0XHRcblx0XHQvL0JVVFRPTlNcblx0XHQvL2xhcmdlXG5cdFx0bGV0IGZvcndhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2ZvcndhcmQtbGFyZ2UnKTtcblx0XHRsZXQgYmFja3dhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2JhY2t3YXJkLWxhcmdlJyk7XG5cdFx0XG5cdFx0Zm9yd2FyZExhcmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdFx0YmFja3dhcmRMYXJnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0XG5cdFx0Ly9UT0NcdFx0XG5cdFx0bGV0IHRvYyA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvYycpO1xuXHRcdGxldCBvcGVuVG9jID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcub3Blbi10b2MnKTtcblx0XHRcblx0XHRmb3IobGV0IGk9MDsgaTxvcGVuVG9jLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRvcGVuVG9jW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHR0b2MuY2xhc3NOYW1lID0gdG9jLmNsYXNzTmFtZSA9PT0gXCJvcGVuXCIgPyBcIlwiIDogXCJvcGVuXCI7XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0fVxuXHRcdFxuXHRcdHRvYy5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLXRvY1wiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHQvL0Nsb3NlIHRvYyBvbiBjbGlja1xuXHRcdGxldCB0b2NMaW5rcyA9IHRvYy5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG5cdFx0Zm9yKGxldCBpPTA7IGk8dG9jTGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRvY0xpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0b2MuY2xhc3NOYW1lID0gXCJcIjtcblx0XHRcdH0sIGZhbHNlKTtcblx0XHR9XG5cdFx0XG5cdFx0XG5cdFx0Ly9UT0MtTEFSR0UtREVWSUNFXG5cdFx0bGV0IHRvY0xhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9jLWxhcmdlLWRldmljZScpO1xuXHRcdGxldCBzd2luZ0NvbnRhaW5lciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWNvbnRhaW5lcicpO1xuXHRcdGxldCBzd2luZ0JhciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWJhcicpO1xuXHRcdC8vVG9nZ2xlIHRvYy1sYXJnZS1kZXZpY2UsIHN3aW5nLWNvbnRhaW5lciwgc3dpbmctYmFyXG5cdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9nZ2xlLXRvYy1sYXJnZS1kZXZpY2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdGlmKCF0b2NMYXJnZS5jbGFzc05hbWUubWF0Y2goL29wZW4vKSkge1xuXHRcdFx0XHR0b2NMYXJnZS5jbGFzc05hbWUgKz0gXCIgb3BlblwiO1xuXHRcdFx0XHRzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0XHRzd2luZ0Jhci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG9jTGFyZ2UuY2xhc3NOYW1lID0gdG9jTGFyZ2UuY2xhc3NOYW1lLnJlcGxhY2UoLyBvcGVuLywnJyk7XG5cdFx0XHRcdHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0XHRzd2luZ0Jhci5jbGFzc05hbWUgPSBzd2luZ0NvbnRhaW5lci5jbGFzc05hbWUucmVwbGFjZSgvIGxlZnQvLCcnKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0Ly9lbmQgbG9hZGVyXG5cdFx0Ym9va0NvbnRhaW5lci5jbGFzc05hbWUgPSAnc2hvdyc7XG5cdFxuXHR9XG5cdFxuXHRsZXQgdXJsID0gbG9jYXRpb24uaGFzaC5yZXBsYWNlKC8jLywnJyk7XG5cdGxldCBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHVybCB9O1xuXHRsZXQgdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XG5cdHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdGxldCBtZXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSkuYm9vaztcblx0XHR1dGlscy5iaW5kKG1ldGEpO1xuXHRcdHJldHVybiB1dGlscy5hamF4KHsgbWV0aG9kOiAnR0VUJywgdXJsOiBtZXRhLnBhdGggKyAnLmh0bWwnIH0pXG5cdH0pLnRoZW4oIGJvb2sgPT4ge1xuXHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRkaXYuaW5uZXJIVE1MID0gYm9vaztcblx0XHR0ZXh0LmFwcGVuZENoaWxkKGRpdik7XG5cdFx0aW5pdCgpO1xuXHR9KVxuXHRcblxufTtcbiIsIi8vaG9tZS5qc1xuY29uc3QgaG9tZSA9IGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdC8vcm9vdEVsZW1lbnRcblx0Y29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaG9tZS5jb250ZW50XCIpO1xuXHQvL2dldCBib29rc1xuXHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnL2Jvb2tzLycgfTtcblx0dXRpbHMuYWpheChvcHRpb25zKVxuXHQudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdGxldCBib29rcyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuXHRcdHV0aWxzLnJlcGVhdChib29rcyk7XG5cdH0pO1xuXHRcbn07XG5cbiIsIi8vdXRpbHMuanNcbmNvbnN0IHV0aWxzID0ge1xuXHQvL0FKQVggcmVxdWVzdHNcblx0YWpheDogb3B0aW9ucyA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoIChyZXNvbHZlLHJlamVjdCkgPT4ge1xuXHRcdFx0bGV0IG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kO1xuXHRcdFx0bGV0IHVybCA9IG9wdGlvbnMudXJsO1xuXHRcdFx0bGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG5cdFx0XHRsZXQgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0eG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRcdGlmKHhtbGh0dHAucmVhZHlTdGF0ZT09PTQpIHtcblx0XHRcdFx0XHRpZih4bWxodHRwLnN0YXR1cz09PTIwMCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChFcnJvcih4bWxodHRwLnN0YXR1c1RleHQpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0eG1saHR0cC5vcGVuKG1ldGhvZCx1cmwsdHJ1ZSk7XG5cdFx0XHR4bWxodHRwLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXHRcdFx0aWYoZGF0YSkge1xuXHRcdFx0XHR4bWxodHRwLnNlbmQoZGF0YSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR4bWxodHRwLnNlbmQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fSxcblx0XHRcblx0Ly9nZXQgSFRNTCBmcmFnbWVudCwgY29udGFpbmVyLCBjb250cm9sbGVyXHRcblx0Z2V0RnJhZ21lbnQ6ICh0ZW1wbGF0ZSwgY29udGFpbmVyLCBjb250cm9sbGVyKSA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGlmKGNvbnRhaW5lci5jaGlsZE5vZGVzWzBdKSB7XG5cdFx0XHRjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmNoaWxkTm9kZXNbMF0pO1xuXHRcdH1cblx0XHQvL2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdGxldCBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHRlbXBsYXRlIH1cblx0XHRyZXR1cm4gdXRpbHMuYWpheChvcHRpb25zKS50aGVuKCByZXNwb25zZSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IHJlc3BvbnNlO1xuXHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcblx0XHRcdFx0cmVzb2x2ZShjb250cm9sbGVyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9LFxuXHRcblx0Ly9hY3RpdmUgbGluayA6IGNoYW5nZSBjbGFzc1xuXHRhY3RpdmVMaW5rOiAoKSA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGxldCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYXYtYmFyLXRvcFwiKTtcblx0XHRsZXQgbGlua3MgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCJhXCIpO1xuXHRcdGZvcihsZXQgaT0wOyBpPGxpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZihsb2NhdGlvbi5ocmVmPT09bGlua3NbaV0uaHJlZikge1xuXHRcdFx0XHR1dGlscy5hZGRDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtYmxhY2tcIik7XG5cdFx0XHRcdHV0aWxzLnJlbW92ZUNsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ncmF5XCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dXRpbHMuYWRkQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWdyYXlcIik7XG5cdFx0XHRcdHV0aWxzLnJlbW92ZUNsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ibGFja1wiKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdFxuXHRzZXRIVE1MOiAoc2VsZWN0b3IsY29udGVudCkgPT4ge1xuXHRcdGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXHRcdGZvcihsZXQgaT0wOyBpPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZWxlbWVudHNbaV0uaW5uZXJIVE1MID0gY29udGVudDtcblx0XHR9XG5cdH0sXG5cdFxuXHRyZXBlYXQ6IChhcnJheSkgPT4ge1xuXHRcdC8vcmVwbGFjZSBlYWNoIHByb3Agb2YgYXJyYXkgaXRlbVxuXHRcdGxldCBycGMgPSAoY29udGVudCxicmFja2V0cyxwcm9wcyxpdGVtLGluZGV4KSA9PiB7XG5cdFx0XHRpZihwcm9wcy5sZW5ndGg9PT0wKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdFx0bGV0IG5ld0NvbnRlbnQgPSAnJztcblx0XHRcdGZvcihsZXQgaT0wOyBpPHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxldCBwcm9wID0gcHJvcHNbaV07XG5cdFx0XHRcdGxldCBicmFja2V0ID0gYnJhY2tldHNbaV07XG5cdFx0XHRcdGxldCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChicmFja2V0LCBcImdcIik7XG5cdFx0XHRcdGlmKHByb3A9PT0nI2l0ZW0nKSB7XG5cdFx0XHRcdFx0bmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZShwYXR0ZXJuLGl0ZW0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHByb3A9PT0nI2luZGV4Jykge1xuXHRcdFx0XHRcdG5ld0NvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocGF0dGVybixpbmRleCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZShwYXR0ZXJuLGl0ZW1bcHJvcF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRlbnQgPSBuZXdDb250ZW50O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ld0NvbnRlbnQ7XG5cdFx0fVxuXHRcdFxuXHRcdC8vcmVwZWF0IGZvciBlYWNoIGl0ZW0gb2YgYXJyYXlcblx0XHRsZXQgcnB0ID0gKGVsZW1lbnQsY29udGVudCxhcnJheSxicmFja2V0cyxwcm9wcykgPT4ge1xuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTxhcnJheS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRsZXQgbmV3Q29udGVudCA9IHJwYyhjb250ZW50LGJyYWNrZXRzLHByb3BzLGFycmF5W2ldLGkpXG5cdFx0XHRcdGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudC5ub2RlTmFtZSk7XG5cdFx0XHRcdGVsLmlubmVySFRNTCA9IG5ld0NvbnRlbnQ7XG5cdFx0XHRcdGVsZW1lbnQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsZWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vcmVtb3ZlIGVsZW1lbnRcblx0XHRcdGVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50KTtcblx0XHR9XG5cdFx0Ly9nZXQgdGVtcGxhdGUgYW5kIHByb3BzIGZvciBlYWNoIHJlcGVhdCBlbGVtZW50XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtamluLXJlcGVhdF0nKTtcblx0XHRmb3IobGV0IGk9MDsgaTwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBicmFja2V0cyA9IFtdO1xuXHRcdFx0bGV0IHByb3BzID0gW107XG5cdFx0XHRsZXQgY29udGVudCA9IGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1qaW4tcmVwZWF0Jyk7XG5cdFx0XHRcblx0XHRcdGlmKGNvbnRlbnQubWF0Y2goL3t7W157XSt9fS9nKSkge1xuXHRcdFx0XHRicmFja2V0cyA9IGNvbnRlbnQubWF0Y2goL3t7W157XSt9fS9nKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBqPTA7IGo8YnJhY2tldHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cHJvcHMucHVzaChicmFja2V0c1tqXS5yZXBsYWNlKC8oe3x9KS9nLCcnKS50cmltKCkpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRycHQoZWxlbWVudHNbaV0sY29udGVudCxhcnJheSxicmFja2V0cyxwcm9wcyk7XG5cdFx0XHRcblx0XHR9XG5cdH0sXG5cdFxuXHRiaW5kOiAob2JqZWN0KSA9PiB7XG5cdFx0bGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtamluLWJpbmRdJyk7XG5cdFx0Ly9nZXQgdGVtcGxhdGUgYW5kIHByb3BzIGZvciBlYWNoIHJlcGVhdCBlbGVtZW50XG5cdFx0Zm9yKGxldCBpPTA7IGk8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgYnJhY2tldHMgPSBbXTtcblx0XHRcdGxldCBwcm9wcyA9IFtdO1xuXHRcdFx0bGV0IGNvbnRlbnQgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtamluLWJpbmQnKTtcblx0XHRcdGxldCBuZXdDb250ZW50ID0gJyc7XG5cdFx0XHRcblx0XHRcdGlmKGNvbnRlbnQubWF0Y2goL3t7W157XSt9fS9nKSkge1xuXHRcdFx0XHRicmFja2V0cyA9IGNvbnRlbnQubWF0Y2goL3t7W157XSt9fS9nKTtcblx0XHRcdH1cblx0XHRcdC8vcmVwbGFjZSBlYWNoIGJyYWNrZXQgb2YgZWxlbWVudFxuXHRcdFx0Zm9yKGxldCBqPTA7IGo8YnJhY2tldHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0bGV0IHByb3AgPSBicmFja2V0c1tqXS5yZXBsYWNlKC8oe3x9KS9nLCcnKS50cmltKCk7XG5cdFx0XHRcdHByb3BzLnB1c2gocHJvcCk7XG5cdFx0XHRcdGxldCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChicmFja2V0c1tqXSwgJ2cnKTtcblx0XHRcdFx0bmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZShwYXR0ZXJuLG9iamVjdFtwcm9wXSk7XG5cdFx0XHRcdGNvbnRlbnQgPSBuZXdDb250ZW50O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRlbGVtZW50c1tpXS5pbm5lckhUTUwgPSBjb250ZW50O1xuXHRcdH1cblx0fSxcblx0XG5cdGFkZENsYXNzOiAoc2VsZWN0b3IsIGNsYXNzTmFtZSkgPT4ge1xuXHRcdGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXHRcdGxldCBuYW1lLCBhcnJheVxuXHRcdGZvcihsZXQgaT0wOyBpPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bmFtZSA9IGNsYXNzTmFtZTtcblx0XHRcdGFycmF5ID0gZWxlbWVudHNbaV0uY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcblx0XHRcdGlmIChhcnJheS5pbmRleE9mKG5hbWUpID09IC0xKSB7XG5cdFx0XHRcdGVsZW1lbnRzW2ldLmNsYXNzTmFtZSArPSBcIiBcIiArIGNsYXNzTmFtZTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdFxuXHRyZW1vdmVDbGFzczogKHNlbGVjdG9yLCBjbGFzc05hbWUpID0+IHtcblx0XHRsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblx0XHRsZXQgbmFtZTtcblx0XHRmb3IobGV0IGk9MDsgaTwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG5hbWUgPSBjbGFzc05hbWU7XG5cdFx0XHRsZXQgcGF0dGVybiA9IG5ldyBSZWdFeHAoY2xhc3NOYW1lLCAnZycpO1xuXHRcdFx0ZWxlbWVudHNbaV0uY2xhc3NOYW1lID0gZWxlbWVudHNbaV0uY2xhc3NOYW1lLnJlcGxhY2UocGF0dGVybiwgXCJcIik7XG5cdFx0fVxuXHR9LFxuXHRcdFxuXHRoaWRlOiAoc2VsZWN0b3IpID0+IHtcblx0XHRsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcblx0XHRmb3IobGV0IGk9MDsgaTwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGVsZW1lbnRzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0fVxuXHR9XG59XG4iXX0=
