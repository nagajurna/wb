"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden"),document.querySelector("body").className="book"):(w3.removeClass("#nav-bar-top","hidden"),document.querySelector("body").className="",utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(n){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden")},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?w3.addClass("#nav-bar-top","hidden"):w3.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n)},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n)},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/",utils.activeLink()}}();
"use strict";var home=function(){document.querySelector("#home.content");w3.hide("#books-list");utils.ajax({method:"GET",url:"/books"}).then(function(o){var t=JSON.parse(o);w3.displayObject("books-list",t),w3.show("#books-list")})};
"use strict";var book=function(){var e=document.querySelector("#bookContainer"),t=function(){var t,i,n,a,r;window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,a=16):(t=window.innerHeight,i=window.innerWidth,a=14),n=t%(r=1.5*a)!=0?2*r+t%r/2:3*r;var c=new WebBook(e,{height:t,maxWidth:i,marginY:45});window.innerWidth>=1366&&(document.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(e){window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,a=16):(t=window.innerHeight,i=window.innerWidth,a=14),window.innerWidth>=1366&&(document.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),n=t%(r=1.5*a)!=0?2*r+t%r/2:3*r,c.setHeight(t),c.setMaxWidth(i),c.setMarginY(n),!0===c.col&&c.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?c.forward():"swiperight"===e.type&&c.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?c.forward():37===e.which||33===e.which?c.backward():36===e.which?c.toFirstPage():35===e.which&&c.toLastPage()},!1);var o=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");o.addEventListener("click",function(e){c.forward()},!1),l.addEventListener("click",function(e){c.backward()},!1);for(var s=e.querySelector("#toc"),d=e.querySelectorAll(".open-toc"),h=0;h<d.length;h++)d[h].addEventListener("click",function(e){s.className="open"===s.className?"":"open"},!1);s.querySelector("#close-toc").addEventListener("click",function(){s.className=""},!1);for(var w=s.querySelectorAll("a"),h=0;h<w.length;h++)w[h].addEventListener("click",function(){s.className=""},!1);var u=e.querySelector("#toc-large-device"),m=e.querySelector("#swing-container"),p=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){u.className.match(/open/)?(u.className=u.className.replace(/ open/,""),m.className=m.className.replace(/ left/,""),p.className=m.className.replace(/ left/,"")):(u.className+=" open",m.className+=" left",p.className+=" left")},!1),e.className="show"},i={method:"GET",url:location.hash.replace(/#/,"")},n=e.querySelector("[data-wb-text]");utils.ajax(i).then(function(e){var t=JSON.parse(e).book,i=t.author+"&ensp;&mdash;&ensp;"+t.title;return utils.setHTML("#top-title",i),utils.setHTML("#toc-title p:nth-child(1)",t.author),utils.setHTML("#toc-title p:nth-child(2)",t.title),utils.setHTML("#toc-large-device p:nth-child(1)",t.author),utils.setHTML("#toc-large-device p:nth-child(2)",t.title),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var i=document.createElement("div");i.innerHTML=e,n.appendChild(i),t()})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,n){var a=e.method,r=e.url,s=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):n(Error(o.statusText)))},o.open(a,r,!0),o.setRequestHeader("Content-type","application/json"),s?o.send(s):o.send()})},getFragment:function(e,t,n){var a={method:"GET",url:e};return utils.ajax(a).then(function(e){return new Promise(function(a){t.innerHTML=e,a(n)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(w3.addClass("#"+e[t].id,"w3-text-black"),w3.removeClass("#"+e[t].id,"w3-text-gray")):(w3.addClass("#"+e[t].id,"w3-text-gray"),w3.removeClass("#"+e[t].id,"w3-text-black")),location.hash.match(/#\/admin/)&&(e[t].href.match(/#\/admin/)?e[t].className="clicked":e[t].className="")},setHTML:function(e,t){document.querySelector(e).innerHTML=t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiaG9tZS9ob21lLmpzIiwiYm9vay9ib29rLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidzMiLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbW92ZUNsYXNzIiwidXRpbHMiLCJlIiwiaW5uZXJXaWR0aCIsIm9sZGhhc2giLCJuZXdoYXNoIiwicm91dGVyIiwiY29udGFpbmVyIiwiaG9tZSIsInRoZW4iLCJjb250cm9sbGVyIiwiZ2V0RnJhZ21lbnQiLCJhY3RpdmVMaW5rIiwiaGlkZSIsInJlc3BvbnNlIiwib3B0aW9ucyIsIm1ldGhvZCIsImJvb2tzIiwic2hvdyIsImJvb2siLCJib29rQ29udGFpbmVyIiwiaW5pdCIsImgiLCJ3IiwibWFyZ2luWSIsImZvbnRTaXplIiwibGluZUhlaWdodCIsImlubmVySGVpZ2h0IiwiV2ViQm9vayIsImhlaWdodCIsIm1heFdpZHRoIiwic3R5bGUiLCJtYXhIZWlnaHQiLCJldmVudCIsInNldEhlaWdodCIsInNldE1heFdpZHRoIiwic2V0TWFyZ2luWSIsImNvbCIsInRvQm9vayIsIkhhbW1lciIsIm9uIiwidHlwZSIsImJhY2t3YXJkIiwiZm9yd2FyZCIsIndoaWNoIiwidG9GaXJzdFBhZ2UiLCJ0b0xhc3RQYWdlIiwiZm9yd2FyZExhcmdlIiwiYmFja3dhcmRMYXJnZSIsInRvYyIsIm9wZW5Ub2MiLCJpIiwibGVuZ3RoIiwidG9jTGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwidG9jTGFyZ2UiLCJzd2luZ0NvbnRhaW5lciIsInJlcGxhY2UiLCJzd2luZ0JhciIsImNvbnRlbnQiLCJhdXRob3IiLCJzZXRIVE1MIiwicGFyc2UiLCJhamF4IiwibWV0YSIsInRpdGxlIiwiZGl2IiwiaW5uZXJIVE1MIiwidGV4dCIsImFwcGVuZENoaWxkIiwidXJsIiwicGF0aCIsImNyZWF0ZUVsZW1lbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInByb21pc2UiLCJ4bWxodHRwIiwiZGF0YSIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInRlbXBsYXRlIiwibGlua3MiLCJocmVmIiwiaWQiLCJyb290Iiwic2VsZWN0b3IiXSwibWFwcGluZ3MiOiJhQUVDQSxPQUFBQyxpQkFBQSxhQUFBLFdBR0lDLFNBQVNDLEtBQUtDLE1BQU0sdUJBRHhCSixPQUFPQyxXQUFpQixLQUN2QkksR0FBR0gsU0FBU0MsZUFBVyxVQUVyQkUsU0FBR0MsY0FBUyxRQUFnQkMsVUFBNUIsU0FFREMsR0FBQUEsWUFBU0MsZUFBc0JGLFVBSmhDQyxTQUtPQyxjQUFBLFFBQUFGLFVBQUEsR0FDTkYsTUFBR0ssUUFBSCxhQUFlLE9BRWZDLEdBRURYLE9BQUVDLGlCQVhILE9BQUEsU0FBQVcsR0FjSVYsU0FBU0MsS0FBS0MsTUFBTSx1QkFBeUJKLE9BQU9hLFdBQWEsS0FEckViLEdBQUFBLFNBQU9DLGVBQVAsWUFJRSxHQUdGRCxPQUFPQyxpQkFBaUIsU0FBVSxXQUFsQ0QsU0FBT0MsS0FBQUEsTUFBaUIsdUJBQWdCRCxPQUFBYSxXQUFBLElBQ3ZDUixHQUFHSCxTQUFTQyxlQUFXLFVBQXZCRSxHQUFBSyxZQUVPLGVBQUEsWUFFTjtjQzVCSCxXQUFZLEtBQVhSLFNBQVdDLE9BQUFELFNBQUFDLEtBQUEsTUFJWCxJQUFJVyxPQUFBQSxFQUFTQyxPQUFBQSxFQUZjYixPQUFBQSxpQkFBQSxtQkFBQSxXQUF1QmEsRUFBQWIsU0FBQUMsS0FNaERhLEVBQU9GLEVBQVNDLEtBSmRELEdBT0pkLE9BQU9DLGlCQUFpQixhQUFjLFdBTHRDRCxFQUFPQyxFQUNMYyxFQUFVYixTQUFTQyxLQUNuQmEsRUFBT0YsRUFBU0MsS0FDZCxHQUdGRCxJQUFBQSxFQUFV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QVl1QyxFQUFBb0MsRUFBQW5DLE9BQUFELElBQ1gzRCxTQUFBZ0csT0FBQUQsRUFBQXBDLEdBQUFxQyxNQUtFN0YsR0FBR0MsU0FBUyxJQUFNMkYsRUFBTXBDLEdBQUdzQyxHQUFJLGlCQUpqQzlGLEdBQUkrRixZQUFPNUYsSUFBU0MsRUFBQUEsR0FBQUEsR0FBYyxrQkFFbENKLEdBQUlDLFNBQUosSUFBZTJGLEVBQU1uQyxHQUFBQSxHQUFyQixnQkFDQ3pELEdBQUdILFlBQVNnRyxJQUFPRCxFQUFNcEMsR0FBR3FDLEdBQTVCLGtCQUFBaEcsU0FHT0MsS0FBQUMsTUFBQSxjQUNIRSxFQUFBQSxHQUFTNEYsS0FBQTlGLE1BQU02RixZQUNsQjVGLEVBQUdLLEdBQUFBLFVBQWtCdUYsVUFPcEJBLEVBQU1wQyxHQUFHdEQsVUFBWSxLQUNyQmdFLFFBQUEsU0FBQThCLEVBQUFoQyxHQUNEN0QsU0FBQUMsY0FBQTRGLEdBQUF4QixVQUFBUiIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2luZGV4LmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc05hbWU9XCJib29rXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTmFtZT1cIlwiO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgXCJcIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykgJiYgd2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdHczLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dzMucmVtb3ZlQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHQvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHQvL2lmKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMTAgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIikuc2Nyb2xsVG9wID4gMTApIHtcblx0XHRcdC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1iYXItdG9wJykuY2xhc3NOYW1lID0gJ3Njcm9sbGVkJztcblx0XHQvL30gZWxzZSB7XG5cdFx0XHQvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXYtYmFyLXRvcCcpLmNsYXNzTmFtZSA9ICcnO1xuXHRcdC8vfVxuXHQvL30sIGZhbHNlKTtcblx0XG59KSgpO1xuIiwiLy9yb3V0ZXMuanNcbihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZihsb2NhdGlvbi5oYXNoID09PSBcIlwiKSB7IGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7IH1cblx0XG5cdGxldCBvbGRoYXNoLCBuZXdoYXNoO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0b2xkaGFzaCA9IG5ld2hhc2g7XG5cdFx0XHRuZXdoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0XHRcdHJvdXRlcihvbGRoYXNoLCBuZXdoYXNoKTtcblx0XHR9LCBmYWxzZSk7XG5cblxuXHRsZXQgcm91dGVyID0gKG9sZGhhc2gsIG5ld2hhc2gpID0+IHtcblx0XHRcblx0XHR2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdC8vUk9VVEVTXG5cdFx0aWYobmV3aGFzaCA9PT0gJyMvJykge1xuXHRcdFx0Ly9IT01FXG5cdFx0XHR1dGlscy5nZXRGcmFnbWVudCgnL2ZyYWdtZW50cy9ob21lL2hvbWUuaHRtbCcsIGNvbnRhaW5lciwgaG9tZSlcblx0XHRcdC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHQgfSBlbHNlIGlmKG5ld2hhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHQgLy9CT09LXG5cdFx0XHQgdXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvYm9vay9ib29rLmh0bWwnLCBjb250YWluZXIsIGJvb2spXG5cdFx0XHQgLnRoZW4oIGNvbnRyb2xsZXIgPT4geyBjb250cm9sbGVyKCk7IH0pO1xuXHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL0ZBTExCQUNLXG5cdFx0XHRsb2NhdGlvbi5oYXNoID0gJyMvJztcblx0XHR9XG5cdFx0XG5cdFx0Ly9hY3RpdmUgbGlua1xuXHRcdHV0aWxzLmFjdGl2ZUxpbmsoKTtcblx0fTtcblxufSkoKTtcbiIsIi8vaG9tZS5qc1xuY29uc3QgaG9tZSA9IGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdC8vcm9vdEVsZW1lbnRcblx0bGV0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWUuY29udGVudFwiKTtcblx0dzMuaGlkZShcIiNib29rcy1saXN0XCIpO1xuXHQvL2dldCBib29rc1xuXHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnL2Jvb2tzJyB9O1xuXHR1dGlscy5hamF4KG9wdGlvbnMpXG5cdC50aGVuKCByZXNwb25zZSA9PiB7XG5cdFx0bGV0IGJvb2tzID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG5cdFx0dzMuZGlzcGxheU9iamVjdCgnYm9va3MtbGlzdCcsIGJvb2tzKTtcblx0XHR3My5zaG93KFwiI2Jvb2tzLWxpc3RcIik7XG5cdH0pO1xuXG59O1xuXG4iLCIvL2Jvb2suanNcbmNvbnN0IGJvb2sgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0XG5cdFxuXHRcdHZhciBib29rQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Jvb2tDb250YWluZXInKTtcblx0XHRcblx0XHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9ESU1FTlNJT05TXG5cdFx0XHR2YXIgaCwgdywgbWFyZ2luWSwgZm9udFNpemUsIGxpbmVIZWlnaHQ7XG5cdFx0XHRcblx0XHRcdC8vd2lkdGggKHJlc3BvbnNpdmUpXG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjgpIHtcblx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodC04OC02MDsvL25hdkJhcnMgaGVpZ2h0ICoyICgyKjQ0KSArIHRleHRDb250YWluZXIgdG9wICogMiAoMiozMClcblx0XHRcdFx0dyA9IDY0MDtcblx0XHRcdFx0Zm9udFNpemUgPSAxNjtcblx0XHRcdCB9IGVsc2Uge1xuXHRcdFx0XHQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdFx0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdFx0IGZvbnRTaXplID0gMTQ7XG5cdFx0XHQgfVxuXHRcdFx0IFxuXHRcdFx0IC8vbWFyZ2luWSBpcyByZWxhdGl2ZSB0byBsaW5lLWhlaWdodFxuXHRcdFx0IGxpbmVIZWlnaHQgPSBmb250U2l6ZSoxLjU7XG5cdFx0XHQgbWFyZ2luWSA9IGglbGluZUhlaWdodCE9PTAgPyBsaW5lSGVpZ2h0KjIrKChoJWxpbmVIZWlnaHQpLzIpIDogbGluZUhlaWdodCozO1xuXHRcdFx0XG5cdFx0XHQvL25ldyBCb29rXG5cdFx0XHR2YXIgYm9vayA9IG5ldyBXZWJCb29rKGJvb2tDb250YWluZXIsIHtcblx0XHRcdFx0IGhlaWdodDogaCxcblx0XHRcdFx0IG1heFdpZHRoOiB3LFxuXHRcdFx0XHQgbWFyZ2luWTogNDV9KTtcblx0XHRcdFxuXHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gMTM2Nikge1xuXHRcdFx0XHQvL1RvYy1sYXJnZSBoZWlnaHRcblx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2MtbGFyZ2UtZGV2aWNlIGRpdlwiKS5zdHlsZS5tYXhIZWlnaHQgPSBoLTMwICsgXCJweFwiO1xuXHRcdFx0fVxuXHRcdFx0XHRcdFx0XHQgXG5cdFx0XHQvL29uIHJlc2l6ZVxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50ID0+IHtcblx0XHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gNzY4KSB7XG5cdFx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodC04OC02MDtcblx0XHRcdFx0XHR3ID0gNjQwO1xuXHRcdFx0XHRcdGZvbnRTaXplID0gMTY7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdFx0XHR3ID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0XHRcdFx0Zm9udFNpemUgPSAxNDtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYod2luZG93LmlubmVyV2lkdGggPj0gMTM2Nikge1xuXHRcdFx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9jLWxhcmdlLWRldmljZSBkaXZcIikuc3R5bGUubWF4SGVpZ2h0ID0gaC0zMCArIFwicHhcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0XHRcdGxpbmVIZWlnaHQgPSBmb250U2l6ZSoxLjU7XG5cdFx0XHRcdG1hcmdpblkgPSBoJWxpbmVIZWlnaHQhPT0wID8gbGluZUhlaWdodCoyKygoaCVsaW5lSGVpZ2h0KS8yKSA6IGxpbmVIZWlnaHQqMztcblx0XHRcdFx0XG5cdFx0XHRcdC8vc2V0IG5ldyBkaW1lbnNpb25zXG5cdFx0XHRcdGJvb2suc2V0SGVpZ2h0KGgpO1xuXHRcdFx0XHRib29rLnNldE1heFdpZHRoKHcpO1xuXHRcdFx0XHRib29rLnNldE1hcmdpblkobWFyZ2luWSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihib29rLmNvbD09PXRydWUpIHtcblx0XHRcdFx0XHRib29rLnRvQm9vaygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcblx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvL1NXSVBFIC0gZm9yd2FyZCwgYmFja3dhcmQgb24gc3dpcGUgbGVmdCBhbmQgcmlnaHQgKGhhbW1lci5qcylcblx0XHRcdC8vIHNtYWxsIGRldmljZXNcblx0XHRcdHZhciBzd2lwZUNvbnRhaW5lciA9IG5ldyBIYW1tZXIoYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS13Yi10ZXh0LWNvbnRhaW5lcl0nKSk7XG5cdFx0XHRzd2lwZUNvbnRhaW5lci5vbihcInN3aXBlcmlnaHQgc3dpcGVsZWZ0XCIsIGV2ZW50ID0+IHtcblx0XHRcdFx0aWYoZXZlbnQudHlwZT09PVwic3dpcGVsZWZ0XCIpIHtcblx0XHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdFx0fSBlbHNlIGlmKGV2ZW50LnR5cGU9PT1cInN3aXBlcmlnaHRcIikge1xuXHRcdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vVE9VQ0hFUywgZm9yd2FyZCwgYmFja3dhcmRcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG5cdFx0XHRcdGlmKGV2ZW50LndoaWNoPT09MzkgfHwgZXZlbnQud2hpY2g9PT0zNCkge1xuXHRcdFx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM3IHx8IGV2ZW50LndoaWNoPT09MzMpIHtcblx0XHRcdFx0XHRib29rLmJhY2t3YXJkKCk7XG5cdFx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM2KSB7XG5cdFx0XHRcdFx0Ym9vay50b0ZpcnN0UGFnZSgpO1xuXHRcdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNSkge1xuXHRcdFx0XHRcdGJvb2sudG9MYXN0UGFnZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdFx0XG5cdFx0XHQvL0JVVFRPTlNcblx0XHRcdC8vbGFyZ2Vcblx0XHRcdHZhciBmb3J3YXJkTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNmb3J3YXJkLWxhcmdlJyk7XG5cdFx0XHR2YXIgYmFja3dhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2JhY2t3YXJkLWxhcmdlJyk7XG5cdFx0XHRcblx0XHRcdGZvcndhcmRMYXJnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHR9LCBmYWxzZSk7XG5cblx0XHRcdGJhY2t3YXJkTGFyZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvL1RPQ1x0XHRcblx0XHRcdHZhciB0b2MgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MnKTtcblx0XHRcdHZhciBvcGVuVG9jID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcub3Blbi10b2MnKTtcblx0XHRcdFxuXHRcdFx0Zm9yKHZhciBpPTA7IGk8b3BlblRvYy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRvcGVuVG9jW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHRcdHRvYy5jbGFzc05hbWUgPSB0b2MuY2xhc3NOYW1lID09PSBcIm9wZW5cIiA/IFwiXCIgOiBcIm9wZW5cIjtcblx0XHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR0b2MucXVlcnlTZWxlY3RvcihcIiNjbG9zZS10b2NcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0XG5cdFx0XHQvL0Nsb3NlIHRvYyBvbiBjbGlja1xuXHRcdFx0dmFyIHRvY0xpbmtzID0gdG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcblx0XHRcdGZvcih2YXIgaT0wOyBpPHRvY0xpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRvY0xpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0Ly9UT0MtTEFSR0UtREVWSUNFXG5cdFx0XHR2YXIgdG9jTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MtbGFyZ2UtZGV2aWNlJyk7XG5cdFx0XHR2YXIgc3dpbmdDb250YWluZXIgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzd2luZy1jb250YWluZXInKTtcblx0XHRcdHZhciBzd2luZ0JhciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWJhcicpO1xuXHRcdFx0Ly9Ub2dnbGUgdG9jLWxhcmdlLWRldmljZSwgc3dpbmctY29udGFpbmVyLCBzd2luZy1iYXJcblx0XHRcdGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvZ2dsZS10b2MtbGFyZ2UtZGV2aWNlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdGlmKCF0b2NMYXJnZS5jbGFzc05hbWUubWF0Y2goL29wZW4vKSkge1xuXHRcdFx0XHRcdHRvY0xhcmdlLmNsYXNzTmFtZSArPSBcIiBvcGVuXCI7XG5cdFx0XHRcdFx0c3dpbmdDb250YWluZXIuY2xhc3NOYW1lICs9IFwiIGxlZnRcIjtcblx0XHRcdFx0XHRzd2luZ0Jhci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRvY0xhcmdlLmNsYXNzTmFtZSA9IHRvY0xhcmdlLmNsYXNzTmFtZS5yZXBsYWNlKC8gb3Blbi8sJycpO1xuXHRcdFx0XHRcdHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0XHRcdHN3aW5nQmFyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdC8vZW5kIGxvYWRlclxuXHRcdFx0Ym9va0NvbnRhaW5lci5jbGFzc05hbWUgPSAnc2hvdyc7XG5cdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZhciB1cmwgPSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoLyMvLCcnKTtcblx0XHR2YXIgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB1cmwgfTtcblx0XHR2YXIgdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XHRcblx0XHR1dGlscy5hamF4KG9wdGlvbnMpLnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRcdGxldCBtZXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSkuYm9vaztcblx0XHRcdGxldCBjb250ZW50ID0gbWV0YS5hdXRob3IgKyAnJmVuc3A7Jm1kYXNoOyZlbnNwOycgKyBtZXRhLnRpdGxlO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgY29udGVudCk7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy10aXRsZSBwOm50aC1jaGlsZCgxKVwiLCBtZXRhLmF1dGhvcik7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy10aXRsZSBwOm50aC1jaGlsZCgyKVwiLCBtZXRhLnRpdGxlKTtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLWxhcmdlLWRldmljZSBwOm50aC1jaGlsZCgxKVwiLCBtZXRhLmF1dGhvcik7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy1sYXJnZS1kZXZpY2UgcDpudGgtY2hpbGQoMilcIiwgbWV0YS50aXRsZSk7XG5cdFx0XHRyZXR1cm4gdXRpbHMuYWpheCh7IG1ldGhvZDogJ0dFVCcsIHVybDogbWV0YS5wYXRoICsgJy5odG1sJyB9KVxuXHRcdH0pLnRoZW4oIGJvb2sgPT4ge1xuXHRcdFx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0ZGl2LmlubmVySFRNTCA9IGJvb2s7XG5cdFx0XHR0ZXh0LmFwcGVuZENoaWxkKGRpdik7XG5cdFx0XHRpbml0KCk7XG5cdFx0fSlcblx0XG5cbn07XG4iLCIvL3V0aWxzLmpzXG5jb25zdCB1dGlscyA9IHtcblx0Ly9BSkFYIHJlcXVlc3RzXG5cdGFqYXg6IG9wdGlvbnMgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCAocmVzb2x2ZSxyZWplY3QpID0+IHtcblx0XHRcdGxldCBtZXRob2QgPSBvcHRpb25zLm1ldGhvZDtcblx0XHRcdGxldCB1cmwgPSBvcHRpb25zLnVybDtcblx0XHRcdGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuXHRcdFx0bGV0IHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0XHRpZih4bWxodHRwLnJlYWR5U3RhdGU9PT00KSB7XG5cdFx0XHRcdFx0aWYoeG1saHR0cC5zdGF0dXM9PT0yMDApIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoeG1saHR0cC5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoRXJyb3IoeG1saHR0cC5zdGF0dXNUZXh0KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHhtbGh0dHAub3BlbihtZXRob2QsdXJsLHRydWUpO1xuXHRcdFx0eG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblx0XHRcdGlmKGRhdGEpIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKGRhdGEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0eG1saHR0cC5zZW5kKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0cmV0dXJuIHByb21pc2U7XG5cdH0sXG5cdFx0XG5cdC8vZ2V0IEhUTUwgZnJhZ21lbnQsIGNvbnRhaW5lciwgY29udHJvbGxlclx0XG5cdGdldEZyYWdtZW50OiAodGVtcGxhdGUsIGNvbnRhaW5lciwgY29udHJvbGxlcikgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB0ZW1wbGF0ZSB9XG5cdFx0cmV0dXJuIHV0aWxzLmFqYXgob3B0aW9ucykudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHRjb250YWluZXIuaW5uZXJIVE1MID0gcmVzcG9uc2U7XG5cdFx0XHRcdHJlc29sdmUoY29udHJvbGxlcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSxcblx0XG5cdC8vYWN0aXZlIGxpbmsgOiBjaGFuZ2UgY2xhc3Ncblx0YWN0aXZlTGluazogKCkgPT4ge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHRsZXQgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmF2LWJhci10b3BcIik7XG5cdFx0bGV0IGxpbmtzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKTtcblx0XHRmb3IobGV0IGk9MDsgaTxsaW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYobG9jYXRpb24uaHJlZj09PWxpbmtzW2ldLmhyZWYpIHtcblx0XHRcdFx0dzMuYWRkQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWJsYWNrXCIpO1xuXHRcdFx0XHR3My5yZW1vdmVDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtZ3JheVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHczLmFkZENsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ncmF5XCIpO1xuXHRcdFx0XHR3My5yZW1vdmVDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtYmxhY2tcIik7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9hZG1pbi8pKSB7XG5cdFx0XHRcdGlmKGxpbmtzW2ldLmhyZWYubWF0Y2goLyNcXC9hZG1pbi8pKSB7XG5cdFx0XHRcdFx0bGlua3NbaV0uY2xhc3NOYW1lID0gXCJjbGlja2VkXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGlua3NbaV0uY2xhc3NOYW1lID0gXCJcIjsgXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdFxuXHRzZXRIVE1MOiAoc2VsZWN0b3IsY29udGVudCkgPT4ge1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLmlubmVySFRNTCA9IGNvbnRlbnQ7XG5cdH1cbn1cbiJdfQ==
