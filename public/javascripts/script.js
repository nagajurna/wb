"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden"),document.querySelector("body").className="book"):(w3.removeClass("#nav-bar-top","hidden"),document.querySelector("body").className="",utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(n){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden")},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?w3.addClass("#nav-bar-top","hidden"):w3.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n)},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n)},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/",utils.activeLink()}}();
"use strict";var book=function(){var e=document.querySelector("#bookContainer"),t=function(){var t,i,n,a,r;window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,a=16):(t=window.innerHeight,i=window.innerWidth,a=14),n=t%(r=1.5*a)!=0?2*r+t%r/2:3*r;var c=new WebBook(e,{height:t,maxWidth:i,marginY:45});window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(o){window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,a=16):(t=window.innerHeight,i=window.innerWidth,a=14),window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),n=t%(r=1.5*a)!=0?2*r+t%r/2:3*r,c.setHeight(t),c.setMaxWidth(i),c.setMarginY(n),!0===c.col&&c.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?c.forward():"swiperight"===e.type&&c.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?c.forward():37===e.which||33===e.which?c.backward():36===e.which?c.toFirstPage():35===e.which&&c.toLastPage()},!1);var o=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");o.addEventListener("click",function(e){c.forward()},!1),l.addEventListener("click",function(e){c.backward()},!1);for(var s=e.querySelector("#toc"),d=e.querySelectorAll(".open-toc"),h=0;h<d.length;h++)d[h].addEventListener("click",function(e){s.className="open"===s.className?"":"open"},!1);s.querySelector("#close-toc").addEventListener("click",function(){s.className=""},!1);for(var w=s.querySelectorAll("a"),h=0;h<w.length;h++)w[h].addEventListener("click",function(){s.className=""},!1);var u=e.querySelector("#toc-large-device"),m=e.querySelector("#swing-container"),p=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){u.className.match(/open/)?(u.className=u.className.replace(/ open/,""),m.className=m.className.replace(/ left/,""),p.className=m.className.replace(/ left/,"")):(u.className+=" open",m.className+=" left",p.className+=" left")},!1),e.className="show"},i={method:"GET",url:location.hash.replace(/#/,"")},n=e.querySelector("[data-wb-text]");utils.ajax(i).then(function(e){var t=JSON.parse(e).book,i=t.author+"&ensp;&mdash;&ensp;"+t.title;return utils.setHTML("#top-title",i),utils.setHTML("#toc-title p:nth-child(1)",t.author),utils.setHTML("#toc-title p:nth-child(2)",t.title),utils.setHTML("#toc-large-device p:nth-child(1)",t.author),utils.setHTML("#toc-large-device p:nth-child(2)",t.title),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var i=document.createElement("div");i.innerHTML=e,n.appendChild(i),t()})};
"use strict";var home=function(){document.querySelector("#home.content");w3.hide("#books-list");utils.ajax({method:"GET",url:"/books"}).then(function(o){var t=JSON.parse(o);w3.displayObject("books-list",t),w3.show("#books-list")})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,n){var a=e.method,r=e.url,s=e.data,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?t(o.responseText):n(Error(o.statusText)))},o.open(a,r,!0),o.setRequestHeader("Content-type","application/json"),s?o.send(s):o.send()})},getFragment:function(e,t,n){t.innerHTML="";var a={method:"GET",url:e};return utils.ajax(a).then(function(e){return new Promise(function(a){t.innerHTML=e,a(n)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(w3.addClass("#"+e[t].id,"w3-text-black"),w3.removeClass("#"+e[t].id,"w3-text-gray")):(w3.addClass("#"+e[t].id,"w3-text-gray"),w3.removeClass("#"+e[t].id,"w3-text-black")),location.hash.match(/#\/admin/)&&(e[t].href.match(/#\/admin/)?e[t].className="clicked":e[t].className="")},setHTML:function(e,t){document.querySelector(e).innerHTML=t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidzMiLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbW92ZUNsYXNzIiwidXRpbHMiLCJlIiwiaW5uZXJXaWR0aCIsIm9sZGhhc2giLCJuZXdoYXNoIiwicm91dGVyIiwiY29udGFpbmVyIiwiaG9tZSIsInRoZW4iLCJjb250cm9sbGVyIiwiZ2V0RnJhZ21lbnQiLCJhY3RpdmVMaW5rIiwiYm9vayIsImJvb2tDb250YWluZXIiLCJpbml0IiwiaCIsInciLCJtYXJnaW5ZIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJXZWJCb29rIiwiaGVpZ2h0IiwibWF4V2lkdGgiLCJzdHlsZSIsIm1heEhlaWdodCIsImV2ZW50Iiwic2V0SGVpZ2h0Iiwic2V0TWF4V2lkdGgiLCJzZXRNYXJnaW5ZIiwiY29sIiwidG9Cb29rIiwiSGFtbWVyIiwib24iLCJ0eXBlIiwiYmFja3dhcmQiLCJmb3J3YXJkIiwid2hpY2giLCJ0b0ZpcnN0UGFnZSIsInRvTGFzdFBhZ2UiLCJmb3J3YXJkTGFyZ2UiLCJiYWNrd2FyZExhcmdlIiwidG9jIiwib3BlblRvYyIsImkiLCJsZW5ndGgiLCJ0b2NMaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b2NMYXJnZSIsInN3aW5nQ29udGFpbmVyIiwicmVwbGFjZSIsInN3aW5nQmFyIiwibWV0aG9kIiwiY29udGVudCIsImF1dGhvciIsInNldEhUTUwiLCJyZXNwb25zZSIsInBhcnNlIiwiYWpheCIsIm1ldGEiLCJ0aXRsZSIsImRpdiIsImlubmVySFRNTCIsInRleHQiLCJhcHBlbmRDaGlsZCIsInVybCIsInBhdGgiLCJjcmVhdGVFbGVtZW50IiwiaGlkZSIsIm9wdGlvbnMiLCJib29rcyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInByb21pc2UiLCJ4bWxodHRwIiwiZGF0YSIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsInRlbXBsYXRlIiwibGlua3MiLCJocmVmIiwiaWQiLCJyb290Iiwic2VsZWN0b3IiXSwibWFwcGluZ3MiOiJhQUVDQSxPQUFBQyxpQkFBQSxhQUFBLFdBR0lDLFNBQVNDLEtBQUtDLE1BQU0sdUJBRHhCSixPQUFPQyxXQUFpQixLQUN2QkksR0FBR0gsU0FBU0MsZUFBVyxVQUVyQkUsU0FBR0MsY0FBUyxRQUFnQkMsVUFBNUIsU0FFREMsR0FBQUEsWUFBU0MsZUFBc0JGLFVBSmhDQyxTQUtPQyxjQUFBLFFBQUFGLFVBQUEsR0FDTkYsTUFBR0ssUUFBSCxhQUFlLE9BRWZDLEdBRURYLE9BQUVDLGlCQVhILE9BQUEsU0FBQVcsR0FjSVYsU0FBU0MsS0FBS0MsTUFBTSx1QkFBeUJKLE9BQU9hLFdBQWEsS0FEckViLEdBQUFBLFNBQU9DLGVBQVAsWUFJRSxHQUdGRCxPQUFPQyxpQkFBaUIsU0FBVSxXQUFsQ0QsU0FBT0MsS0FBQUEsTUFBaUIsdUJBQWdCRCxPQUFBYSxXQUFBLElBQ3ZDUixHQUFHSCxTQUFTQyxlQUFXLFVBQXZCRSxHQUFBSyxZQUVPLGVBQUEsWUFFTjtjQzVCSCxXQUFZLEtBQVhSLFNBQVdDLE9BQUFELFNBQUFDLEtBQUEsTUFJWCxJQUFJVyxPQUFBQSxFQUFTQyxPQUFBQSxFQUZjYixPQUFBQSxpQkFBQSxtQkFBQSxXQUF1QmEsRUFBQWIsU0FBQUMsS0FNaERhLEVBQU9GLEVBQVNDLEtBSmRELEdBT0pkLE9BQU9DLGlCQUFpQixhQUFjLFdBTHRDRCxFQUFPQyxFQUNMYyxFQUFVYixTQUFTQyxLQUNuQmEsRUFBT0YsRUFBU0MsS0FDZCxHQUdGRCxJQUFBQSxFQUFV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QUFBLEVBQVlpQyxFQUFBMEMsRUFBQXpDLE9BQUFELElBQ1hyRCxTQUFBZ0csT0FBQUQsRUFBQTFDLEdBQUEyQyxNQUtFN0YsR0FBR0MsU0FBUyxJQUFNMkYsRUFBTTFDLEdBQUc0QyxHQUFJLGlCQUpqQzlGLEdBQUkrRixZQUFPNUYsSUFBU0MsRUFBQUEsR0FBQUEsR0FBYyxrQkFFbENKLEdBQUlDLFNBQUosSUFBZTJGLEVBQU16QyxHQUFBQSxHQUFyQixnQkFDQ25ELEdBQUdILFlBQVNnRyxJQUFPRCxFQUFNMUMsR0FBRzJDLEdBQTVCLGtCQUFBaEcsU0FHT0MsS0FBQUMsTUFBQSxjQUNIRSxFQUFBQSxHQUFTNEYsS0FBQTlGLE1BQU02RixZQUNsQjVGLEVBQUdLLEdBQUFBLFVBQWtCdUYsVUFPcEJBLEVBQU0xQyxHQUFHaEQsVUFBWSxLQUNyQjJELFFBQUEsU0FBQW1DLEVBQUFyQyxHQUNEeEQsU0FBQUMsY0FBQTRGLEdBQUE1QixVQUFBVCIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2luZGV4LmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc05hbWU9XCJib29rXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTmFtZT1cIlwiO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgXCJcIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykgJiYgd2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdHczLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dzMucmVtb3ZlQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHQvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHQvL2lmKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMTAgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIikuc2Nyb2xsVG9wID4gMTApIHtcblx0XHRcdC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1iYXItdG9wJykuY2xhc3NOYW1lID0gJ3Njcm9sbGVkJztcblx0XHQvL30gZWxzZSB7XG5cdFx0XHQvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXYtYmFyLXRvcCcpLmNsYXNzTmFtZSA9ICcnO1xuXHRcdC8vfVxuXHQvL30sIGZhbHNlKTtcblx0XG59KSgpO1xuIiwiLy9yb3V0ZXMuanNcbihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZihsb2NhdGlvbi5oYXNoID09PSBcIlwiKSB7IGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7IH1cblx0XG5cdGxldCBvbGRoYXNoLCBuZXdoYXNoO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0b2xkaGFzaCA9IG5ld2hhc2g7XG5cdFx0XHRuZXdoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0XHRcdHJvdXRlcihvbGRoYXNoLCBuZXdoYXNoKTtcblx0XHR9LCBmYWxzZSk7XG5cblxuXHRsZXQgcm91dGVyID0gKG9sZGhhc2gsIG5ld2hhc2gpID0+IHtcblx0XHRcblx0XHR2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdC8vUk9VVEVTXG5cdFx0aWYobmV3aGFzaCA9PT0gJyMvJykge1xuXHRcdFx0Ly9IT01FXG5cdFx0XHR1dGlscy5nZXRGcmFnbWVudCgnL2ZyYWdtZW50cy9ob21lL2hvbWUuaHRtbCcsIGNvbnRhaW5lciwgaG9tZSlcblx0XHRcdC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHQgfSBlbHNlIGlmKG5ld2hhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHQgLy9CT09LXG5cdFx0XHQgdXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvYm9vay9ib29rLmh0bWwnLCBjb250YWluZXIsIGJvb2spXG5cdFx0XHQgLnRoZW4oIGNvbnRyb2xsZXIgPT4geyBjb250cm9sbGVyKCk7IH0pO1xuXHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL0ZBTExCQUNLXG5cdFx0XHRsb2NhdGlvbi5oYXNoID0gJyMvJztcblx0XHR9XG5cdFx0XG5cdFx0Ly9hY3RpdmUgbGlua1xuXHRcdHV0aWxzLmFjdGl2ZUxpbmsoKTtcblx0fTtcblxufSkoKTtcbiIsIi8vYm9vay5qc1xuY29uc3QgYm9vayA9IGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRcblx0XG5cdFx0dmFyIGJvb2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9va0NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvL0RJTUVOU0lPTlNcblx0XHRcdHZhciBoLCB3LCBtYXJnaW5ZLCBmb250U2l6ZSwgbGluZUhlaWdodDtcblx0XHRcdFxuXHRcdFx0Ly93aWR0aCAocmVzcG9uc2l2ZSlcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0LTg4LTYwOy8vbmF2QmFycyBoZWlnaHQgKjIgKDIqNDQpICsgdGV4dENvbnRhaW5lciB0b3AgKiAyICgyKjMwKVxuXHRcdFx0XHR3ID0gNjQwO1xuXHRcdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdFx0IH0gZWxzZSB7XG5cdFx0XHRcdCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0XHQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0XHQgZm9udFNpemUgPSAxNDtcblx0XHRcdCB9XG5cdFx0XHQgXG5cdFx0XHQgLy9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0XHQgbGluZUhlaWdodCA9IGZvbnRTaXplKjEuNTtcblx0XHRcdCBtYXJnaW5ZID0gaCVsaW5lSGVpZ2h0IT09MCA/IGxpbmVIZWlnaHQqMisoKGglbGluZUhlaWdodCkvMikgOiBsaW5lSGVpZ2h0KjM7XG5cdFx0XHRcblx0XHRcdC8vbmV3IEJvb2tcblx0XHRcdHZhciBib29rID0gbmV3IFdlYkJvb2soYm9va0NvbnRhaW5lciwge1xuXHRcdFx0XHQgaGVpZ2h0OiBoLFxuXHRcdFx0XHQgbWF4V2lkdGg6IHcsXG5cdFx0XHRcdCBtYXJnaW5ZOiA0NX0pO1xuXHRcdFx0XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjdG9jLWxhcmdlLWRldmljZSBkaXZcIikuc3R5bGUubWF4SGVpZ2h0ID0gaC0zMCArIFwicHhcIjtcblx0XHRcdH1cblx0XHRcdFx0XHRcdFx0IFxuXHRcdFx0Ly9vbiByZXNpemVcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBldmVudCA9PiB7XG5cdFx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQtODgtNjA7XG5cdFx0XHRcdFx0dyA9IDY0MDtcblx0XHRcdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0XHRcdFx0dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0XHRcdGZvbnRTaXplID0gMTQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDEzNjYpIHtcblx0XHRcdFx0XHQvL1RvYy1sYXJnZSBoZWlnaHRcblx0XHRcdFx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjdG9jLWxhcmdlLWRldmljZSBkaXZcIikuc3R5bGUubWF4SGVpZ2h0ID0gaC0zMCArIFwicHhcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0XHRcdGxpbmVIZWlnaHQgPSBmb250U2l6ZSoxLjU7XG5cdFx0XHRcdG1hcmdpblkgPSBoJWxpbmVIZWlnaHQhPT0wID8gbGluZUhlaWdodCoyKygoaCVsaW5lSGVpZ2h0KS8yKSA6IGxpbmVIZWlnaHQqMztcblx0XHRcdFx0XG5cdFx0XHRcdC8vc2V0IG5ldyBkaW1lbnNpb25zXG5cdFx0XHRcdGJvb2suc2V0SGVpZ2h0KGgpO1xuXHRcdFx0XHRib29rLnNldE1heFdpZHRoKHcpO1xuXHRcdFx0XHRib29rLnNldE1hcmdpblkobWFyZ2luWSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihib29rLmNvbD09PXRydWUpIHtcblx0XHRcdFx0XHRib29rLnRvQm9vaygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcblx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvL1NXSVBFIC0gZm9yd2FyZCwgYmFja3dhcmQgb24gc3dpcGUgbGVmdCBhbmQgcmlnaHQgKGhhbW1lci5qcylcblx0XHRcdC8vIHNtYWxsIGRldmljZXNcblx0XHRcdHZhciBzd2lwZUNvbnRhaW5lciA9IG5ldyBIYW1tZXIoYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS13Yi10ZXh0LWNvbnRhaW5lcl0nKSk7XG5cdFx0XHRzd2lwZUNvbnRhaW5lci5vbihcInN3aXBlcmlnaHQgc3dpcGVsZWZ0XCIsIGV2ZW50ID0+IHtcblx0XHRcdFx0aWYoZXZlbnQudHlwZT09PVwic3dpcGVsZWZ0XCIpIHtcblx0XHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdFx0fSBlbHNlIGlmKGV2ZW50LnR5cGU9PT1cInN3aXBlcmlnaHRcIikge1xuXHRcdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vVE9VQ0hFUywgZm9yd2FyZCwgYmFja3dhcmRcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG5cdFx0XHRcdGlmKGV2ZW50LndoaWNoPT09MzkgfHwgZXZlbnQud2hpY2g9PT0zNCkge1xuXHRcdFx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM3IHx8IGV2ZW50LndoaWNoPT09MzMpIHtcblx0XHRcdFx0XHRib29rLmJhY2t3YXJkKCk7XG5cdFx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM2KSB7XG5cdFx0XHRcdFx0Ym9vay50b0ZpcnN0UGFnZSgpO1xuXHRcdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNSkge1xuXHRcdFx0XHRcdGJvb2sudG9MYXN0UGFnZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdFx0XG5cdFx0XHQvL0JVVFRPTlNcblx0XHRcdC8vbGFyZ2Vcblx0XHRcdHZhciBmb3J3YXJkTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNmb3J3YXJkLWxhcmdlJyk7XG5cdFx0XHR2YXIgYmFja3dhcmRMYXJnZSA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI2JhY2t3YXJkLWxhcmdlJyk7XG5cdFx0XHRcblx0XHRcdGZvcndhcmRMYXJnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcblx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHR9LCBmYWxzZSk7XG5cblx0XHRcdGJhY2t3YXJkTGFyZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdH0sIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvL1RPQ1x0XHRcblx0XHRcdHZhciB0b2MgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MnKTtcblx0XHRcdHZhciBvcGVuVG9jID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcub3Blbi10b2MnKTtcblx0XHRcdFxuXHRcdFx0Zm9yKHZhciBpPTA7IGk8b3BlblRvYy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRvcGVuVG9jW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHRcdHRvYy5jbGFzc05hbWUgPSB0b2MuY2xhc3NOYW1lID09PSBcIm9wZW5cIiA/IFwiXCIgOiBcIm9wZW5cIjtcblx0XHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR0b2MucXVlcnlTZWxlY3RvcihcIiNjbG9zZS10b2NcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0XG5cdFx0XHQvL0Nsb3NlIHRvYyBvbiBjbGlja1xuXHRcdFx0dmFyIHRvY0xpbmtzID0gdG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcblx0XHRcdGZvcih2YXIgaT0wOyBpPHRvY0xpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRvY0xpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0Ly9UT0MtTEFSR0UtREVWSUNFXG5cdFx0XHR2YXIgdG9jTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MtbGFyZ2UtZGV2aWNlJyk7XG5cdFx0XHR2YXIgc3dpbmdDb250YWluZXIgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzd2luZy1jb250YWluZXInKTtcblx0XHRcdHZhciBzd2luZ0JhciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3N3aW5nLWJhcicpO1xuXHRcdFx0Ly9Ub2dnbGUgdG9jLWxhcmdlLWRldmljZSwgc3dpbmctY29udGFpbmVyLCBzd2luZy1iYXJcblx0XHRcdGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignI3RvZ2dsZS10b2MtbGFyZ2UtZGV2aWNlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdGlmKCF0b2NMYXJnZS5jbGFzc05hbWUubWF0Y2goL29wZW4vKSkge1xuXHRcdFx0XHRcdHRvY0xhcmdlLmNsYXNzTmFtZSArPSBcIiBvcGVuXCI7XG5cdFx0XHRcdFx0c3dpbmdDb250YWluZXIuY2xhc3NOYW1lICs9IFwiIGxlZnRcIjtcblx0XHRcdFx0XHRzd2luZ0Jhci5jbGFzc05hbWUgKz0gXCIgbGVmdFwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRvY0xhcmdlLmNsYXNzTmFtZSA9IHRvY0xhcmdlLmNsYXNzTmFtZS5yZXBsYWNlKC8gb3Blbi8sJycpO1xuXHRcdFx0XHRcdHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0XHRcdHN3aW5nQmFyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdC8vZW5kIGxvYWRlclxuXHRcdFx0Ym9va0NvbnRhaW5lci5jbGFzc05hbWUgPSAnc2hvdyc7XG5cdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZhciB1cmwgPSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoLyMvLCcnKTtcblx0XHR2YXIgb3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB1cmwgfTtcblx0XHR2YXIgdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XHRcblx0XHR1dGlscy5hamF4KG9wdGlvbnMpLnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRcdGxldCBtZXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSkuYm9vaztcblx0XHRcdGxldCBjb250ZW50ID0gbWV0YS5hdXRob3IgKyAnJmVuc3A7Jm1kYXNoOyZlbnNwOycgKyBtZXRhLnRpdGxlO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgY29udGVudCk7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy10aXRsZSBwOm50aC1jaGlsZCgxKVwiLCBtZXRhLmF1dGhvcik7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy10aXRsZSBwOm50aC1jaGlsZCgyKVwiLCBtZXRhLnRpdGxlKTtcblx0XHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLWxhcmdlLWRldmljZSBwOm50aC1jaGlsZCgxKVwiLCBtZXRhLmF1dGhvcik7XG5cdFx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy1sYXJnZS1kZXZpY2UgcDpudGgtY2hpbGQoMilcIiwgbWV0YS50aXRsZSk7XG5cdFx0XHRyZXR1cm4gdXRpbHMuYWpheCh7IG1ldGhvZDogJ0dFVCcsIHVybDogbWV0YS5wYXRoICsgJy5odG1sJyB9KVxuXHRcdH0pLnRoZW4oIGJvb2sgPT4ge1xuXHRcdFx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0ZGl2LmlubmVySFRNTCA9IGJvb2s7XG5cdFx0XHR0ZXh0LmFwcGVuZENoaWxkKGRpdik7XG5cdFx0XHRpbml0KCk7XG5cdFx0fSlcblx0XG5cbn07XG4iLCIvL2hvbWUuanNcbmNvbnN0IGhvbWUgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQvL3Jvb3RFbGVtZW50XG5cdGxldCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLmNvbnRlbnRcIik7XG5cdHczLmhpZGUoXCIjYm9va3MtbGlzdFwiKTtcblx0Ly9nZXQgYm9va3Ncblx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogJy9ib29rcycgfTtcblx0dXRpbHMuYWpheChvcHRpb25zKVxuXHQudGhlbiggcmVzcG9uc2UgPT4ge1xuXHRcdGxldCBib29rcyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuXHRcdHczLmRpc3BsYXlPYmplY3QoJ2Jvb2tzLWxpc3QnLCBib29rcyk7XG5cdFx0dzMuc2hvdyhcIiNib29rcy1saXN0XCIpO1xuXHR9KTtcblxufTtcblxuIiwiLy91dGlscy5qc1xuY29uc3QgdXRpbHMgPSB7XG5cdC8vQUpBWCByZXF1ZXN0c1xuXHRhamF4OiBvcHRpb25zID0+IHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0bGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSggKHJlc29sdmUscmVqZWN0KSA9PiB7XG5cdFx0XHRsZXQgbWV0aG9kID0gb3B0aW9ucy5tZXRob2Q7XG5cdFx0XHRsZXQgdXJsID0gb3B0aW9ucy51cmw7XG5cdFx0XHRsZXQgZGF0YSA9IG9wdGlvbnMuZGF0YTtcblx0XHRcdGxldCB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0XHR4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcblx0XHRcdFx0aWYoeG1saHR0cC5yZWFkeVN0YXRlPT09NCkge1xuXHRcdFx0XHRcdGlmKHhtbGh0dHAuc3RhdHVzPT09MjAwKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVqZWN0KEVycm9yKHhtbGh0dHAuc3RhdHVzVGV4dCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR4bWxodHRwLm9wZW4obWV0aG9kLHVybCx0cnVlKTtcblx0XHRcdHhtbGh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG5cdFx0XHRpZihkYXRhKSB7XG5cdFx0XHRcdHhtbGh0dHAuc2VuZChkYXRhKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHhtbGh0dHAuc2VuZCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdHJldHVybiBwcm9taXNlO1xuXHR9LFxuXHRcdFxuXHQvL2dldCBIVE1MIGZyYWdtZW50LCBjb250YWluZXIsIGNvbnRyb2xsZXJcdFxuXHRnZXRGcmFnbWVudDogKHRlbXBsYXRlLCBjb250YWluZXIsIGNvbnRyb2xsZXIpID0+IHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0Y29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogdGVtcGxhdGUgfVxuXHRcdHJldHVybiB1dGlscy5hamF4KG9wdGlvbnMpLnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSggKHJlc29sdmUpID0+IHtcblx0XHRcdFx0Y29udGFpbmVyLmlubmVySFRNTCA9IHJlc3BvbnNlO1xuXHRcdFx0XHRyZXNvbHZlKGNvbnRyb2xsZXIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cdFxuXHQvL2FjdGl2ZSBsaW5rIDogY2hhbmdlIGNsYXNzXG5cdGFjdGl2ZUxpbms6ICgpID0+IHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0bGV0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hdi1iYXItdG9wXCIpO1xuXHRcdGxldCBsaW5rcyA9IHJvb3QucXVlcnlTZWxlY3RvckFsbChcImFcIik7XG5cdFx0Zm9yKGxldCBpPTA7IGk8bGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKGxvY2F0aW9uLmhyZWY9PT1saW5rc1tpXS5ocmVmKSB7XG5cdFx0XHRcdHczLmFkZENsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ibGFja1wiKTtcblx0XHRcdFx0dzMucmVtb3ZlQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWdyYXlcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtZ3JheVwiKTtcblx0XHRcdFx0dzMucmVtb3ZlQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWJsYWNrXCIpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZihsb2NhdGlvbi5oYXNoLm1hdGNoKC8jXFwvYWRtaW4vKSkge1xuXHRcdFx0XHRpZihsaW5rc1tpXS5ocmVmLm1hdGNoKC8jXFwvYWRtaW4vKSkge1xuXHRcdFx0XHRcdGxpbmtzW2ldLmNsYXNzTmFtZSA9IFwiY2xpY2tlZFwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxpbmtzW2ldLmNsYXNzTmFtZSA9IFwiXCI7IFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRcblx0c2V0SFRNTDogKHNlbGVjdG9yLGNvbnRlbnQpID0+IHtcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5pbm5lckhUTUwgPSBjb250ZW50O1xuXHR9XG59XG4iXX0=
