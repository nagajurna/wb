"use strict";window.addEventListener("hashchange",function(){location.hash.match(/#\/books\/.+[^\/]$/)?(window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden"),document.querySelector("body").className="book"):(w3.removeClass("#nav-bar-top","hidden"),document.querySelector("body").className="",utils.setHTML("#top-title",""))},!1),window.addEventListener("load",function(n){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768&&w3.addClass("#nav-bar-top","hidden")},!1),window.addEventListener("resize",function(){location.hash.match(/#\/books\/.+[^\/]$/)&&window.innerWidth<768?w3.addClass("#nav-bar-top","hidden"):w3.removeClass("#nav-bar-top","hidden")},!1);
"use strict";!function(){""===location.hash&&(location.hash="#/");var t=void 0,n=void 0;window.addEventListener("DOMContentLoaded",function(){n=location.hash,o(t,n),utils.activeLink()},!1),window.addEventListener("hashchange",function(){t=n,n=location.hash,o(t,n),utils.activeLink()},!1);var o=function(t,n){var o=document.querySelector("#container");"#/"===n?utils.getFragment("/fragments/home/home.html",o,home).then(function(t){t()}):n.match(/#\/books\/.+[^\/]$/)?utils.getFragment("/fragments/book/book.html",o,book).then(function(t){t()}):location.hash="#/"}}();
"use strict";var book=function(){document.querySelector("#home.content");var e=document.querySelector("#bookContainer"),t=function(){var t=void 0,i=void 0,n=void 0,r=void 0,a=void 0;window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,r=16):(t=window.innerHeight,i=window.innerWidth,r=14),n=t%(a=1.5*r)!=0?2*a+t%a/2:3*a;var c=new WebBook(e,{height:t,maxWidth:i,marginY:45});window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),window.addEventListener("resize",function(o){window.innerWidth>=768?(t=window.innerHeight-88-60,i=640,r=16):(t=window.innerHeight,i=window.innerWidth,r=14),window.innerWidth>=1366&&(e.querySelector("#toc-large-device div").style.maxHeight=t-30+"px"),n=t%(a=1.5*r)!=0?2*a+t%a/2:3*a,c.setHeight(t),c.setMaxWidth(i),c.setMarginY(n),!0===c.col&&c.toBook()},!1),new Hammer(e.querySelector("[data-wb-text-container]")).on("swiperight swipeleft",function(e){"swipeleft"===e.type?c.forward():"swiperight"===e.type&&c.backward()}),document.addEventListener("keydown",function(e){39===e.which||34===e.which?c.forward():37===e.which||33===e.which?c.backward():36===e.which?c.toFirstPage():35===e.which&&c.toLastPage()},!1);var o=e.querySelector("#forward-large"),l=e.querySelector("#backward-large");o.addEventListener("click",function(e){c.forward()},!1),l.addEventListener("click",function(e){c.backward()},!1);for(var d=e.querySelector("#toc"),s=e.querySelectorAll(".open-toc"),h=0;h<s.length;h++)s[h].addEventListener("click",function(e){d.className="open"===d.className?"":"open"},!1);d.querySelector("#close-toc").addEventListener("click",function(){d.className=""},!1);for(var w=d.querySelectorAll("a"),u=0;u<w.length;u++)w[u].addEventListener("click",function(){d.className=""},!1);var m=e.querySelector("#toc-large-device"),v=e.querySelector("#swing-container"),p=e.querySelector("#swing-bar");e.querySelector("#toggle-toc-large-device").addEventListener("click",function(e){m.className.match(/open/)?(m.className=m.className.replace(/ open/,""),v.className=v.className.replace(/ left/,""),p.className=v.className.replace(/ left/,"")):(m.className+=" open",v.className+=" left",p.className+=" left")},!1),e.className="show"},i={method:"GET",url:location.hash.replace(/#/,"")},n=e.querySelector("[data-wb-text]");utils.ajax(i).then(function(e){var t=JSON.parse(e).book,i=t.author+"&ensp;&mdash;&ensp;"+t.title;return utils.setHTML("#top-title",i),utils.setHTML("#toc-title p:nth-child(1)",t.author),utils.setHTML("#toc-title p:nth-child(2)",t.title),utils.setHTML("#toc-large-device p:nth-child(1)",t.author),utils.setHTML("#toc-large-device p:nth-child(2)",t.title),utils.ajax({method:"GET",url:t.path+".html"})}).then(function(e){var i=document.createElement("div");i.innerHTML=e,n.appendChild(i),t()})};
"use strict";var home=function(){document.querySelector("#home.content");w3.hide("#books-list");utils.ajax({method:"GET",url:"/books/"}).then(function(o){var t=JSON.parse(o);w3.displayObject("books-list",t),w3.show("#books-list")})};
"use strict";var utils={ajax:function(e){return new Promise(function(t,n){var a=e.method,r=e.url,o=e.data,s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&(200===s.status?t(s.responseText):n(Error(s.statusText)))},s.open(a,r,!0),s.setRequestHeader("Content-type","application/json"),o?s.send(o):s.send()})},getFragment:function(e,t,n){t.innerHTML="";var a={method:"GET",url:e};return utils.ajax(a).then(function(e){return new Promise(function(a){var r=document.createElement("div");r.innerHTML=e,t.appendChild(r),a(n)})})},activeLink:function(){for(var e=document.querySelector("#nav-bar-top").querySelectorAll("a"),t=0;t<e.length;t++)location.href===e[t].href?(w3.addClass("#"+e[t].id,"w3-text-black"),w3.removeClass("#"+e[t].id,"w3-text-gray")):(w3.addClass("#"+e[t].id,"w3-text-gray"),w3.removeClass("#"+e[t].id,"w3-text-black")),location.hash.match(/#\/admin/)&&(e[t].href.match(/#\/admin/)?e[t].className="clicked":e[t].className="")},setHTML:function(e,t){document.querySelector(e).innerHTML=t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwicm91dGVzLmpzIiwiYm9vay9ib29rLmpzIiwiaG9tZS9ob21lLmpzIiwidXRpbHMuanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsIm1hdGNoIiwidzMiLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbW92ZUNsYXNzIiwidXRpbHMiLCJlIiwiaW5uZXJXaWR0aCIsIm9sZGhhc2giLCJuZXdoYXNoIiwicm91dGVyIiwiYWN0aXZlTGluayIsImNvbnRhaW5lciIsImhvbWUiLCJ0aGVuIiwiY29udHJvbGxlciIsImdldEZyYWdtZW50IiwiYm9vayIsImJvb2tDb250YWluZXIiLCJpbml0IiwiaCIsInciLCJtYXJnaW5ZIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJXZWJCb29rIiwiaGVpZ2h0IiwibWF4V2lkdGgiLCJzdHlsZSIsIm1heEhlaWdodCIsImV2ZW50Iiwic2V0SGVpZ2h0Iiwic2V0TWF4V2lkdGgiLCJzZXRNYXJnaW5ZIiwidG9Cb29rIiwiSGFtbWVyIiwib24iLCJ0eXBlIiwiZm9yd2FyZCIsInN3aXBlQ29udGFpbmVyIiwiYmFja3dhcmQiLCJ3aGljaCIsInRvTGFzdFBhZ2UiLCJmb3J3YXJkTGFyZ2UiLCJiYWNrd2FyZExhcmdlIiwidG9jIiwib3BlblRvYyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b2NMaW5rcyIsImkiLCJsZW5ndGgiLCJ0b2NMYXJnZSIsInN3aW5nQ29udGFpbmVyIiwic3dpbmdCYXIiLCJyZXBsYWNlIiwidXJsIiwib3B0aW9ucyIsImFqYXgiLCJyZXNwb25zZSIsIm1ldGEiLCJKU09OIiwicGFyc2UiLCJ0aXRsZSIsImNvbnRlbnQiLCJzZXRIVE1MIiwiYXV0aG9yIiwibWV0aG9kIiwicGF0aCIsImNyZWF0ZUVsZW1lbnQiLCJkaXYiLCJpbm5lckhUTUwiLCJ0ZXh0IiwiaGlkZSIsImJvb2tzIiwic2hvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvbWlzZSIsInhtbGh0dHAiLCJkYXRhIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwidGVtcGxhdGUiLCJsaW5rcyIsImhyZWYiLCJpZCIsInJvb3QiLCJzZWxlY3RvciJdLCJtYXBwaW5ncyI6ImFBRUNBLE9BQUFDLGlCQUFBLGFBQUEsV0FHSUMsU0FBU0MsS0FBS0MsTUFBTSx1QkFEeEJKLE9BQU9DLFdBQWlCLEtBQ3ZCSSxHQUFHSCxTQUFTQyxlQUFXLFVBRXJCRSxTQUFHQyxjQUFTLFFBQWdCQyxVQUE1QixTQUVEQyxHQUFBQSxZQUFTQyxlQUFzQkYsVUFKaENDLFNBS09DLGNBQUEsUUFBQUYsVUFBQSxHQUNORixNQUFHSyxRQUFILGFBQWUsT0FFZkMsR0FFRFgsT0FBRUMsaUJBWEgsT0FBQSxTQUFBVyxHQWNJVixTQUFTQyxLQUFLQyxNQUFNLHVCQUF5QkosT0FBT2EsV0FBYSxLQURyRWIsR0FBQUEsU0FBT0MsZUFBUCxZQUlFLEdBR0ZELE9BQU9DLGlCQUFpQixTQUFVLFdBQWxDRCxTQUFPQyxLQUFBQSxNQUFpQix1QkFBZ0JELE9BQUFhLFdBQUEsSUFDdkNSLEdBQUdILFNBQVNDLGVBQVcsVUFBdkJFLEdBQUFLLFlBRU8sZUFBQSxZQUVOO2NDNUJILFdBQVksS0FBWFIsU0FBV0MsT0FBQUQsU0FBQUMsS0FBQSxNQUlYLElBQUlXLE9BQUFBLEVBQVNDLE9BQUFBLEVBRmNiLE9BQUFBLGlCQUFBLG1CQUFBLFdBQXVCYSxFQUFBYixTQUFBQyxLQU1oRGEsRUFBT0YsRUFBU0MsR0FKbEJKLE1BQWFJLGVBT1QsR0FKRkEsT0FBQUEsaUJBQUEsYUFBQSxXQUNBQyxFQUFPRixFQUNQQyxFQUFBYixTQUFBQyxLQUNBUSxFQUFNTSxFQUFORixHQVFBSixNQUFNTSxlQUxSakIsR0FHRWdCLElBQUFBLEVBQU9GLFNBQUFBLEVBQVNDLEdBRWhCSixJQUFBQSxFQUFBSCxTQUFBQyxjQUFBLGNBSVcsT0FBVE8sRUFFSEwsTUFBSU8sWUFBWVYsNEJBQXVCVSxFQUF2Q0MsTUFNRUMsS0FBTSxTQUFBQyxHQUFnQkEsTUFIckJOLEVBQVlYLE1BQU0sc0JBRXBCTyxNQUFNVyxZQUFZLDRCQUE2QkosRUFBV0MsTUFDbkNFLEtBQUFBLFNBQUFBLEdBQUFBLE1BSXRCVixTQUFNVyxLQUFBQSxNQWxDVjthQ0FBLElBQU1DLEtBQU8sV0FJQ2YsU0FBU0MsY0FBYyxpQkFBcEMsSUFFTWUsRUFBZ0JoQixTQUFTQyxjQUFjLGtCQUV6Q2dCLEVBQU8sV0FFVixJQUFJQyxPQUFBQSxFQUFHQyxPQUFBQSxFQUFHQyxPQUFBQSxFQUFTQyxPQUFBQSxFQUFVQyxPQUFBQSxFQUE3QjlCLE9BQUkwQixZQUFKLEtBQUFBLEVBQU9DLE9BQUFBLFlBQVAsR0FBQSxHQUFBQSxFQUFVQyxJQUFWQyxFQUFtQkEsS0FRakJILEVBQUkxQixPQUFPK0IsWUFOYkosRUFBQTNCLE9BQUFhLFdBQ0FnQixFQUFVaEIsSUFLUmEsRUFBSTFCLEdBTE44QixFQUlRLElBQUFELElBQ04sRUFBQSxFQUFBQyxFQUFBSixFQUFBSSxFQUFBLEVBQUEsRUFBQUEsRUFHQSxJQUFBUCxFQUFBLElBQUFTLFFBQUFSLEdBUUFTLE9BQVFQLEVBTlRRLFNBQUFQLEVBQ0FHLFFBQUFBLEtBU0U5QixPQUFPYSxZQUFjLE9BTHhCVyxFQUFlUSxjQUFRUix5QkFBZVcsTUFBQUMsVUFBQVYsRUFBQSxHQUFBLE1BV3RDMUIsT0FBT0MsaUJBQWlCLFNBQVUsU0FBQW9DLEdBTi9CckMsT0FBT2EsWUFBYyxLQUN2QmEsRUFBQTFCLE9BQUErQixZQUFBLEdBQUEsR0FDQVAsRUFBQUEsSUFDQUssRUFBQSxLQUVESCxFQUFBMUIsT0FBQStCLFlBQ0EvQixFQUFBQSxPQUFPQyxXQUNONEIsRUFBVWhCLElBR1RnQixPQUFBQSxZQUFBLE9BRUFILEVBQVdLLGNBQVgseUJBQUFJLE1BQUFDLFVBQUFWLEVBQUEsR0FBQSxNQUtERSxFQUFHNUIsR0FNSDhCLEVBQXNCLElBQVRELElBTlcsRUFBTSxFQUE5QkMsRUFBOEJKLEVBQUFJLEVBQUEsRUFBQSxFQUFBQSxFQUc3QlAsRUFBQWUsVUFBQVosR0FRREgsRUFBS2dCLFlBQVlaLEdBTmpCSixFQUFBaUIsV0FBQVosSUFFWUUsSUFBWkYsRUFBQUEsS0FRQ0wsRUFBS2tCLFdBSk5sQixHQUtDLElBQUFtQixPQUFBbEIsRUFBQWYsY0FBQSw2QkEzQkZrQyxHQUFBLHVCQUFBLFNBQUFOLEdBb0NpQixjQUFiQSxFQUFNTyxLQUpWckIsRUFBQXNCLFVBQ0EsZUFBQVIsRUFBQU8sTUFDQXJCLEVBQUl1QixhQUtGdkIsU0FBS3dCLGlCQUFMLFVBQUEsU0FBQVYsR0FDQSxLQUFBQSxFQUFBVyxPQUFBLEtBQUFYLEVBQUFXLE1BTEZ6QixFQUFBc0IsVUFZeUIsS0FBZFIsRUFBTVcsT0FBNEIsS0FBZFgsRUFBTVcsTUFKckN6QixFQUFBd0IsV0FDQSxLQUFTOUMsRUFBQUEsTUFDUnNCLEVBQUdjLGNBQ0QsS0FBS1EsRUFBTEcsT0FERnpCLEVBQUEwQixlQUVPLEdBT1AsSUFBRUMsRUFWSDFCLEVBQUFmLGNBQUEsa0JBZ0JJMEMsRUFBZ0IzQixFQUFjZixjQUFjLG1CQUZoRHlDLEVBQUFqRCxpQkFBQSxRQUFBLFNBQUFvQyxHQUNBZCxFQUFJMkIsWUFDSixHQUVBQSxFQUFhakQsaUJBQWlCLFFBQVMsU0FBQW9DLEdBQ3RDZCxFQUFLc0IsYUFDSCxHQVFILElBQUlPLElBSkRBLEVBRkg1QixFQUFBZixjQUFBLFFBT0k0QyxFQUFVN0IsRUFBYzhCLGlCQUFpQixhQUR6Q0YsRUFBTTVCLEVBQUFBLEVBQUFBLEVBQUFBLE9BQWNmLElBQ3hCNEMsRUFBSUEsR0FBQUEsaUJBQXdCQyxRQUFBQSxTQUFBQSxHQUkxQkYsRUFBSTdDLFVBQThCLFNBQWxCNkMsRUFBSTdDLFVBQXVCLEdBQUssU0FGbEQsR0FHRTZDLEVBQUUzQyxjQUZILGNBQUFSLGlCQUFBLFFBQUEsV0FHQW1ELEVBQUE3QyxVQUFBLEtBSUUsR0FJSCxJQUFJLElBSkRnRCxFQUZISCxFQUFBRSxpQkFBQSxLQU1RRSxFQUFFLEVBQUdBLEVBQUVELEVBQVNFLE9BQVFELElBRmhDRCxFQUFBQyxHQUFBdkQsaUJBQUEsUUFBQSxXQUNBbUQsRUFBSUcsVUFBV0gsS0FDZixHQVFBLElBQUlNLEVBQVdsQyxFQUFjZixjQUFjLHFCQUQzQ2tELEVBQUFuQyxFQUFBZixjQUFBLG9CQUNJaUQsRUFBV2xDLEVBQWNmLGNBQWMsY0FFM0NlLEVBQUlvQyxjQUFXcEMsNEJBQWZ2QixpQkFBQSxRQUFBLFNBQUFvQyxHQUNBcUIsRUFBQW5ELFVBQUFILE1BQUEsU0FLRXdELEVBQVNyRCxVQUFUbUQsRUFBQW5ELFVBQUFzRCxRQUFBLFFBQUEsSUFIREYsRUFJT3BELFVBQUFvRCxFQUFBcEQsVUFBQXNELFFBQUEsUUFBQSxJQUNOSCxFQUFTbkQsVUFBWW1ELEVBQVNuRCxVQUFVc0QsUUFBUSxRQUFoRCxNQU5GckMsRUFBQUEsV0FBY2YsUUFDYmtELEVBQWFwRCxXQUFULFFBQ0htRCxFQUFTbkQsV0FBYSxXQU10QnFELEdBS0ZwQyxFQUFjakIsVUFBWSxRQUl2QnVELEdBQU01RCxPQUFjMkQsTUFBZEMsSUFBQTVELFNBQVNDLEtBQUswRCxRQUFRLElBQUksS0FDaENFLEVBQUFBLEVBQW9CdEQsY0FBVixrQkFHZEUsTUFBTXFELEtBQUtELEdBQVMzQyxLQUFNLFNBQUE2QyxHQUExQnRELElBQUFBLEVBQVdvRCxLQUFBQSxNQUFTM0MsR0FBTUcsS0FDckIyQyxFQUFPQyxFQUFLQyxPQUFNSCxzQkFBdEJDLEVBQUFHLE1BTUExRCxPQUxBQSxNQUFJMkQsUUFBVUosYUFBY0ksR0FDNUIzRCxNQUFNNEQsUUFBUSw0QkFBZEwsRUFBQU0sUUFDQTdELE1BQU00RCxRQUFRLDRCQUE2QkwsRUFBS00sT0FDaEQ3RCxNQUFNNEQsUUFBUSxtQ0FBa0NGLEVBQWhERyxRQUNBN0QsTUFBTTRELFFBQVEsbUNBQW9DTCxFQUFLTSxPQUNqREQsTUFBTlAsTUFBY1MsT0FBQSxNQUFBWCxJQUFBSSxFQUFBUSxLQUFvQ1IsWUFDbEQ5QyxLQUFPVCxTQUFBQSxHQVJSLElBU0dTLEVBQU1aLFNBQUFtRSxjQUFRLE9BQ2hCQyxFQUFJQSxVQUFNcEUsRUFDVm9FLEVBQUlDLFlBQVl0RCxHQUNoQnVEO2FDM0tGLElBQU0zRCxLQUFPLFdBRVpYLFNBQUFDLGNBQUEsaUJBQ0FKLEdBQUEwRSxLQUFBLGVBRUExRSxNQUFHMEUsTUFEVXZFLE9BQVNDLE1BQUFBLElBQWMsWUFFcENXLEtBQUEsU0FBQTZDLEdBQ0EsSUFBSUYsRUFBQUEsS0FBWVUsTUFBUVIsR0FDeEJ0RCxHQUFBQSxjQUFBLGFBQ09xRSxHQUNOM0UsR0FBQTRFLEtBQUlEO2FDVk4sSUFBTXJFLE9BQU5xRCxLQUFNckQsU0FBQUEsR0F5QkYsT0F2QkcsSUFBQXVFLFFBQUEsU0FBV0MsRUFBQUMsR0FDaEIsSUFBQVgsRUFBQVYsRUFBQVUsT0FHS1gsRUFBTUMsRUFBUUQsSUFGZnVCLEVBQUFBLEVBQWNILEtBQ2JULEVBQVNWLElBQUFBLGVBQ2J1QixFQUFJeEIsbUJBQUosV0FDQSxJQUFJeUIsRUFBT3hCLGFBQ095QixNQUFkRixFQUFBQSxPQUNKQSxFQUFRRyxFQUFBQSxjQUVOTCxFQUFHRSxNQUFRSSxFQUFSQyxlQUtITCxFQUFBTSxLQUFBbkIsRUFBQVgsR0FBQSxHQUNEd0IsRUFSRE8saUJBQUEsZUFBQSxvQkFZR04sRUFGSEQsRUFBUU0sS0FBS25CLEdBRWJhLEVBQUFRLFVBUUR4RSxZQTdCWSxTQUFBeUUsRUFBQTdFLEVBQUFHLEdBK0JiSCxFQUFBMkQsVUFBQSxHQUNBdkQsSUFBQUEsR0FBYW1ELE9BQUEsTUFBQVgsSUFBQ2lDLEdBQ2IsT0FBQXBGLE1BQUFxRCxLQUFBRCxHQUFBM0MsS0FBQSxTQUFBNkMsR0FJQyxPQUFPLElBQUlpQixRQUFTLFNBQUNDLEdBSHRCakUsSUFBQUEsRUFBVTJELFNBQVZGLGNBQUEsT0FDQUMsRUFBSWIsVUFBWVUsRUFDaEJ2RCxFQUFPUCxZQUFXb0QsR0FDakJvQixFQUFPOUQsUUFNUEosV0FQRCxXQVdEQSxJQUFBQSxJQURBK0UsRUFHWXhGLFNBQVNDLGNBQWMsZ0JBSG5DNkMsaUJBQUEsS0FDQXJDLEVBQUFBLEVBQVl1QyxFQUFBd0MsRUFBQXZDLE9BQUFELElBQ1h0RCxTQUFBK0YsT0FBQUQsRUFBQXhDLEdBQUF5QyxNQUtFNUYsR0FBR0MsU0FBUyxJQUFNMEYsRUFBTXhDLEdBQUcwQyxHQUFJLGlCQUpqQzdGLEdBQUk4RixZQUFPM0YsSUFBU0MsRUFBQUEsR0FBQUEsR0FBYyxrQkFFbENKLEdBQUlDLFNBQUosSUFBZTBGLEVBQU12QyxHQUFBQSxHQUFyQixnQkFDQ3BELEdBQUdILFlBQVMrRixJQUFPRCxFQUFNeEMsR0FBR3lDLEdBQTVCLGtCQUFBL0YsU0FHT0MsS0FBQUMsTUFBQSxjQUNIRSxFQUFBQSxHQUFTMkYsS0FBQTdGLE1BQU00RixZQUNsQjNGLEVBQUdLLEdBQUFBLFVBQWtCc0YsVUFPcEJBLEVBQU14QyxHQUFHakQsVUFBWSxLQUNyQmdFLFFBQUEsU0FBQTZCLEVBQUE5QixHQUNEOUQsU0FBQUMsY0FBQTJGLEdBQUF2QixVQUFBUCIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2luZGV4LmpzXG4oZnVuY3Rpb24oKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc05hbWU9XCJib29rXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTmFtZT1cIlwiO1xuXHRcdFx0dXRpbHMuc2V0SFRNTChcIiN0b3AtdGl0bGVcIiwgXCJcIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB7XG5cdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2Jvb2tzXFwvLitbXlxcL10kLykgJiYgd2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcblx0XHRcdHczLmFkZENsYXNzKFwiI25hdi1iYXItdG9wXCIsIFwiaGlkZGVuXCIpO1xuXHRcdFx0XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHRcdGlmKGxvY2F0aW9uLmhhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4KSB7XG5cdFx0XHR3My5hZGRDbGFzcyhcIiNuYXYtYmFyLXRvcFwiLCBcImhpZGRlblwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dzMucmVtb3ZlQ2xhc3MoXCIjbmF2LWJhci10b3BcIiwgXCJoaWRkZW5cIik7XG5cdFx0fVxuXHR9LCBmYWxzZSk7XG5cdFxuXHQvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHQvL2lmKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMTAgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIikuc2Nyb2xsVG9wID4gMTApIHtcblx0XHRcdC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1iYXItdG9wJykuY2xhc3NOYW1lID0gJ3Njcm9sbGVkJztcblx0XHQvL30gZWxzZSB7XG5cdFx0XHQvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYXYtYmFyLXRvcCcpLmNsYXNzTmFtZSA9ICcnO1xuXHRcdC8vfVxuXHQvL30sIGZhbHNlKTtcblx0XG59KSgpO1xuIiwiLy9yb3V0ZXMuanNcbihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZihsb2NhdGlvbi5oYXNoID09PSBcIlwiKSB7IGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7IH1cblx0XG5cdGxldCBvbGRoYXNoLCBuZXdoYXNoO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXHRcdFx0bmV3aGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyb3V0ZXIob2xkaGFzaCwgbmV3aGFzaCk7XG5cdFx0XHQvL2FjdGl2ZSBsaW5rXG5cdFx0XHR1dGlscy5hY3RpdmVMaW5rKCk7XG5cdFx0fSwgZmFsc2UpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0b2xkaGFzaCA9IG5ld2hhc2g7XG5cdFx0XHRuZXdoYXNoID0gbG9jYXRpb24uaGFzaDtcblx0XHRcdHJvdXRlcihvbGRoYXNoLCBuZXdoYXNoKTtcblx0XHRcdC8vYWN0aXZlIGxpbmtcblx0XHRcdHV0aWxzLmFjdGl2ZUxpbmsoKTtcblx0XHR9LCBmYWxzZSk7XG5cblxuXHRsZXQgcm91dGVyID0gKG9sZGhhc2gsIG5ld2hhc2gpID0+IHtcblx0XHRcblx0XHR2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRhaW5lcicpO1xuXHRcdFxuXHRcdC8vUk9VVEVTXG5cdFx0aWYobmV3aGFzaCA9PT0gJyMvJykge1xuXHRcdFx0Ly9IT01FXG5cdFx0XHR1dGlscy5nZXRGcmFnbWVudCgnL2ZyYWdtZW50cy9ob21lL2hvbWUuaHRtbCcsIGNvbnRhaW5lciwgaG9tZSlcblx0XHRcdC50aGVuKCBjb250cm9sbGVyID0+IHsgY29udHJvbGxlcigpOyB9KTtcblx0XHRcblx0XHQgfSBlbHNlIGlmKG5ld2hhc2gubWF0Y2goLyNcXC9ib29rc1xcLy4rW15cXC9dJC8pKSB7XG5cdFx0XHQgLy9CT09LXG5cdFx0XHQgdXRpbHMuZ2V0RnJhZ21lbnQoJy9mcmFnbWVudHMvYm9vay9ib29rLmh0bWwnLCBjb250YWluZXIsIGJvb2spXG5cdFx0XHQgLnRoZW4oIGNvbnRyb2xsZXIgPT4geyBjb250cm9sbGVyKCk7IH0pO1xuXHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL0ZBTExCQUNLXG5cdFx0XHRsb2NhdGlvbi5oYXNoID0gJyMvJztcblx0XHR9XG5cdFx0XG5cdH07XG5cbn0pKCk7XG4iLCIvL2Jvb2suanNcbmNvbnN0IGJvb2sgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly9yb290RWxlbWVudFxuXHRjb25zdCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLmNvbnRlbnRcIik7XG5cblx0Y29uc3QgYm9va0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib29rQ29udGFpbmVyJyk7XG5cdFxuXHRsZXQgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vRElNRU5TSU9OU1xuXHRcdGxldCBoLCB3LCBtYXJnaW5ZLCBmb250U2l6ZSwgbGluZUhlaWdodDtcblx0XHRcblx0XHQvL3dpZHRoIChyZXNwb25zaXZlKVxuXHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodC04OC02MDsvL25hdkJhcnMgaGVpZ2h0ICoyICgyKjQ0KSArIHRleHRDb250YWluZXIgdG9wICogMiAoMiozMClcblx0XHRcdHcgPSA2NDA7XG5cdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdCB9IGVsc2Uge1xuXHRcdFx0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0XHQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0IGZvbnRTaXplID0gMTQ7XG5cdFx0IH1cblx0XHQgXG5cdFx0IC8vbWFyZ2luWSBpcyByZWxhdGl2ZSB0byBsaW5lLWhlaWdodFxuXHRcdCBsaW5lSGVpZ2h0ID0gZm9udFNpemUqMS41O1xuXHRcdCBtYXJnaW5ZID0gaCVsaW5lSGVpZ2h0IT09MCA/IGxpbmVIZWlnaHQqMisoKGglbGluZUhlaWdodCkvMikgOiBsaW5lSGVpZ2h0KjM7XG5cdFx0XG5cdFx0Ly9uZXcgQm9va1xuXHRcdGxldCBib29rID0gbmV3IFdlYkJvb2soYm9va0NvbnRhaW5lciwge1xuXHRcdFx0IGhlaWdodDogaCxcblx0XHRcdCBtYXhXaWR0aDogdyxcblx0XHRcdCBtYXJnaW5ZOiA0NX0pO1xuXHRcdFxuXHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDEzNjYpIHtcblx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0Ym9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI3RvYy1sYXJnZS1kZXZpY2UgZGl2XCIpLnN0eWxlLm1heEhlaWdodCA9IGgtMzAgKyBcInB4XCI7XG5cdFx0fVxuXHRcdFx0XHRcdFx0IFxuXHRcdC8vb24gcmVzaXplXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGV2ZW50ID0+IHtcblx0XHRcdGlmKHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCkge1xuXHRcdFx0XHRoID0gd2luZG93LmlubmVySGVpZ2h0LTg4LTYwO1xuXHRcdFx0XHR3ID0gNjQwO1xuXHRcdFx0XHRmb250U2l6ZSA9IDE2O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdFx0dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdFx0XHRmb250U2l6ZSA9IDE0O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZih3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMzY2KSB7XG5cdFx0XHRcdC8vVG9jLWxhcmdlIGhlaWdodFxuXHRcdFx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjdG9jLWxhcmdlLWRldmljZSBkaXZcIikuc3R5bGUubWF4SGVpZ2h0ID0gaC0zMCArIFwicHhcIjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9tYXJnaW5ZIGlzIHJlbGF0aXZlIHRvIGxpbmUtaGVpZ2h0XG5cdFx0XHRsaW5lSGVpZ2h0ID0gZm9udFNpemUqMS41O1xuXHRcdFx0bWFyZ2luWSA9IGglbGluZUhlaWdodCE9PTAgPyBsaW5lSGVpZ2h0KjIrKChoJWxpbmVIZWlnaHQpLzIpIDogbGluZUhlaWdodCozO1xuXHRcdFx0XG5cdFx0XHQvL3NldCBuZXcgZGltZW5zaW9uc1xuXHRcdFx0Ym9vay5zZXRIZWlnaHQoaCk7XG5cdFx0XHRib29rLnNldE1heFdpZHRoKHcpO1xuXHRcdFx0Ym9vay5zZXRNYXJnaW5ZKG1hcmdpblkpO1xuXHRcdFx0XG5cdFx0XHRpZihib29rLmNvbD09PXRydWUpIHtcblx0XHRcdFx0Ym9vay50b0Jvb2soKTtcblx0XHRcdH1cblx0XHRcblx0XHR9LCBmYWxzZSk7XG5cdFx0XG5cdFx0XG5cdFx0Ly9TV0lQRSAtIGZvcndhcmQsIGJhY2t3YXJkIG9uIHN3aXBlIGxlZnQgYW5kIHJpZ2h0IChoYW1tZXIuanMpXG5cdFx0Ly8gc21hbGwgZGV2aWNlc1xuXHRcdGxldCBzd2lwZUNvbnRhaW5lciA9IG5ldyBIYW1tZXIoYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS13Yi10ZXh0LWNvbnRhaW5lcl0nKSk7XG5cdFx0c3dpcGVDb250YWluZXIub24oXCJzd2lwZXJpZ2h0IHN3aXBlbGVmdFwiLCBldmVudCA9PiB7XG5cdFx0XHRpZihldmVudC50eXBlPT09XCJzd2lwZWxlZnRcIikge1xuXHRcdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC50eXBlPT09XCJzd2lwZXJpZ2h0XCIpIHtcblx0XHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vVE9VQ0hFUywgZm9yd2FyZCwgYmFja3dhcmRcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4ge1xuXHRcdFx0aWYoZXZlbnQud2hpY2g9PT0zOSB8fCBldmVudC53aGljaD09PTM0KSB7XG5cdFx0XHRcdFx0Ym9vay5mb3J3YXJkKCk7XG5cdFx0XHR9IGVsc2UgaWYoZXZlbnQud2hpY2g9PT0zNyB8fCBldmVudC53aGljaD09PTMzKSB7XG5cdFx0XHRcdGJvb2suYmFja3dhcmQoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM2KSB7XG5cdFx0XHRcdGJvb2sudG9GaXJzdFBhZ2UoKTtcblx0XHRcdH0gZWxzZSBpZihldmVudC53aGljaD09PTM1KSB7XG5cdFx0XHRcdGJvb2sudG9MYXN0UGFnZSgpO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHRcdFxuXHRcdC8vQlVUVE9OU1xuXHRcdC8vbGFyZ2Vcblx0XHRsZXQgZm9yd2FyZExhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjZm9yd2FyZC1sYXJnZScpO1xuXHRcdGxldCBiYWNrd2FyZExhcmdlID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYmFja3dhcmQtbGFyZ2UnKTtcblx0XHRcblx0XHRmb3J3YXJkTGFyZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRib29rLmZvcndhcmQoKTtcblx0XHR9LCBmYWxzZSk7XG5cblx0XHRiYWNrd2FyZExhcmdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0Ym9vay5iYWNrd2FyZCgpO1xuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHRcblx0XHQvL1RPQ1x0XHRcblx0XHRsZXQgdG9jID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjdG9jJyk7XG5cdFx0bGV0IG9wZW5Ub2MgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcGVuLXRvYycpO1xuXHRcdFxuXHRcdGZvcihsZXQgaT0wOyBpPG9wZW5Ub2MubGVuZ3RoOyBpKyspIHtcblx0XHRcdG9wZW5Ub2NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG5cdFx0XHRcdHRvYy5jbGFzc05hbWUgPSB0b2MuY2xhc3NOYW1lID09PSBcIm9wZW5cIiA/IFwiXCIgOiBcIm9wZW5cIjtcblx0XHRcdH0sIGZhbHNlKTtcblx0XHR9XG5cdFx0XG5cdFx0dG9jLnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtdG9jXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dG9jLmNsYXNzTmFtZSA9IFwiXCI7XG5cdFx0fSwgZmFsc2UpO1xuXHRcdFxuXHRcdC8vQ2xvc2UgdG9jIG9uIGNsaWNrXG5cdFx0bGV0IHRvY0xpbmtzID0gdG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTtcblx0XHRmb3IobGV0IGk9MDsgaTx0b2NMaW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dG9jTGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRvYy5jbGFzc05hbWUgPSBcIlwiO1xuXHRcdFx0fSwgZmFsc2UpO1xuXHRcdH1cblx0XHRcblx0XHRcblx0XHQvL1RPQy1MQVJHRS1ERVZJQ0Vcblx0XHRsZXQgdG9jTGFyZ2UgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2MtbGFyZ2UtZGV2aWNlJyk7XG5cdFx0bGV0IHN3aW5nQ29udGFpbmVyID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjc3dpbmctY29udGFpbmVyJyk7XG5cdFx0bGV0IHN3aW5nQmFyID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjc3dpbmctYmFyJyk7XG5cdFx0Ly9Ub2dnbGUgdG9jLWxhcmdlLWRldmljZSwgc3dpbmctY29udGFpbmVyLCBzd2luZy1iYXJcblx0XHRib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyN0b2dnbGUtdG9jLWxhcmdlLWRldmljZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0aWYoIXRvY0xhcmdlLmNsYXNzTmFtZS5tYXRjaCgvb3Blbi8pKSB7XG5cdFx0XHRcdHRvY0xhcmdlLmNsYXNzTmFtZSArPSBcIiBvcGVuXCI7XG5cdFx0XHRcdHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZSArPSBcIiBsZWZ0XCI7XG5cdFx0XHRcdHN3aW5nQmFyLmNsYXNzTmFtZSArPSBcIiBsZWZ0XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0b2NMYXJnZS5jbGFzc05hbWUgPSB0b2NMYXJnZS5jbGFzc05hbWUucmVwbGFjZSgvIG9wZW4vLCcnKTtcblx0XHRcdFx0c3dpbmdDb250YWluZXIuY2xhc3NOYW1lID0gc3dpbmdDb250YWluZXIuY2xhc3NOYW1lLnJlcGxhY2UoLyBsZWZ0LywnJyk7XG5cdFx0XHRcdHN3aW5nQmFyLmNsYXNzTmFtZSA9IHN3aW5nQ29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKC8gbGVmdC8sJycpO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblx0XHRcblx0XHQvL2VuZCBsb2FkZXJcblx0XHRib29rQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdzaG93Jztcblx0XG5cdH1cblx0XG5cdGxldCB1cmwgPSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoLyMvLCcnKTtcblx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogdXJsIH07XG5cdGxldCB0ZXh0ID0gYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS13Yi10ZXh0XScpO1xuXHRcblx0dXRpbHMuYWpheChvcHRpb25zKS50aGVuKCByZXNwb25zZSA9PiB7XG5cdFx0bGV0IG1ldGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKS5ib29rO1xuXHRcdGxldCBjb250ZW50ID0gbWV0YS5hdXRob3IgKyAnJmVuc3A7Jm1kYXNoOyZlbnNwOycgKyBtZXRhLnRpdGxlO1xuXHRcdHV0aWxzLnNldEhUTUwoXCIjdG9wLXRpdGxlXCIsIGNvbnRlbnQpO1xuXHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLXRpdGxlIHA6bnRoLWNoaWxkKDEpXCIsIG1ldGEuYXV0aG9yKTtcblx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy10aXRsZSBwOm50aC1jaGlsZCgyKVwiLCBtZXRhLnRpdGxlKTtcblx0XHR1dGlscy5zZXRIVE1MKFwiI3RvYy1sYXJnZS1kZXZpY2UgcDpudGgtY2hpbGQoMSlcIiwgbWV0YS5hdXRob3IpO1xuXHRcdHV0aWxzLnNldEhUTUwoXCIjdG9jLWxhcmdlLWRldmljZSBwOm50aC1jaGlsZCgyKVwiLCBtZXRhLnRpdGxlKTtcblx0XHRyZXR1cm4gdXRpbHMuYWpheCh7IG1ldGhvZDogJ0dFVCcsIHVybDogbWV0YS5wYXRoICsgJy5odG1sJyB9KVxuXHR9KS50aGVuKCBib29rID0+IHtcblx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0ZGl2LmlubmVySFRNTCA9IGJvb2s7XG5cdFx0dGV4dC5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdGluaXQoKTtcblx0fSlcblx0XG5cbn07XG4iLCIvL2hvbWUuanNcbmNvbnN0IGhvbWUgPSBmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQvL3Jvb3RFbGVtZW50XG5cdC8vbGV0IGJvb2tzO1xuXHRjb25zdCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNob21lLmNvbnRlbnRcIik7XG5cdHczLmhpZGUoXCIjYm9va3MtbGlzdFwiKTtcblx0Ly9nZXQgYm9va3Ncblx0bGV0IG9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogJy9ib29rcy8nIH07XG5cdHV0aWxzLmFqYXgob3B0aW9ucylcblx0LnRoZW4oIHJlc3BvbnNlID0+IHtcblx0XHRsZXQgYm9va3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcblx0XHR3My5kaXNwbGF5T2JqZWN0KCdib29rcy1saXN0JywgYm9va3MpO1xuXHRcdHczLnNob3coXCIjYm9va3MtbGlzdFwiKTtcblx0fSk7XG5cbn07XG5cbiIsIi8vdXRpbHMuanNcbmNvbnN0IHV0aWxzID0ge1xuXHQvL0FKQVggcmVxdWVzdHNcblx0YWpheDogb3B0aW9ucyA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoIChyZXNvbHZlLHJlamVjdCkgPT4ge1xuXHRcdFx0bGV0IG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kO1xuXHRcdFx0bGV0IHVybCA9IG9wdGlvbnMudXJsO1xuXHRcdFx0bGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG5cdFx0XHRsZXQgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0eG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRcdGlmKHhtbGh0dHAucmVhZHlTdGF0ZT09PTQpIHtcblx0XHRcdFx0XHRpZih4bWxodHRwLnN0YXR1cz09PTIwMCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChFcnJvcih4bWxodHRwLnN0YXR1c1RleHQpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0eG1saHR0cC5vcGVuKG1ldGhvZCx1cmwsdHJ1ZSk7XG5cdFx0XHR4bWxodHRwLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXHRcdFx0aWYoZGF0YSkge1xuXHRcdFx0XHR4bWxodHRwLnNlbmQoZGF0YSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR4bWxodHRwLnNlbmQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fSxcblx0XHRcblx0Ly9nZXQgSFRNTCBmcmFnbWVudCwgY29udGFpbmVyLCBjb250cm9sbGVyXHRcblx0Z2V0RnJhZ21lbnQ6ICh0ZW1wbGF0ZSwgY29udGFpbmVyLCBjb250cm9sbGVyKSA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdGxldCBvcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHRlbXBsYXRlIH1cblx0XHRyZXR1cm4gdXRpbHMuYWpheChvcHRpb25zKS50aGVuKCByZXNwb25zZSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IHJlc3BvbnNlO1xuXHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcblx0XHRcdFx0cmVzb2x2ZShjb250cm9sbGVyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9LFxuXHRcblx0Ly9hY3RpdmUgbGluayA6IGNoYW5nZSBjbGFzc1xuXHRhY3RpdmVMaW5rOiAoKSA9PiB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdGxldCByb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYXYtYmFyLXRvcFwiKTtcblx0XHRsZXQgbGlua3MgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoXCJhXCIpO1xuXHRcdGZvcihsZXQgaT0wOyBpPGxpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZihsb2NhdGlvbi5ocmVmPT09bGlua3NbaV0uaHJlZikge1xuXHRcdFx0XHR3My5hZGRDbGFzcyhcIiNcIiArIGxpbmtzW2ldLmlkLCBcInczLXRleHQtYmxhY2tcIik7XG5cdFx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ncmF5XCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dzMuYWRkQ2xhc3MoXCIjXCIgKyBsaW5rc1tpXS5pZCwgXCJ3My10ZXh0LWdyYXlcIik7XG5cdFx0XHRcdHczLnJlbW92ZUNsYXNzKFwiI1wiICsgbGlua3NbaV0uaWQsIFwidzMtdGV4dC1ibGFja1wiKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYobG9jYXRpb24uaGFzaC5tYXRjaCgvI1xcL2FkbWluLykpIHtcblx0XHRcdFx0aWYobGlua3NbaV0uaHJlZi5tYXRjaCgvI1xcL2FkbWluLykpIHtcblx0XHRcdFx0XHRsaW5rc1tpXS5jbGFzc05hbWUgPSBcImNsaWNrZWRcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaW5rc1tpXS5jbGFzc05hbWUgPSBcIlwiOyBcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0XG5cdHNldEhUTUw6IChzZWxlY3Rvcixjb250ZW50KSA9PiB7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikuaW5uZXJIVE1MID0gY29udGVudDtcblx0fVxufVxuIl19
