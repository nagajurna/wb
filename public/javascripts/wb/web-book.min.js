"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),WebBook=function(){function t(e,i){_classCallCheck(this,t),this._bookContainer=e,this._textContainer=e.querySelector("[data-wb-text-container]"),this._text=e.querySelector("[data-wb-text]"),this._height=i.height,this._width=i.maxWidth,this._marginX=void 0===i.marginX?35:i.marginX,this._marginY=void 0===i.marginY?20:i.marginY,this._position=0,this.col=!0,this._bookmark=null,this._containerWidth=null,this._lastBreak=document.createElement("div"),this._lastBreak.className="wb-text-break",this._text.appendChild(this._lastBreak),this._lastElement=document.createElement("div"),this._lastElement.innerHTML="&nbsp;",this._lastElement.className="wb-section wb-no-toc",this._text.appendChild(this._lastElement),this._sections=this._text.querySelectorAll(".wb-section"),this._tocSections=[];for(var s=0;s<this._sections.length;s++)this._sections[s].className.match(/wb-no-toc/)||this._tocSections.push(this._sections[s]);this._breaks=this._text.querySelectorAll(".wb-text-break"),this._elements=this._text.querySelectorAll(":not(.wb-text-break)"),this._tocs=this._bookContainer.querySelectorAll("[data-wb-toc]"),this.getToc(),this._currentPages=this._bookContainer.querySelectorAll(".wb-current-page"),this._totalPages=this._bookContainer.querySelectorAll(".wb-total-pages"),this._currentTotalPages=this._bookContainer.querySelectorAll(".wb-currentByTotal-pages"),this._elPageNumbers=this._bookContainer.querySelectorAll("[data-wb-element-page-number]"),this._sectionTitles=this._bookContainer.querySelectorAll(".wb-current-section-title"),this._startPage=null,this.setLinks(),"WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style?this.toBook():this.toScroll()}return _createClass(t,[{key:"toBook",value:function(){if("webkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style){this.col=!0;var t=this._textContainer.style,e=this._text.style;t.boxSizing="border-box",t.WebkitBoxSizing="border-box",t.overflow="hidden",t.position="relative",t.padding="0px",t.height=this.getHeight()+"px",t.maxWidth=this.getMaxWidth()+"px",this._containerWidth=this._textContainer.clientWidth;for(var i=0;i<this._sections.length;i++)"10%"!==this._sections[i].style.minHeight&&(this._sections[i].style.minHeight="10%");for(var s=0;s<this._breaks.length;s++)"300%"!==this._breaks[s].style.marginBottom&&(this._breaks[s].style.marginBottom="300%");"300%"!==this._lastElement.style.marginBottom&&(this._lastElement.style.marginBottom="300%"),e.boxSizing="border-box",e.WebkitBoxSizing="border-box",e.position="absolute",e.left=0,e.top=0,e.height="100%",e.width="100%",e.paddingRight=this.getMarginX()+"px",e.paddingLeft=this.getMarginX()+"px",e.paddingTop=this.getMarginY()+"px",e.paddingBottom=this.getMarginY()+"px",e.MozColumnFill="auto",e.columnFill="auto",e.WebkitColumnWidth=this._containerWidth+"px",e.MozColumnWidth=this._containerWidth+"px",e.columnWidth=this._containerWidth+"px",e.MozColumnGap=2*this.getMarginX()+"px",e.webkitColumnGap=2*this.getMarginX()+"px",e.columnGap=2*this.getMarginX()+"px",this._bookmark&&(this.goToBookmark(this._bookmark),this._position=Math.round($(this._text).position().left)),this.refresh()}}},{key:"toScroll",value:function(){this.col=!1;var t=this._container.style,e=this._text.style;t.height="auto",t.maxWidth=this.getMaxWidth()+"px",t.overflow="visible",e.position="static",e.height="auto",t.paddingRight=this.getMarginX()+"px",t.paddingLeft=this.getMarginX()+"px",t.paddingTop=this.getMarginY()+"px",t.paddingBottom=this.getMarginY()+"px",("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style)&&(e.webkitColumns="auto 1",e.MozColumns="auto 1",e.columns="auto 1");for(var i=0;i<this._sections.length;i++)this._sections[i].style.minHeight="0";for(var s=0;s<this._breaks.length;s++)this._breaks[s].style.marginBottom="0";this._lastElement.style.marginBottom="0px",this.refresh()}},{key:"setMaxWidth",value:function(t){return this._width=t,this}},{key:"getMaxWidth",value:function(){return this._width}},{key:"setHeight",value:function(t){return this._height=t,this}},{key:"getHeight",value:function(){return this._height}},{key:"setMarginX",value:function(t){return this._marginX=t,this}},{key:"getMarginX",value:function(){return this._marginX}},{key:"setMarginY",value:function(t){return this._marginY=t,this}},{key:"getMarginY",value:function(){return this._marginY}},{key:"setLinks",value:function(){for(var t=this,e=this._bookContainer.querySelectorAll(".wb-link"),i=0;i<e.length;i++)e[i].addEventListener("click",function(e){if(!0===t.col){e.preventDefault();var i=e.currentTarget.getAttribute("href").replace(/^#/,"");t.goToPage(t.elementPageNumber(i))}},!1)}},{key:"forward",value:function(){$(this._lastElement).position().left+this._position>this._containerWidth+this.getMarginX()&&(this._position=$(this._text).position().left,this._position-=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"backward",value:function(){this._position<0&&(this._position=$(this._text).position().left,this._position+=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"toFirstPage",value:function(){this._position<0&&(this._position=0,this._text.style.left=this._position+"px",this.refresh())}},{key:"toLastPage",value:function(){$(this._lastElement).position().left+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._containerWidth+this.getMarginX()-$(this._lastElement).position().left,this._text.style.left=this._position+"px",this.refresh())}},{key:"getPageStart",value:function(){for(var t=void 0,e=void 0,i=0;i<this._sections.length-1;i++)if(this._sections[i].className.match(/wb-no-page/))t=i;else if(void 0!==t&&void 0===e){e=i;var s=this._sections[e],n=$(s).position().left-this.getMarginX();n=n%this._containerWidth!=0?n-n%this._containerWidth:n,this._startPage=n/this._containerWidth}}},{key:"checkFirstPage",value:function(){return 0===this._position}},{key:"getPageNumber",value:function(){var t=Math.abs(Math.floor(this._position/this._containerWidth))+1;return t-=this._startPage}},{key:"getTotalPages",value:function(){var t=Math.floor($(this._lastElement).position().left/this._containerWidth);return t-=this._startPage}},{key:"goToPage",value:function(t){t=(t=t<1-this._startPage?1-this._startPage:t)>this.getTotalPages()?this.getTotalPages():t,t+=this._startPage;var e=this._containerWidth*(t-1);this._text.style.left=-e+"px",this._position=Math.round($(this._text).position().left),this.refresh()}},{key:"elementPageNumber",value:function(t){var e=this._text.querySelector("#"+t),i=Math.round($(e).position().left)-this.getMarginX(),s=(i=i%this._containerWidth!=0?i-i%this._containerWidth:i)/this._containerWidth+1;return s-=this._startPage}},{key:"getSectionTitle",value:function(){for(var t=-this._position,e=void 0,i=1;i<this._sections.length;i++)if($(this._sections[i]).position().left-this._containerWidth>=t){var s=this._sections[i-1].id;e=void 0!==s&&this.getPageNumber()===this.elementPageNumber(s)?"":this._sections[i-1].getAttribute("data-wb-title")?this._sections[i-1].getAttribute("data-wb-title"):this._sections[i-1].title;break}return e}},{key:"getToc",value:function(){if(0!==this._tocs.length)for(var t=0;t<this._tocs.length;t++){var e=this._tocs[t];if(e.getAttribute("data-wb-toc")){var i=document.createElement("p");i.setAttribute("class","wb-toc-title"),i.innerHTML=e.getAttribute("data-wb-toc"),e.appendChild(i)}var s=document.createElement("ul");s.setAttribute("class","wb-toc-list");for(var n=0;n<this._sections.length;n++){var o=this._sections[n];if(!o.className.match(/wb-no-toc/)){var a=document.createElement("li");if(a.setAttribute("class","wb-toc-item"),o.className.match(/wb-toc-no-page-number/)){var r=document.createElement("span");r.setAttribute("class","wb-toc-item-title"),r.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,a.appendChild(r)}else{var h=document.createElement("a");h.setAttribute("href","#"+o.id),h.setAttribute("class","wb-link"),a.appendChild(h);var l=document.createElement("span");l.setAttribute("class","wb-toc-item-title"),l.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,h.appendChild(l);var c=document.createElement("span");c.setAttribute("class","wb-toc-item-page-number"),c.setAttribute("data-wb-element-page-number",o.id),h.appendChild(c)}s.appendChild(a)}}e.appendChild(s)}}},{key:"getTocCurrentSection",value:function(){var t=-this._position;this._tocSections.push(this._lastElement),this._sections[0].className.match(/wb-no-toc/)&&this._tocSections.unshift(this._sections[0]);for(var e=0;e<this._tocs.length;e++)for(var i=this._tocs[e],s=1;s<this._tocSections.length;s++)if($(this._tocSections[s]).position().left-this._containerWidth>=t){for(var n=this._tocSections[s-1].id,o=i.querySelectorAll("a"),a=0;a<o.length;a++){var r=o[a];r.getAttribute("href").replace(/^#/,"")===n?r.parentElement.className.match(/current/)||(r.parentElement.className+=" current"):r.parentElement.className.match(/current/)&&(r.parentElement.className=r.parentElement.className.replace(/ current/,""))}break}this._tocSections.pop(this._lastElement),this._sections[0].className.match(/wb-no-toc/)&&this._tocSections.shift(this._sections[0])}},{key:"insertBookmark",value:function(){for(var t=null,e=0;e<this._elements.length;e++){var i=Math.round($(this._elements[e]).position().left)-this.getMarginX();if((i=i%this._containerWidth!=0?i-i%this._containerWidth:i)===-this._position){t=e;break}if(i>-this._position){t=e-1;break}}this._bookmark=t}},{key:"goToBookmark",value:function(t){var e=this._elements[this._bookmark],i=Math.round($(e).position().left)-this.getMarginX();i=i%this._containerWidth!=0?i-i%this._containerWidth:i,this._text.style.left=-i+"px",this._position=$(this._text).position().left,this.refresh()}},{key:"refresh",value:function(){if(this.insertBookmark(),!1===this.col){for(var t=0;t<this._currentPages.length;t++)this._currentPages[t].innerHTML="";for(var e=0;e<this._totalPages.length;e++)this._totalPages[e].innerHTML="";for(var i=0;i<this._currentTotalPages.length;i++)this._currentTotalPages[i].innerHTML="";for(var s=0;s<this._elPageNumbers.length;s++)this._elPageNumbers[s].innerHTML="";for(var n=0;n<this._sectionTitles.length;n++)this._sectionTitles[n].innerHTML=""}else{this.getPageStart(),0!==this._tocs.length&&this.getTocCurrentSection();for(var o=0;o<this._currentPages.length;o++)this._currentPages[o].innerHTML!=this.getPageNumber()&&(this._currentPages[o].innerHTML=this.getPageNumber());for(var a=0;a<this._totalPages.length;a++)this._totalPages[a].innerHTML!=this.getPageNumber()&&(this._totalPages[a].innerHTML=this.getPageNumber());for(var r=0;r<this._currentTotalPages.length;r++)this.getPageNumber()<1?this._currentTotalPages[r].innerHTML="":this._currentTotalPages[r].innerHTML!==this.getPageNumber()+"/"+this.getTotalPages()&&(this._currentTotalPages[r].innerHTML=this.getPageNumber()+"/"+this.getTotalPages());for(var h=0;h<this._elPageNumbers.length;h++){var l=this._elPageNumbers[h].getAttribute("data-wb-element-page-number"),c=this.elementPageNumber(l);c<1?this._elPageNumbers[h].innerHTML="":this._elPageNumbers[h].innerHTML!=c&&(this._elPageNumbers[h].innerHTML=c)}for(var g=0;g<this._sectionTitles.length;g++)this._sectionTitles[g].innerHTML!=this.getSectionTitle()&&(this._sectionTitles[g].innerHTML=this.getSectionTitle())}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi1ib29rLmpzIl0sIm5hbWVzIjpbIldlYkJvb2siLCJib29rQ29udGFpbmVyIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYm9va0NvbnRhaW5lciIsIl90ZXh0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIl90ZXh0IiwiX2hlaWdodCIsIl93aWR0aCIsIm1heFdpZHRoIiwiX21hcmdpblgiLCJ1bmRlZmluZWQiLCJtYXJnaW5YIiwiX21hcmdpblkiLCJtYXJnaW5ZIiwiX2Jvb2ttYXJrIiwiaGVpZ2h0IiwiYXBwZW5kQ2hpbGQiLCJfbGFzdEJyZWFrIiwiY29sIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiX2NvbnRhaW5lcldpZHRoIiwiX2xhc3RFbGVtZW50IiwiY2xhc3NOYW1lIiwicXVlcnlTZWxlY3RvckFsbCIsIl90b2NTZWN0aW9ucyIsIm1hdGNoIiwiX3NlY3Rpb25zIiwiaSIsIl9icmVha3MiLCJfZWxlbWVudHMiLCJfdG9jcyIsImdldFRvYyIsIl90b3RhbFBhZ2VzIiwiX2VsUGFnZU51bWJlcnMiLCJzZXRMaW5rcyIsImJvZHkiLCJzdHlsZSIsInRvQm9vayIsInRvU2Nyb2xsIiwiY3MiLCJ0cyIsImJveFNpemluZyIsIldlYmtpdEJveFNpemluZyIsIm92ZXJmbG93IiwicG9zaXRpb24iLCJwYWRkaW5nIiwiZ2V0SGVpZ2h0IiwiZ2V0TWF4V2lkdGgiLCJjbGllbnRXaWR0aCIsImxlbmd0aCIsIm1pbkhlaWdodCIsIm1hcmdpbkJvdHRvbSIsImxlZnQiLCJ0b3AiLCJnZXRNYXJnaW5YIiwiZ2V0TWFyZ2luWSIsIndlYmtpdENvbHVtbkdhcCIsImNvbHVtbkdhcCIsIl9wb3NpdGlvbiIsIk1hdGgiLCJyb3VuZCIsIiQiLCJyZWZyZXNoIiwiX2NvbnRhaW5lciIsInBhZGRpbmdCb3R0b20iLCJwYWRkaW5nUmlnaHQiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdUb3AiLCJNb3pDb2x1bW5zIiwiY29sdW1ucyIsInciLCJoIiwibSIsIl90aGlzIiwibGlua3MiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaWQiLCJjdXJyZW50VGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsImdvVG9QYWdlIiwiZWxlbWVudFBhZ2VOdW1iZXIiLCJpbmRleCIsInN0YXJ0SW5kZXgiLCJlbCIsImVsUG9zaXRpb24iLCJfc3RhcnRQYWdlIiwicGFnZU51bWJlciIsImFicyIsInRvdGFsUGFnZXMiLCJudW1iZXIiLCJnZXRUb3RhbFBhZ2VzIiwiY2hlY2siLCJmbG9vciIsImVsUGFnZU51bWJlciIsInRpdGxlIiwiZ2V0UGFnZU51bWJlciIsInRvYyIsInRvY1RpdGxlIiwibGlzdCIsImoiLCJzZWN0aW9uIiwiaXRlbSIsInNldEF0dHJpYnV0ZSIsImxpbmsiLCJwYWdlIiwicGFyZW50RWxlbWVudCIsInBvcCIsInNoaWZ0IiwiYm9va21hcmsiLCJlbGVtZW50IiwiaW5zZXJ0Qm9va21hcmsiLCJfY3VycmVudFRvdGFsUGFnZXMiLCJfc2VjdGlvblRpdGxlcyIsImdldFRvY0N1cnJlbnRTZWN0aW9uIiwiX2N1cnJlbnRQYWdlcyIsImdldFBhZ2VTdGFydCIsImdldFNlY3Rpb25UaXRsZSJdLCJtYXBwaW5ncyI6IjZYQUFNQSxtQkFDTCxTQUFBQSxFQUFZQyxFQUFlQyxHQUFTQyxnQkFBQUMsS0FBQUosR0FFbkNJLEtBQUtDLGVBQWlCSixFQUN0QkcsS0FBS0UsZUFBaUJMLEVBQWNNLGNBQWMsNEJBQ2xESCxLQUFLSSxNQUFRUCxFQUFjTSxjQUFjLGtCQUoxQ0gsS0FBQUssUUFBQVAsRUFBWUQsT0FBd0JHLEtBQUFNLE9BQUFSLEVBQUFTLFNBUW5DUCxLQUFLUSxjQUE2QkMsSUFBbEJYLEVBQVFZLFFBQXNCLEdBQUtaLEVBQVFZLFFBUDNEVixLQUFBVyxjQUFBRixJQUFBWCxFQUFBYyxRQUFBLEdBQUFkLEVBQUFjLFFBRUFaLEtBQUtFLFVBQUFBLEVBQ0xGLEtBQUtJ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LFdBQU9LLEtBQUFBLGtCQUNuQmpDLEtBQUtpQyxZQUFZTCxHQUFqQlIsVUFBQXBCLEtBQUFtRyxpQkFJQSxJQUFBLElBQUtnQixFQUFBQSxFQUFBQSxFQUFBQSxLQUFBQSxtQkFBc0IvRixPQUEzQlEsSUFDQTVCLEtBQUFtRyxnQkFBQSxFQWdDQ25HLEtBQUttSCxtQkFBbUJ2RixHQUFHUixVQUFZLEdBOUJqQ1EsS0FBRXVGLG1CQUFVakYsR0FBQUEsWUFBcEJsQyxLQUEyQzRCLGdCQUFLLElBQUE1QixLQUFBOEYsa0JBQy9DOUYsS0FBS2tDLG1CQUFMTixHQUF1QlIsVUFBdkJwQixLQUFBbUcsZ0JBQUEsSUFBQW5HLEtBQUE4RixpQkFJQSxJQUFBLElBQUtzQixFQUFBQSxFQUFBQSxFQUFBQSxLQUFBQSxlQUFrQmhHLE9BQXZCUSxJQUFBLENBQ0EsSUFBQW1ELEVBQUEvRSxLQUFBa0MsZUFBQU4sR0FBQXFELGFBQUEsK0JBcEJGUyxFQXNCTzFGLEtBQUFvRixrQkFBQUwsR0ErQkZXLEVBQWEsRUE3QmpCMUYsS0FBS3VILGVBQUwzRixHQUFBUixVQUFBLEdBK0JXcEIsS0FBS2tDLGVBQWVOLEdBQUdSLFdBQVdzRSxJQTdCN0MxRixLQUFHa0MsZUFBQU4sR0FBQVIsVUFBdUJzRSxHQUkxQixJQUFBLElBQUk5RCxFQUFJQSxFQUFBQSxFQUFBQSxLQUFLQSxlQUFPMEYsT0FBTDFGLElBQ2Q1QixLQUFHb0gsZUFBQXhGLEdBQW1CQSxXQUFHUixLQUFXb0csb0JBQ25DeEgsS0FBQW9ILGVBQW1CeEYsR0FBbkJSLFVBQUFwQixLQUFrQ3dIIiwiZmlsZSI6IndlYi1ib29rLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFdlYkJvb2sge1xuXHRjb25zdHJ1Y3Rvcihib29rQ29udGFpbmVyLCBvcHRpb25zKSB7XG5cdFx0Ly9jb250YWluZXJzXG5cdFx0dGhpcy5fYm9va0NvbnRhaW5lciA9IGJvb2tDb250YWluZXI7XG5cdFx0dGhpcy5fdGV4dENvbnRhaW5lciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dC1jb250YWluZXJdJyk7XG5cdFx0dGhpcy5fdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XHQvL29wdGlvbnNcblx0XHR0aGlzLl9oZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcblx0XHR0aGlzLl93aWR0aCA9IG9wdGlvbnMubWF4V2lkdGg7XG5cdFx0dGhpcy5fbWFyZ2luWCA9IG9wdGlvbnMubWFyZ2luWD09PXVuZGVmaW5lZCA/IDM1IDogb3B0aW9ucy5tYXJnaW5YO1xuXHRcdHRoaXMuX21hcmdpblkgPSBvcHRpb25zLm1hcmdpblk9PT11bmRlZmluZWQgPyAyMCA6IG9wdGlvbnMubWFyZ2luWTtcblx0XHQvL2luaXQgcG9zaXRpb24sIGNvbCAsY29udGFpbmVyV2lkdGggYW5kIGJvb2ttYXJrXG5cdFx0dGhpcy5fcG9zaXRpb24gPSAwO1xuXHRcdHRoaXMuY29sID0gdHJ1ZTsvL2RlZmF1bHQgdHJ1ZSA9IHRvQm9vaygpXG5cdFx0dGhpcy5fYm9va21hcmsgPSBudWxsO1xuXHRcdHRoaXMuX2NvbnRhaW5lcldpZHRoID0gbnVsbDtcblx0XHQvL3RoaXMubGFzdEJyZWFrIGlzIHVzZWQgYXMgYSBnaG9zdCBwYWdlXG5cdFx0dGhpcy5fbGFzdEJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLl9sYXN0QnJlYWsuY2xhc3NOYW1lID0gXCJ3Yi10ZXh0LWJyZWFrXCI7XG5cdFx0dGhpcy5fdGV4dC5hcHBlbmRDaGlsZCh0aGlzLl9sYXN0QnJlYWspO1xuXHRcdC8vdGhpcy5fbGFzdEVsZW1lbnQgaXMgdXNlZCBhcyBsYW5kbWFya1xuXHRcdHRoaXMuX2xhc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5pbm5lckhUTUwgPSBcIiZuYnNwO1wiOy8vbm90IGVtcHR5IChmb3IgbW96Q29sdW1ucylcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5jbGFzc05hbWUgPSBcIndiLXNlY3Rpb24gd2Itbm8tdG9jXCI7XG5cdFx0dGhpcy5fdGV4dC5hcHBlbmRDaGlsZCh0aGlzLl9sYXN0RWxlbWVudCk7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHRoaXMuX3NlY3Rpb25zID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCcud2Itc2VjdGlvbicpO1xuXHRcdC8vc2VjdGlvbnMgd2l0aG91dCB3Yi1uby10b2Ncblx0XHR0aGlzLl90b2NTZWN0aW9ucyA9IFtdXG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKCF0aGlzLl9zZWN0aW9uc1tpXS5jbGFzc05hbWUubWF0Y2goL3diLW5vLXRvYy8pKSB7XG5cdFx0XHRcdHRoaXMuX3RvY1NlY3Rpb25zLnB1c2godGhpcy5fc2VjdGlvbnNbaV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvL2JyZWFrc1xuXHRcdHRoaXMuX2JyZWFrcyA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvckFsbCgnLndiLXRleHQtYnJlYWsnKTtcblx0XHQvL2VsZW1lbnRzIDogc2VsZWN0IGFsbCBlbGVtZW50cyBidXQgLnRleHQtYnJlYWtzIChmb3IgYm9va21hcmtzKVxuXHRcdHRoaXMuX2VsZW1lbnRzID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCc6bm90KC53Yi10ZXh0LWJyZWFrKScpO1xuXHRcdC8vdG9jXG5cdFx0dGhpcy5fdG9jcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtd2ItdG9jXScpO1xuXHRcdC8vc2V0VG9jIGJlZm9yZSBxdWVyeWluZyB0aGlzLmVsUGFnZU51bWJlcnNcblx0XHR0aGlzLmdldFRvYygpO1xuXHRcdC8vaW5mb3MgY29udGFpbmVyc1xuXHRcdHRoaXMuX2N1cnJlbnRQYWdlcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWN1cnJlbnQtcGFnZScpO1xuXHRcdHRoaXMuX3RvdGFsUGFnZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi10b3RhbC1wYWdlcycpO1xuXHRcdHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItY3VycmVudEJ5VG90YWwtcGFnZXMnKTtcblx0XHR0aGlzLl9lbFBhZ2VOdW1iZXJzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS13Yi1lbGVtZW50LXBhZ2UtbnVtYmVyXScpO1xuXHRcdHRoaXMuX3NlY3Rpb25UaXRsZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1jdXJyZW50LXNlY3Rpb24tdGl0bGUnKTtcblx0XHQvL3N0YXJ0IHBhZ2luYXRpb25cblx0XHR0aGlzLl9zdGFydFBhZ2UgPSBudWxsO1xuXHRcdC8vbGlua3MgOiByZXBsYWNlIGRlZmF1bHQgd2l0aCBnb1RvUGFnZVxuXHRcdC8vbGV0IGxpbmtzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItbGluaycpO1xuXHRcdFx0XHRcblx0XHQvL2ZvcihsZXQgaT0wOyBpPGxpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHQvL2xpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0XHRcdC8vaWYodGhpcy5jb2w9PT10cnVlKSB7XG5cdFx0XHRcdFx0Ly9lLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0Ly9sZXQgaHJlZiA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0XHRcdFx0XHQvL2xldCBpZCA9IGhyZWYucmVwbGFjZSgvXiMvLFwiXCIpO1xuXHRcdFx0XHRcdC8vdGhpcy5nb1RvUGFnZSh0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKSk7XG5cdFx0XHRcdC8vfVxuXHRcdFx0Ly99LCBmYWxzZSlcblx0XHQvL31cblx0XHRcblx0XHR0aGlzLnNldExpbmtzKCk7XG5cdFx0XG5cdFx0XG5cdFx0aWYoJ1dlYmtpdENvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdNb3pDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnY29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcblx0XHRcdHRoaXMudG9Cb29rKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudG9TY3JvbGwoKTtcblx0XHR9XG5cblx0fVxuXG5cdHRvQm9vaygpIHtcblx0XHRpZignd2Via2l0Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ01vekNvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdjb2x1bW5XaWR0aCcgIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRcblx0XHRcdHRoaXMuY29sID0gdHJ1ZTtcblx0XHRcdGxldCBjcyA9IHRoaXMuX3RleHRDb250YWluZXIuc3R5bGU7XG5cdFx0XHRsZXQgdHMgPSB0aGlzLl90ZXh0LnN0eWxlO1xuXHRcdFx0Ly90ZXh0LWNvbnRhaW5lclxuXHRcdFx0Y3MuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG5cdFx0XHRjcy5XZWJraXRCb3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdGNzLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRcdGNzLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdFx0Y3MucGFkZGluZyA9IFwiMHB4XCI7XG5cdFx0XHRjcy5oZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpICsgXCJweFwiO1xuXHRcdFx0Y3MubWF4V2lkdGggPSB0aGlzLmdldE1heFdpZHRoKCkgKyBcInB4XCI7Ly9tYXhXaWR0aCA6IHJlc3BvbnNpdmVcblx0XHRcdHRoaXMuX2NvbnRhaW5lcldpZHRoID0gdGhpcy5fdGV4dENvbnRhaW5lci5jbGllbnRXaWR0aDsvL3Jlc3BvbnNpdmVcblx0XHRcdFxuXHRcdFx0Ly9zZWN0aW9uc1xuXHRcdFx0Ly9oYWNrIGZpcmVmb3ggKHBvdXIgb2Zmc2V0TGVmdCkgOiBtaW5IZWlnaHQgPSAxMCVcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLnN0eWxlLm1pbkhlaWdodCE9PVwiMTAlXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9zZWN0aW9uc1tpXS5zdHlsZS5taW5IZWlnaHQgPSBcIjEwJVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvL21hbnVhbCBicmVha3Ncblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2JyZWFrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tIT09XCIzMDAlXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tID0gXCIzMDAlXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vbGFzdCBlbGVtZW50XG5cdFx0XHRpZih0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20hPT1cIjMwMCVcIikge1xuXHRcdFx0XHR0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjMwMCVcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly90ZXh0XG5cdFx0XHR0cy5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdHRzLldlYmtpdEJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuXHRcdFx0dHMucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHR0cy5sZWZ0ID0gMDtcblx0XHRcdHRzLnRvcCA9IDA7XHRcblx0XHRcdHRzLmhlaWdodCA9IFwiMTAwJVwiO1xuXHRcdFx0dHMud2lkdGggPSBcIjEwMCVcIjtcblx0XHRcdHRzLnBhZGRpbmdSaWdodCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdFx0dHMucGFkZGluZ0xlZnQgPSB0aGlzLmdldE1hcmdpblgoKSArIFwicHhcIjtcblx0XHRcdHRzLnBhZGRpbmdUb3AgPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblx0XHRcdHRzLnBhZGRpbmdCb3R0b20gPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblx0XHRcdHRzLk1vekNvbHVtbkZpbGwgPSBcImF1dG9cIjsvL2ltcG9ydGFudCAhISFcblx0XHRcdHRzLmNvbHVtbkZpbGwgPSBcImF1dG9cIjsvL2ltcG9ydGFudCAhISFcdFx0XG5cdFx0XHR0cy5XZWJraXRDb2x1bW5XaWR0aCA9IHRoaXMuX2NvbnRhaW5lcldpZHRoICsgXCJweFwiO1xuXHRcdFx0dHMuTW96Q29sdW1uV2lkdGggPSB0aGlzLl9jb250YWluZXJXaWR0aCArIFwicHhcIjtcblx0XHRcdHRzLmNvbHVtbldpZHRoID0gdGhpcy5fY29udGFpbmVyV2lkdGggKyBcInB4XCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5HYXAgPSB0aGlzLmdldE1hcmdpblgoKSoyICsgXCJweFwiO1xuXHRcdFx0dHMud2Via2l0Q29sdW1uR2FwID0gdGhpcy5nZXRNYXJnaW5YKCkqMiArIFwicHhcIjtcblx0XHRcdHRzLmNvbHVtbkdhcCA9IHRoaXMuZ2V0TWFyZ2luWCgpKjIgKyBcInB4XCI7XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvL0dvIHRvIGJvb2ttYXJrXG5cdFx0XHRpZih0aGlzLl9ib29rbWFyaykge1xuXHRcdFx0XHR0aGlzLmdvVG9Cb29rbWFyayh0aGlzLl9ib29rbWFyayk7XG5cdFx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gTWF0aC5yb3VuZCgkKHRoaXMuX3RleHQpLnBvc2l0aW9uKCkubGVmdCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vUmVmcmVzaCBpbmZvIGNvbnRhaW5lcnNcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdHRvU2Nyb2xsKCkge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XHR0aGlzLmNvbCA9IGZhbHNlO1xuXHRcdGxldCBjcyA9IHRoaXMuX2NvbnRhaW5lci5zdHlsZTtcblx0XHRsZXQgdHMgPSB0aGlzLl90ZXh0LnN0eWxlO1xuXHRcdC8vY29udGFpbmVyXG5cdFx0Y3MuaGVpZ2h0ID0gXCJhdXRvXCI7XG5cdFx0Y3MubWF4V2lkdGggPSB0aGlzLmdldE1heFdpZHRoKCkgKyBcInB4XCI7XG5cdFx0Y3Mub3ZlcmZsb3cgPSBcInZpc2libGVcIjtcblx0XHQvL3RleHRcblx0XHR0cy5wb3NpdGlvbiA9IFwic3RhdGljXCI7XG5cdFx0dHMuaGVpZ2h0ID0gXCJhdXRvXCI7XG5cdFx0Y3MucGFkZGluZ1JpZ2h0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0Y3MucGFkZGluZ0xlZnQgPSB0aGlzLmdldE1hcmdpblgoKSArIFwicHhcIjtcblx0XHRjcy5wYWRkaW5nVG9wID0gdGhpcy5nZXRNYXJnaW5ZKCkgKyBcInB4XCI7XG5cdFx0Y3MucGFkZGluZ0JvdHRvbSA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXG5cdFx0aWYoJ1dlYmtpdENvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdNb3pDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnY29sdW1uV2lkdGgnICBpbiBkb2N1bWVudC5ib2R5LnN0eWxlKSB7XG5cdFx0XHR0cy53ZWJraXRDb2x1bW5zID0gXCJhdXRvIDFcIjtcblx0XHRcdHRzLk1vekNvbHVtbnMgPSBcImF1dG8gMVwiO1xuXHRcdFx0dHMuY29sdW1ucyA9IFwiYXV0byAxXCI7XG5cdFx0fVxuXHRcdFxuXG5cdFx0Ly9TZWN0aW9ucyAoZm9yIG1vekNvbHVtbnMpXG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMuX3NlY3Rpb25zW2ldLnN0eWxlLm1pbkhlaWdodCA9IFwiMFwiO1xuXHRcdH1cblx0XHQvL21hbnVhbCBicmVha3Ncblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9icmVha3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMuX2JyZWFrc1tpXS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjBcIjtcblx0XHR9XG5cdFx0Ly9sYXN0IGVsZW1lbnRcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjBweFwiO1xuXG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH07XG5cblx0c2V0TWF4V2lkdGgodykge1xuXHRcdHRoaXMuX3dpZHRoID0gdztcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGdldE1heFdpZHRoKCkge1xuXHRcdHJldHVybiB0aGlzLl93aWR0aDtcblx0fVxuXG5cdHNldEhlaWdodChoKSB7XG5cdFx0dGhpcy5faGVpZ2h0ID0gaDtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGdldEhlaWdodCgpIHtcblx0XHRyZXR1cm4gdGhpcy5faGVpZ2h0O1xuXHR9XG5cblx0c2V0TWFyZ2luWChtKSB7XG5cdFx0dGhpcy5fbWFyZ2luWCA9IG07XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRNYXJnaW5YKCkge1xuXHRcdHJldHVybiB0aGlzLl9tYXJnaW5YO1xuXHR9XG5cblx0c2V0TWFyZ2luWShtKSB7XG5cdFx0dGhpcy5fbWFyZ2luWSA9IG07XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRNYXJnaW5ZKCkge1xuXHRcdHJldHVybiB0aGlzLl9tYXJnaW5ZO1xuXHR9XG5cdFxuXHRzZXRMaW5rcygpIHtcblx0XHRsZXQgbGlua3MgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1saW5rJyk7XG5cdFx0Zm9yKGxldCBpPTA7IGk8bGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0XHRcdGlmKHRoaXMuY29sPT09dHJ1ZSkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRsZXQgaHJlZiA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0XHRcdFx0XHRsZXQgaWQgPSBocmVmLnJlcGxhY2UoL14jLyxcIlwiKTtcblx0XHRcdFx0XHR0aGlzLmdvVG9QYWdlKHRoaXMuZWxlbWVudFBhZ2VOdW1iZXIoaWQpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgZmFsc2UpXG5cdFx0fVxuXHR9XG5cblx0Zm9yd2FyZCgpIHtcblx0XHRpZigkKHRoaXMuX2xhc3RFbGVtZW50KS5wb3NpdGlvbigpLmxlZnQrdGhpcy5fcG9zaXRpb24gPiB0aGlzLl9jb250YWluZXJXaWR0aCt0aGlzLmdldE1hcmdpblgoKSkge1xuXHRcdFx0Ly9sZXQgY2xvbmUgPSB0aGlzLl90ZXh0LmNsb25lTm9kZSh0cnVlKTtcblx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gJCh0aGlzLl90ZXh0KS5wb3NpdGlvbigpLmxlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiAtPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKGNsb25lKTtcblx0XHRcdC8vY2xvbmUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHQvL3RoaXMuX2NvbnRhaW5lci5pbnNlcnRCZWZvcmUoY2xvbmUsdGhpcy50ZXh0KTtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdGJhY2t3YXJkKCkge1xuXHRcdGlmKHRoaXMuX3Bvc2l0aW9uIDwgMCkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSAkKHRoaXMuX3RleHQpLnBvc2l0aW9uKCkubGVmdDtcblx0XHRcdHRoaXMuX3Bvc2l0aW9uICs9IHRoaXMuX2NvbnRhaW5lcldpZHRoO1xuXHRcdFx0dGhpcy5fdGV4dC5zdHlsZS5sZWZ0ID0gdGhpcy5fcG9zaXRpb24gKyBcInB4XCI7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblxuXHR0b0ZpcnN0UGFnZSgpIHtcblx0XHRpZih0aGlzLl9wb3NpdGlvbiA8IDApIHtcblx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gMDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0fVxuXHR9XG5cblx0dG9MYXN0UGFnZSgpIHtcblx0XHRpZigkKHRoaXMuX2xhc3RFbGVtZW50KS5wb3NpdGlvbigpLmxlZnQrdGhpcy5fcG9zaXRpb24gPiB0aGlzLl9jb250YWluZXJXaWR0aCt0aGlzLmdldE1hcmdpblgoKSkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl9jb250YWluZXJXaWR0aCt0aGlzLmdldE1hcmdpblgoKS0kKHRoaXMuX2xhc3RFbGVtZW50KS5wb3NpdGlvbigpLmxlZnQ7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbitcInB4XCI7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblx0XG5cdGdldFBhZ2VTdGFydCgpIHtcblx0XHRsZXQgaW5kZXgsIHN0YXJ0SW5kZXg7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IHRoaXMuX3NlY3Rpb25zLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tcGFnZS8pKSB7XG5cdFx0XHRcdGluZGV4ID0gaTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKGluZGV4IT09dW5kZWZpbmVkICYmIHN0YXJ0SW5kZXg9PT11bmRlZmluZWQpIHtcblx0XHRcdFx0XHRzdGFydEluZGV4ID0gaTtcblx0XHRcdFx0XHRsZXQgZWwgPSB0aGlzLl9zZWN0aW9uc1tzdGFydEluZGV4XTtcblx0XHRcdFx0XHRsZXQgZWxQb3NpdGlvbiA9ICQoZWwpLnBvc2l0aW9uKCkubGVmdCAtIHRoaXMuZ2V0TWFyZ2luWCgpO1xuXHRcdFx0XHRcdGVsUG9zaXRpb24gPSAoZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCE9PTAgPyBlbFBvc2l0aW9uLWVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGggOiBlbFBvc2l0aW9uKTsvL2Fsd2F5cyBhdCBhIHBhZ2UgYmVnaW5uaW5nXG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRQYWdlID0gZWxQb3NpdGlvbi90aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0Y2hlY2tGaXJzdFBhZ2UoKSB7XG5cdFx0bGV0IGNoZWNrID0gdGhpcy5fcG9zaXRpb249PT0wID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdHJldHVybiBjaGVjaztcblx0fVxuXG5cdGdldFBhZ2VOdW1iZXIoKSB7XG5cdFx0Ly90aGlzLl9wb3NpdGlvbi90aGlzLl9jb250YWluZXJXaWR0aCBpcyBzdGFydCBvZiBhIHBhZ2UgOiBzdGFydCAwIGlzIHBhZ2UgMSwuLi4gKHNvIDogKzEpXG5cdFx0bGV0IHBhZ2VOdW1iZXIgPSBNYXRoLmFicyhNYXRoLmZsb29yKHRoaXMuX3Bvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoKSkrMTtcblx0XHQvL3RoaXMuX3N0YXJ0UGFnZSAocGFnaW5hdGlvbiBzdGFydClcblx0XHRwYWdlTnVtYmVyID0gcGFnZU51bWJlci0odGhpcy5fc3RhcnRQYWdlKTtcblx0XHRyZXR1cm4gcGFnZU51bWJlcjtcblx0fVxuXG5cdGdldFRvdGFsUGFnZXMoKSB7XG5cdFx0bGV0IHRvdGFsUGFnZXMgPSBNYXRoLmZsb29yKCQodGhpcy5fbGFzdEVsZW1lbnQpLnBvc2l0aW9uKCkubGVmdC90aGlzLl9jb250YWluZXJXaWR0aCk7XG5cdFx0dG90YWxQYWdlcyA9IHRvdGFsUGFnZXMtKHRoaXMuX3N0YXJ0UGFnZSk7XG5cdFx0cmV0dXJuIHRvdGFsUGFnZXM7XG5cdH1cblxuXHRnb1RvUGFnZShudW1iZXIpIHtcblx0XHRudW1iZXIgPSBudW1iZXI8MS10aGlzLl9zdGFydFBhZ2UgPyAxLXRoaXMuX3N0YXJ0UGFnZSA6IG51bWJlcjtcblx0XHRudW1iZXI9IG51bWJlcj50aGlzLmdldFRvdGFsUGFnZXMoKSA/IHRoaXMuZ2V0VG90YWxQYWdlcygpIDogbnVtYmVyO1xuXHRcdG51bWJlciA9IG51bWJlciArICh0aGlzLl9zdGFydFBhZ2UpO1xuXHRcdGxldCBwb3NpdGlvbiA9IHRoaXMuX2NvbnRhaW5lcldpZHRoKihudW1iZXItMSk7XG5cdFx0dGhpcy5fdGV4dC5zdHlsZS5sZWZ0ID0gLXBvc2l0aW9uICsgXCJweFwiO1xuXHRcdHRoaXMuX3Bvc2l0aW9uID0gTWF0aC5yb3VuZCgkKHRoaXMuX3RleHQpLnBvc2l0aW9uKCkubGVmdCk7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH1cblxuXHRlbGVtZW50UGFnZU51bWJlcihpZCkge1xuXHRcdGxldCBlbCA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvcignIycgKyBpZCk7XG5cdFx0bGV0IGVsUG9zaXRpb24gPSBNYXRoLnJvdW5kKCQoZWwpLnBvc2l0aW9uKCkubGVmdCkgLSB0aGlzLmdldE1hcmdpblgoKTtcblx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdGxldCBlbFBhZ2VOdW1iZXIgPSBlbFBvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoICsgMTsvL2VsUG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGggaXMgcG9zaXRpb24gb2YgYSBwYWdlIDogcG9zaXRpb24gMCBpcyBwYWdlIDEsLi4uXG5cdFx0ZWxQYWdlTnVtYmVyID0gZWxQYWdlTnVtYmVyLSh0aGlzLl9zdGFydFBhZ2UpO1xuXHRcdHJldHVybiBlbFBhZ2VOdW1iZXI7XG5cdH1cblxuXHRnZXRTZWN0aW9uVGl0bGUoKSB7XG5cdFx0bGV0IHBvc2l0aW9uID0gLXRoaXMuX3Bvc2l0aW9uO1xuXHRcdGxldCB0aXRsZTtcblx0XHRmb3IobGV0IGk9MTsgaTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYoJCh0aGlzLl9zZWN0aW9uc1tpXSkucG9zaXRpb24oKS5sZWZ0LXRoaXMuX2NvbnRhaW5lcldpZHRoPj1wb3NpdGlvbikge1xuXHRcdFx0XHRsZXQgaWQgPSB0aGlzLl9zZWN0aW9uc1tpLTFdLmlkO1xuXHRcdFx0XHRpZihpZCE9PXVuZGVmaW5lZCAmJiB0aGlzLmdldFBhZ2VOdW1iZXIoKSA9PT0gdGhpcy5lbGVtZW50UGFnZU51bWJlcihpZCkpIHtcblx0XHRcdFx0XHR0aXRsZSA9IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGl0bGUgPSB0aGlzLl9zZWN0aW9uc1tpLTFdLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZScpID8gdGhpcy5fc2VjdGlvbnNbaS0xXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUnKSA6IHRoaXMuX3NlY3Rpb25zW2ktMV0udGl0bGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aXRsZTtcblx0fVxuXHRcblx0Z2V0VG9jKCkge1xuXHRcdGlmKHRoaXMuX3RvY3MubGVuZ3RoPT09MCkgeyByZXR1cm47IH1cblx0XHRcblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl90b2NzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgdG9jID0gdGhpcy5fdG9jc1tpXTtcblx0XHRcdGlmKHRvYy5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdG9jJykpIHtcblx0XHRcdFx0bGV0IHRvY1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXHRcdFx0XHR0b2NUaXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLXRpdGxlJyk7XG5cdFx0XHRcdHRvY1RpdGxlLmlubmVySFRNTCA9IHRvYy5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdG9jJyk7XG5cdFx0XHRcdHRvYy5hcHBlbmRDaGlsZCh0b2NUaXRsZSk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG5cdFx0XHRsaXN0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3Yi10b2MtbGlzdCcpO1xuXHRcdFx0Zm9yKGxldCBqPTA7IGo8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0bGV0IHNlY3Rpb24gPSB0aGlzLl9zZWN0aW9uc1tqXTtcblx0XHRcdFx0aWYoIXNlY3Rpb24uY2xhc3NOYW1lLm1hdGNoKC93Yi1uby10b2MvKSkge1xuXHRcdFx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblx0XHRcdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3Yi10b2MtaXRlbScpO1xuXHRcdFx0XHRcdGlmKCFzZWN0aW9uLmNsYXNzTmFtZS5tYXRjaCgvd2ItdG9jLW5vLXBhZ2UtbnVtYmVyLykpIHtcblx0XHRcdFx0XHRcdGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHRcdFx0XHRcdFx0bGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnIycgKyBzZWN0aW9uLmlkKTtcblx0XHRcdFx0XHRcdGxpbmsuc2V0QXR0cmlidXRlKCdjbGFzcycsICd3Yi1saW5rJyk7XG5cdFx0XHRcdFx0XHRpdGVtLmFwcGVuZENoaWxkKGxpbmspO1xuXHRcdFx0XHRcdFx0bGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdFx0XHRcdFx0dGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1pdGVtLXRpdGxlJyk7XG5cdFx0XHRcdFx0XHR0aXRsZS5pbm5lckhUTUwgPSBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZS10b2MnKSA/IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlLXRvYycpIDogc2VjdGlvbi50aXRsZTtcblx0XHRcdFx0XHRcdGxpbmsuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXHRcdFx0XHRcdFx0bGV0IHBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRcdFx0XHRwYWdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3Yi10b2MtaXRlbS1wYWdlLW51bWJlcicpO1x0XG5cdFx0XHRcdFx0XHRwYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS13Yi1lbGVtZW50LXBhZ2UtbnVtYmVyJywgc2VjdGlvbi5pZCk7XG5cdFx0XHRcdFx0XHRsaW5rLmFwcGVuZENoaWxkKHBhZ2UpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRcdFx0XHR0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWl0ZW0tdGl0bGUnKTtcblx0XHRcdFx0XHRcdHRpdGxlLmlubmVySFRNTCA9IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlLXRvYycpID8gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUtdG9jJykgOiBzZWN0aW9uLnRpdGxlO1xuXHRcdFx0XHRcdFx0aXRlbS5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRvYy5hcHBlbmRDaGlsZChsaXN0KTtcblx0XHR9XG5cdH1cblx0XG5cdGdldFRvY0N1cnJlbnRTZWN0aW9uKCkge1xuXHRcdGxldCBwb3NpdGlvbiA9IC10aGlzLl9wb3NpdGlvbjtcblx0XHR0aGlzLl90b2NTZWN0aW9ucy5wdXNoKHRoaXMuX2xhc3RFbGVtZW50KTtcblx0XHRpZih0aGlzLl9zZWN0aW9uc1swXS5jbGFzc05hbWUubWF0Y2goL3diLW5vLXRvYy8pKSB7XG5cdFx0XHR0aGlzLl90b2NTZWN0aW9ucy51bnNoaWZ0KHRoaXMuX3NlY3Rpb25zWzBdKTtcblx0XHR9XG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fdG9jcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IHRvYyA9IHRoaXMuX3RvY3NbaV07XG5cdFx0XHRmb3IobGV0IGk9MTsgaTx0aGlzLl90b2NTZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZigkKHRoaXMuX3RvY1NlY3Rpb25zW2ldKS5wb3NpdGlvbigpLmxlZnQtdGhpcy5fY29udGFpbmVyV2lkdGg+PXBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0bGV0IGlkID0gdGhpcy5fdG9jU2VjdGlvbnNbaS0xXS5pZDtcblx0XHRcdFx0XHRsZXQgbGlua3MgPSB0b2MucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXHRcdFx0XHRcdGZvcihsZXQgaj0wOyBqPGxpbmtzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0XHRsZXQgbGluayA9IGxpbmtzW2pdO1xuXHRcdFx0XHRcdFx0aWYobGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5yZXBsYWNlKC9eIy8sJycpID09PSBpZCkge1xuXHRcdFx0XHRcdFx0XHRpZighbGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSs9JyBjdXJyZW50Jztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYobGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZT1saW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoLyBjdXJyZW50LywnJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdH1cblx0XHR0aGlzLl90b2NTZWN0aW9ucy5wb3AodGhpcy5fbGFzdEVsZW1lbnQpO1xuXHRcdGlmKHRoaXMuX3NlY3Rpb25zWzBdLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tdG9jLykpIHtcblx0XHRcdHRoaXMuX3RvY1NlY3Rpb25zLnNoaWZ0KHRoaXMuX3NlY3Rpb25zWzBdKTtcblx0XHR9XG5cdH1cblxuXHRpbnNlcnRCb29rbWFyaygpIHtcblx0XHRsZXQgYm9va21hcmsgPSBudWxsO1xuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2VsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgZWxQb3NpdGlvbiA9IE1hdGgucm91bmQoJCh0aGlzLl9lbGVtZW50c1tpXSkucG9zaXRpb24oKS5sZWZ0KS10aGlzLmdldE1hcmdpblgoKTtcblx0XHRcdGVsUG9zaXRpb24gPSAoZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCE9PTAgPyBlbFBvc2l0aW9uLWVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGggOiBlbFBvc2l0aW9uKTsvL2Fsd2F5cyBhdCBhIHBhZ2UgYmVnaW5uaW5nXG5cdFx0XHRpZihlbFBvc2l0aW9uID09PSAtdGhpcy5fcG9zaXRpb24pXG5cdFx0XHR7XG5cdFx0XHRcdGJvb2ttYXJrID0gaTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKGVsUG9zaXRpb24gPiAtdGhpcy5fcG9zaXRpb24pXG5cdFx0XHR7XG5cdFx0XHRcdGJvb2ttYXJrID0gaS0xO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5fYm9va21hcmsgPSBib29rbWFyaztcblx0fVxuXG5cdGdvVG9Cb29rbWFyayhib29rbWFyaykge1xuXHRcdGxldCBlbGVtZW50ID0gdGhpcy5fZWxlbWVudHNbdGhpcy5fYm9va21hcmtdO1xuXHRcdC8vcG9zaXRpb24gOiBvZmZzZXRMZWZ0IG9mIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGV4dFxuXHRcdGxldCBwb3NpdGlvbiA9IE1hdGgucm91bmQoJChlbGVtZW50KS5wb3NpdGlvbigpLmxlZnQpLXRoaXMuZ2V0TWFyZ2luWCgpO1xuXHRcdHBvc2l0aW9uID0gKHBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIT09MCA/IHBvc2l0aW9uLXBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogcG9zaXRpb24pOy8vYWx3YXlzIGF0IGEgcGFnZSBiZWdpbm5pbmdcblx0XHQvL3RleHQgcG9zaXRpb24gPSAtcG9zaXRpb25cblx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSAtcG9zaXRpb24gKyBcInB4XCI7XG5cdFx0dGhpcy5fcG9zaXRpb24gPSAkKHRoaXMuX3RleHQpLnBvc2l0aW9uKCkubGVmdDtcblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG5cdHJlZnJlc2goKSB7XG5cdFx0dGhpcy5pbnNlcnRCb29rbWFyaygpO1xuXG5cdFx0aWYodGhpcy5jb2w9PT1mYWxzZSkge1xuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9jdXJyZW50UGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fY3VycmVudFBhZ2VzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3RvdGFsUGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fdG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9jdXJyZW50VG90YWxQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9lbFBhZ2VOdW1iZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX2VsUGFnZU51bWJlcnNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvblRpdGxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9zZWN0aW9uVGl0bGVzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0XG5cdFx0XHR0aGlzLmdldFBhZ2VTdGFydCgpO1xuXHRcdFx0XG5cdFx0XHRpZih0aGlzLl90b2NzLmxlbmd0aCE9PTApIHtcblx0XHRcdFx0dGhpcy5nZXRUb2NDdXJyZW50U2VjdGlvbigpO1xuXHRcdFx0fVx0XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2N1cnJlbnRQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9jdXJyZW50UGFnZXNbaV0uaW5uZXJIVE1MIT10aGlzLmdldFBhZ2VOdW1iZXIoKSkge1xuXHRcdFx0XHRcdHRoaXMuX2N1cnJlbnRQYWdlc1tpXS5pbm5lckhUTUwgPSB0aGlzLmdldFBhZ2VOdW1iZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl90b3RhbFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3RvdGFsUGFnZXNbaV0uaW5uZXJIVE1MIT10aGlzLmdldFBhZ2VOdW1iZXIoKSkge1xuXHRcdFx0XHRcdHRoaXMuX3RvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gdGhpcy5nZXRQYWdlTnVtYmVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fY3VycmVudFRvdGFsUGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5nZXRQYWdlTnVtYmVyKCkgPCAxKSB7XG5cdFx0XHRcdFx0dGhpcy5fY3VycmVudFRvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdFx0fSBlbHNlIGlmKHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzW2ldLmlubmVySFRNTCE9PSB0aGlzLmdldFBhZ2VOdW1iZXIoKSArIFwiL1wiICsgdGhpcy5nZXRUb3RhbFBhZ2VzKCkpIHtcblx0XHRcdFx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSB0aGlzLmdldFBhZ2VOdW1iZXIoKSArIFwiL1wiICsgdGhpcy5nZXRUb3RhbFBhZ2VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fZWxQYWdlTnVtYmVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRsZXQgaWQgPSB0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi1lbGVtZW50LXBhZ2UtbnVtYmVyJyk7XG5cdFx0XHRcdGxldCBwYWdlTnVtYmVyID0gdGhpcy5lbGVtZW50UGFnZU51bWJlcihpZCk7XG5cdFx0XHRcdGlmKHBhZ2VOdW1iZXIgPCAxKSB7XG5cdFx0XHRcdFx0dGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0XHR9IGVsc2UgaWYodGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5pbm5lckhUTUwhPXBhZ2VOdW1iZXIpIHtcblx0XHRcdFx0XHR0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmlubmVySFRNTCA9IHBhZ2VOdW1iZXI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvblRpdGxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9zZWN0aW9uVGl0bGVzW2ldLmlubmVySFRNTCE9dGhpcy5nZXRTZWN0aW9uVGl0bGUoKSkge1xuXHRcdFx0XHRcdHRoaXMuX3NlY3Rpb25UaXRsZXNbaV0uaW5uZXJIVE1MID0gdGhpcy5nZXRTZWN0aW9uVGl0bGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG59XG5cbiJdfQ==
