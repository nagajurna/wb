"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),WebBook=function(){function t(e,i){var s=this;_classCallCheck(this,t),this._bookContainer=e,this._textContainer=e.querySelector("[data-wb-text-container]"),this._text=e.querySelector("[data-wb-text]"),this._height=i.height,this._width=i.maxWidth,this._marginX=void 0===i.marginX?35:i.marginX,this._marginY=void 0===i.marginY?20:i.marginY,this._position=0,this.col=!0,this._bookmark=null,this._containerWidth=null,this._lastBreak=document.createElement("div"),this._lastBreak.className="wb-text-break",this._text.appendChild(this._lastBreak),this._lastElement=document.createElement("div"),this._lastElement.innerHTML="&nbsp;",this._lastElement.className="wb-section wb-no-toc",this._text.appendChild(this._lastElement),this._sections=this._text.querySelectorAll(".wb-section"),this._tocSections=[];for(var n=0;n<this._sections.length;n++)this._sections[n].className.match(/wb-no-toc/)||this._tocSections.push(this._sections[n]);this._breaks=this._text.querySelectorAll(".wb-text-break"),this._elements=this._text.querySelectorAll(":not(.wb-text-break)"),this._tocs=this._bookContainer.querySelectorAll("[data-wb-toc]"),this.getToc(),this._currentPages=this._bookContainer.querySelectorAll(".wb-current-page"),this._totalPages=this._bookContainer.querySelectorAll(".wb-total-pages"),this._currentTotalPages=this._bookContainer.querySelectorAll(".wb-currentByTotal-pages"),this._elPageNumbers=this._bookContainer.querySelectorAll("[data-wb-element-page-number]"),this._sectionTitles=this._bookContainer.querySelectorAll(".wb-current-section-title"),this._startPage=null;for(var o=this._bookContainer.querySelectorAll(".wb-link"),a=0;a<o.length;a++)o[a].addEventListener("click",function(t){if(!0===s.col){t.preventDefault();var e=t.currentTarget.getAttribute("href").replace(/^#/,"");s.goToPage(s.elementPageNumber(e))}},!1);"WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style?this.toBook():this.toScroll()}return _createClass(t,[{key:"toBook",value:function(){if("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style){this.col=!0;var t=this._textContainer.style,e=this._text.style;t.boxSizing="border-box",t.webkitBoxSizing="border-box",t.overflow="hidden",t.position="relative",t.padding="0px",t.height=this.getHeight()+"px",t.maxWidth=this.getMaxWidth()+"px",this._containerWidth=this._textContainer.clientWidth;for(var i=0;i<this._sections.length;i++)"10%"!==this._sections[i].style.minHeight&&(this._sections[i].style.minHeight="10%");for(var s=0;s<this._breaks.length;s++)"300%"!==this._breaks[s].style.marginBottom&&(this._breaks[s].style.marginBottom="300%");"300%"!==this._lastElement.style.marginBottom&&(this._lastElement.style.marginBottom="300%"),e.boxSizing="border-box",e.webkitBoxSizing="border-box",e.position="absolute",e.left=0,e.top=0,e.height="100%",e.width="100%",e.maxWidth="100%",e.maxHeight="100%",e.paddingRight=this.getMarginX()+"px",e.paddingLeft=this.getMarginX()+"px",e.paddingTop=this.getMarginY()+"px",e.paddingBottom=this.getMarginY()+"px",e.MozColumnFill="auto",e.columnFill="auto",e.WebkitColumnsWidth=this._containerWidth+"px",e.MozColumnWidth=this._containerWidth+"px",e.columnWidth=this._containerWidth+"px",e.MozColumnGap=2*this.getMarginX()+"px",e.WebkitColumnGap=2*this.getMarginX()+"px",e.columnGap=2*this.getMarginX()+"px",this._bookmark&&(this.goToBookmark(this._bookmark),this._position=this._text.offsetLeft),this.refresh()}}},{key:"toScroll",value:function(){this.col=!1;var t=this._container.style,e=this._text.style;t.height="auto",t.maxWidth=this.getMaxWidth()+"px",t.overflow="visible",e.position="static",e.height="auto",t.paddingRight=this.getMarginX()+"px",t.paddingLeft=this.getMarginX()+"px",t.paddingTop=this.getMarginY()+"px",t.paddingBottom=this.getMarginY()+"px",("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style)&&(e.WebkitColumns="auto 1",e.MozColumns="auto 1",e.columns="auto 1");for(var i=0;i<this._sections.length;i++)this._sections[i].style.minHeight="0";for(var s=0;s<this._breaks.length;s++)this._breaks[s].style.marginBottom="0";this._lastElement.style.marginBottom="0px",this.refresh()}},{key:"setMaxWidth",value:function(t){return this._width=t,this}},{key:"getMaxWidth",value:function(){return this._width}},{key:"setHeight",value:function(t){return this._height=t,this}},{key:"getHeight",value:function(){return this._height}},{key:"setMarginX",value:function(t){return this._marginX=t,this}},{key:"getMarginX",value:function(){return this._marginX}},{key:"setMarginY",value:function(t){return this._marginY=t,this}},{key:"getMarginY",value:function(){return this._marginY}},{key:"forward",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._text.offsetLeft,this._position-=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"backward",value:function(){this._position<0&&(this._position=this._text.offsetLeft,this._position+=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"toFirstPage",value:function(){this._position<0&&(this._position=0,this._text.style.left=this._position+"px",this.refresh())}},{key:"toLastPage",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._containerWidth+this.getMarginX()-this._lastElement.offsetLeft,this._text.style.left=this._position+"px",this.refresh())}},{key:"getPageStart",value:function(){for(var t=void 0,e=void 0,i=0;i<this._sections.length-1;i++)if(this._sections[i].className.match(/wb-no-page/))t=i;else if(void 0!==t&&void 0===e){e=i;var s=this._sections[e].offsetLeft-this.getMarginX();s=s%this._containerWidth!=0?s-s%this._containerWidth:s,this._startPage=s/this._containerWidth}}},{key:"checkFirstPage",value:function(){return 0===this._position}},{key:"getPageNumber",value:function(){var t=Math.abs(Math.floor(this._position/this._containerWidth))+1;return t-=this._startPage}},{key:"getTotalPages",value:function(){var t=Math.floor(this._lastElement.offsetLeft/this._containerWidth);return t-=this._startPage}},{key:"goToPage",value:function(t){t=(t=t<1-this._startPage?1-this._startPage:t)>this.getTotalPages()?this.getTotalPages():t,t+=this._startPage;var e=this._containerWidth*(t-1);this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"elementPageNumber",value:function(t){var e=this._text.querySelector("#"+t).offsetLeft-this.getMarginX(),i=(e=e%this._containerWidth!=0?e-e%this._containerWidth:e)/this._containerWidth+1;return i-=this._startPage}},{key:"getSectionTitle",value:function(){for(var t=-this._position,e=void 0,i=1;i<this._sections.length;i++)if(this._sections[i].offsetLeft-this._containerWidth>=t){var s=this._sections[i-1].id;e=void 0!==s&&this.getPageNumber()===this.elementPageNumber(s)?"":this._sections[i-1].getAttribute("data-wb-title")?this._sections[i-1].getAttribute("data-wb-title"):this._sections[i-1].title;break}return e}},{key:"getToc",value:function(){if(0!==this._tocs.length)for(var t=0;t<this._tocs.length;t++){var e=this._tocs[t];if(e.getAttribute("data-wb-toc")){var i=document.createElement("p");i.setAttribute("class","wb-toc-title"),i.innerHTML=e.getAttribute("data-wb-toc"),e.appendChild(i)}var s=document.createElement("ul");s.setAttribute("class","wb-toc-list");for(var n=0;n<this._sections.length;n++){var o=this._sections[n];if(!o.className.match(/wb-no-toc/)){var a=document.createElement("li");a.setAttribute("class","wb-toc-item");var r=document.createElement("a");r.setAttribute("href","#"+o.id),r.setAttribute("class","wb-link"),a.appendChild(r);var h=document.createElement("span");if(h.setAttribute("class","wb-toc-item-title"),h.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,r.appendChild(h),!o.className.match(/wb-toc-no-page-number/)){var l=document.createElement("span");h.setAttribute("class","wb-toc-item-page-number"),l.setAttribute("data-wb-element-page-number",o.id),r.appendChild(l)}s.appendChild(a)}}e.appendChild(s)}}},{key:"getTocCurrentSection",value:function(){var t=-this._position;this._tocSections.push(this._lastElement);for(var e=0;e<this._tocs.length;e++)for(var i=this._tocs[e],s=1;s<this._tocSections.length;s++)if(this._tocSections[s].offsetLeft-this._containerWidth>=t){for(var n=this._tocSections[s-1].id,o=i.querySelectorAll("a"),a=0;a<o.length;a++){var r=o[a];r.getAttribute("href").replace(/^#/,"")===n?r.parentElement.className.match(/current/)||(r.parentElement.className+=" current"):r.parentElement.className.match(/current/)&&(r.parentElement.className=r.parentElement.className.replace(/ current/,""))}break}this._tocSections.pop(this._lastElement)}},{key:"insertBookmark",value:function(){for(var t=null,e=0;e<this._elements.length;e++){var i=this._elements[e].offsetLeft-this.getMarginX();if((i=i%this._containerWidth!=0?i-i%this._containerWidth:i)===-this._position){t=e;break}if(i>-this._position){t=e-1;break}}this._bookmark=t}},{key:"goToBookmark",value:function(t){var e=this._elements[this._bookmark].offsetLeft-this.getMarginX();e=e%this._containerWidth!=0?e-e%this._containerWidth:e,this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"refresh",value:function(){if(this.insertBookmark(),!1===this.col){for(var t=0;t<this._currentPages.length;t++)this._currentPages[t].innerHTML="";for(var e=0;e<this._totalPages.length;e++)this._totalPages[e].innerHTML="";for(var i=0;i<this._currentTotalPages.length;i++)this._currentTotalPages[i].innerHTML="";for(var s=0;s<this._elPageNumbers.length;s++)this._elPageNumbers[s].innerHTML="";for(var n=0;n<this._sectionTitles.length;n++)this._sectionTitles[n].innerHTML=""}else{this.getPageStart(),0!==this._tocs.length&&this.getTocCurrentSection();for(var o=0;o<this._currentPages.length;o++)this._currentPages[o].innerHTML!=this.getPageNumber()&&(this._currentPages[o].innerHTML=this.getPageNumber());for(var a=0;a<this._totalPages.length;a++)this._totalPages[a].innerHTML!=this.getPageNumber()&&(this._totalPages[a].innerHTML=this.getPageNumber());for(var r=0;r<this._currentTotalPages.length;r++)this.getPageNumber()<1?this._currentTotalPages[r].innerHTML="":this._currentTotalPages[r].innerHTML!==this.getPageNumber()+"/"+this.getTotalPages()&&(this._currentTotalPages[r].innerHTML=this.getPageNumber()+"/"+this.getTotalPages());for(var h=0;h<this._elPageNumbers.length;h++){var l=this._elPageNumbers[h].getAttribute("data-wb-element-page-number"),c=this.elementPageNumber(l);c<1?this._elPageNumbers[h].innerHTML="":this._elPageNumbers[h].innerHTML!=c&&(this._elPageNumbers[h].innerHTML=c)}for(var g=0;g<this._sectionTitles.length;g++)this._sectionTitles[g].innerHTML!=this.getSectionTitle()&&(this._sectionTitles[g].innerHTML=this.getSectionTitle())}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi1ib29rLmpzIl0sIm5hbWVzIjpbIldlYkJvb2siLCJib29rQ29udGFpbmVyIiwib3B0aW9ucyIsIl90aGlzIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9ib29rQ29udGFpbmVyIiwiX3RleHRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiX3RleHQiLCJfaGVpZ2h0IiwiX3dpZHRoIiwibWF4V2lkdGgiLCJfbWFyZ2luWCIsInVuZGVmaW5lZCIsIm1hcmdpblgiLCJfbWFyZ2luWSIsIm1hcmdpblkiLCJfcG9zaXRpb24iLCJoZWlnaHQiLCJfbGFzdEVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb2wiLCJjbGFzc05hbWUiLCJfYm9va21hcmsiLCJfc2VjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2xhc3RCcmVhayIsImFwcGVuZENoaWxkIiwiaSIsIm1hdGNoIiwiX2JyZWFrcyIsIl9lbGVtZW50cyIsIl90b2NzIiwiZ2V0VG9jIiwiX2N1cnJlbnRQYWdlcyIsIl90b3RhbFBhZ2VzIiwiX2VsUGFnZU51bWJlcnMiLCJsaW5rcyIsImxlbmd0aCIsIl9jdXJyZW50VG90YWxQYWdlcyIsImUiLCJpZCIsIl9zZWN0aW9uVGl0bGVzIiwicmVwbGFjZSIsIl9zdGFydFBhZ2UiLCJlbGVtZW50UGFnZU51bWJlciIsImJvZHkiLCJzdHlsZSIsInByZXZlbnREZWZhdWx0IiwidG9TY3JvbGwiLCJ0b0Jvb2siLCJjcyIsInRzIiwiYm94U2l6aW5nIiwid2Via2l0Qm94U2l6aW5nIiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsInBhZGRpbmciLCJnZXRIZWlnaHQiLCJnZXRNYXhXaWR0aCIsImNsaWVudFdpZHRoIiwibWluSGVpZ2h0IiwiX2NvbnRhaW5lcldpZHRoIiwibWFyZ2luQm90dG9tIiwibGVmdCIsInRvcCIsIndpZHRoIiwibWF4SGVpZ2h0IiwicGFkZGluZ1JpZ2h0IiwiZ2V0TWFyZ2luWCIsImdldE1hcmdpblkiLCJNb3pDb2x1bW5GaWxsIiwiY29sdW1uRmlsbCIsIldlYmtpdENvbHVtbnNXaWR0aCIsIm9mZnNldExlZnQiLCJXZWJraXRDb2x1bW5HYXAiLCJfY29udGFpbmVyIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsImNvbHVtbnMiLCJyZWZyZXNoIiwidyIsImgiLCJtIiwiaW5kZXgiLCJzdGFydEluZGV4IiwiZWxQb3NpdGlvbiIsInBhZ2VOdW1iZXIiLCJNYXRoIiwiYWJzIiwiZmxvb3IiLCJ0b3RhbFBhZ2VzIiwibnVtYmVyIiwiZ2V0VG90YWxQYWdlcyIsImVsUGFnZU51bWJlciIsInRpdGxlIiwiZ2V0UGFnZU51bWJlciIsImdldEF0dHJpYnV0ZSIsInRvYyIsImVsIiwidG9jVGl0bGUiLCJsaXN0Iiwic2V0QXR0cmlidXRlIiwiaiIsInNlY3Rpb24iLCJpdGVtIiwibGluayIsInBhZ2UiLCJfdG9jU2VjdGlvbnMiLCJwYXJlbnRFbGVtZW50IiwicG9wIiwiYm9va21hcmsiLCJpbnNlcnRCb29rbWFyayIsImdldFBhZ2VTdGFydCIsImdldFRvY0N1cnJlbnRTZWN0aW9uIiwiZ2V0U2VjdGlvblRpdGxlIl0sIm1hcHBpbmdzIjoiNlhBQU1BLG1CQUNMLFNBQUFBLEVBQVlDLEVBQWVDLEdBQVMsSUFBQUMsRUFBQUMsS0FBQUMsZ0JBQUFELEtBQUFKLEdBRW5DSSxLQUFLRSxlQUFpQkwsRUFDdEJHLEtBQUtHLGVBQWlCTixFQUFjTyxjQUFjLDRCQUNsREosS0FBS0ssTUFBUVIsRUFBY08sY0FBYyxrQkFKMUNKLEtBQUFNLFFBQUFSLEVBQVlELE9BQXdCRyxLQUFBTyxPQUFBVCxFQUFBVSxTQVFuQ1IsS0FBS1MsY0FBNkJDLElBQWxCWixFQUFRYSxRQUFzQixHQUFLYixFQUFRYSxRQVJ4QlgsS0FBQVksY0FBQUYsSUFBQVosRUFBQWUsUUFBQSxHQUFBZixFQUFBZSxRQUNuQ2IsS0FBQWMsVUFBQSxFQUNBZCxLQUFLRSxLQUFBQSxFQUNMRixLQUFLRyxV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VUFBWW5CLEtBQUttSCIsImZpbGUiOiJ3ZWItYm9vay5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBXZWJCb29rIHtcblx0Y29uc3RydWN0b3IoYm9va0NvbnRhaW5lciwgb3B0aW9ucykge1xuXHRcdC8vY29udGFpbmVyc1xuXHRcdHRoaXMuX2Jvb2tDb250YWluZXIgPSBib29rQ29udGFpbmVyO1xuXHRcdHRoaXMuX3RleHRDb250YWluZXIgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHQtY29udGFpbmVyXScpO1xuXHRcdHRoaXMuX3RleHQgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHRdJyk7XG5cdFx0Ly9vcHRpb25zXG5cdFx0dGhpcy5faGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG5cdFx0dGhpcy5fd2lkdGggPSBvcHRpb25zLm1heFdpZHRoO1xuXHRcdHRoaXMuX21hcmdpblggPSBvcHRpb25zLm1hcmdpblg9PT11bmRlZmluZWQgPyAzNSA6IG9wdGlvbnMubWFyZ2luWDtcblx0XHR0aGlzLl9tYXJnaW5ZID0gb3B0aW9ucy5tYXJnaW5ZPT09dW5kZWZpbmVkID8gMjAgOiBvcHRpb25zLm1hcmdpblk7XG5cdFx0Ly9pbml0IHBvc2l0aW9uLCBjb2wgLGNvbnRhaW5lcldpZHRoIGFuZCBib29rbWFya1xuXHRcdHRoaXMuX3Bvc2l0aW9uID0gMDtcblx0XHR0aGlzLmNvbCA9IHRydWU7Ly9kZWZhdWx0IHRydWUgPSB0b0Jvb2soKVxuXHRcdHRoaXMuX2Jvb2ttYXJrID0gbnVsbDtcblx0XHR0aGlzLl9jb250YWluZXJXaWR0aCA9IG51bGw7XG5cdFx0Ly90aGlzLmxhc3RCcmVhayBpcyB1c2VkIGFzIGEgZ2hvc3QgcGFnZVxuXHRcdHRoaXMuX2xhc3RCcmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0dGhpcy5fbGFzdEJyZWFrLmNsYXNzTmFtZSA9IFwid2ItdGV4dC1icmVha1wiO1xuXHRcdHRoaXMuX3RleHQuYXBwZW5kQ2hpbGQodGhpcy5fbGFzdEJyZWFrKTtcblx0XHQvL3RoaXMuX2xhc3RFbGVtZW50IGlzIHVzZWQgYXMgbGFuZG1hcmtcblx0XHR0aGlzLl9sYXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuaW5uZXJIVE1MID0gXCImbmJzcDtcIjsvL25vdCBlbXB0eSAoZm9yIG1vekNvbHVtbnMpXG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuY2xhc3NOYW1lID0gXCJ3Yi1zZWN0aW9uIHdiLW5vLXRvY1wiO1xuXHRcdHRoaXMuX3RleHQuYXBwZW5kQ2hpbGQodGhpcy5fbGFzdEVsZW1lbnQpO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR0aGlzLl9zZWN0aW9ucyA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvckFsbCgnLndiLXNlY3Rpb24nKTtcblx0XHQvL3NlY3Rpb25zIHdiLW5vLXRvY1xuXHRcdHRoaXMuX3RvY1NlY3Rpb25zID0gW11cblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYoIXRoaXMuX3NlY3Rpb25zW2ldLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tdG9jLykpIHtcblx0XHRcdFx0dGhpcy5fdG9jU2VjdGlvbnMucHVzaCh0aGlzLl9zZWN0aW9uc1tpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vYnJlYWtzXG5cdFx0dGhpcy5fYnJlYWtzID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCcud2ItdGV4dC1icmVhaycpO1xuXHRcdC8vZWxlbWVudHMgOiBzZWxlY3QgYWxsIGVsZW1lbnRzIGJ1dCAudGV4dC1icmVha3MgKGZvciBib29rbWFya3MpXG5cdFx0dGhpcy5fZWxlbWVudHMgPSB0aGlzLl90ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpub3QoLndiLXRleHQtYnJlYWspJyk7XG5cdFx0Ly90b2Ncblx0XHR0aGlzLl90b2NzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS13Yi10b2NdJyk7XG5cdFx0Ly9zZXRUb2MgYmVmb3JlIHF1ZXJ5aW5nIHRoaXMuZWxQYWdlTnVtYmVyc1xuXHRcdHRoaXMuZ2V0VG9jKCk7XG5cdFx0Ly9pbmZvcyBjb250YWluZXJzXG5cdFx0dGhpcy5fY3VycmVudFBhZ2VzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItY3VycmVudC1wYWdlJyk7XG5cdFx0dGhpcy5fdG90YWxQYWdlcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLXRvdGFsLXBhZ2VzJyk7XG5cdFx0dGhpcy5fY3VycmVudFRvdGFsUGFnZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1jdXJyZW50QnlUb3RhbC1wYWdlcycpO1xuXHRcdHRoaXMuX2VsUGFnZU51bWJlcnMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXdiLWVsZW1lbnQtcGFnZS1udW1iZXJdJyk7XG5cdFx0dGhpcy5fc2VjdGlvblRpdGxlcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWN1cnJlbnQtc2VjdGlvbi10aXRsZScpO1xuXHRcdC8vc3RhcnQgcGFnaW5hdGlvblxuXHRcdHRoaXMuX3N0YXJ0UGFnZSA9IG51bGw7XG5cdFx0Ly9saW5rcyA6IHJlcGxhY2UgZGVmYXVsdCB3aXRoIGdvVG9QYWdlXG5cdFx0bGV0IGxpbmtzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItbGluaycpO1xuXHRcdFx0XHRcblx0XHRmb3IobGV0IGk9MDsgaTxsaW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblx0XHRcdFx0aWYodGhpcy5jb2w9PT10cnVlKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdGxldCBocmVmID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuXHRcdFx0XHRcdGxldCBpZCA9IGhyZWYucmVwbGFjZSgvXiMvLFwiXCIpO1xuXHRcdFx0XHRcdHRoaXMuZ29Ub1BhZ2UodGhpcy5lbGVtZW50UGFnZU51bWJlcihpZCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSlcblx0XHR9XG5cdFx0XG5cdFx0XG5cdFx0aWYoJ1dlYmtpdENvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdNb3pDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnY29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcblx0XHRcdHRoaXMudG9Cb29rKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudG9TY3JvbGwoKTtcblx0XHR9XG5cblx0fVxuXG5cdHRvQm9vaygpIHtcblx0XHRpZignV2Via2l0Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ01vekNvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdjb2x1bW5XaWR0aCcgIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcblx0XHRcdHRoaXMuY29sID0gdHJ1ZTtcblx0XHRcdGxldCBjcyA9IHRoaXMuX3RleHRDb250YWluZXIuc3R5bGU7XG5cdFx0XHRsZXQgdHMgPSB0aGlzLl90ZXh0LnN0eWxlO1xuXHRcdFx0Ly90ZXh0LWNvbnRhaW5lclxuXHRcdFx0Y3MuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG5cdFx0XHRjcy53ZWJraXRCb3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdGNzLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRcdGNzLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdFx0Y3MucGFkZGluZyA9IFwiMHB4XCI7XG5cdFx0XHRjcy5oZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpICsgXCJweFwiO1xuXHRcdFx0Y3MubWF4V2lkdGggPSB0aGlzLmdldE1heFdpZHRoKCkgKyBcInB4XCI7Ly9tYXhXaWR0aCA6IHJlc3BvbnNpdmVcblx0XHRcdHRoaXMuX2NvbnRhaW5lcldpZHRoID0gdGhpcy5fdGV4dENvbnRhaW5lci5jbGllbnRXaWR0aDsvL3Jlc3BvbnNpdmVcblx0XHRcdFxuXHRcdFx0Ly9zZWN0aW9uc1xuXHRcdFx0Ly9oYWNrIGZpcmVmb3ggKHBvdXIgb2Zmc2V0TGVmdCkgOiBtaW5IZWlnaHQgPSAxMCVcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLnN0eWxlLm1pbkhlaWdodCE9PVwiMTAlXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9zZWN0aW9uc1tpXS5zdHlsZS5taW5IZWlnaHQgPSBcIjEwJVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvL21hbnVhbCBicmVha3Ncblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2JyZWFrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tIT09XCIzMDAlXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tID0gXCIzMDAlXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vbGFzdCBlbGVtZW50XG5cdFx0XHRpZih0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20hPT1cIjMwMCVcIikge1xuXHRcdFx0XHR0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjMwMCVcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly90ZXh0XG5cdFx0XHR0cy5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdHRzLndlYmtpdEJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuXHRcdFx0dHMucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHR0cy5sZWZ0ID0gMDtcblx0XHRcdHRzLnRvcCA9IDA7XG5cdFx0XHR0cy5oZWlnaHQgPSBcIjEwMCVcIjtcblx0XHRcdHRzLndpZHRoID0gXCIxMDAlXCI7XG5cdFx0XHR0cy5tYXhXaWR0aCA9IFwiMTAwJVwiO1xuXHRcdFx0dHMubWF4SGVpZ2h0ID0gXCIxMDAlXCI7XG5cdFx0XHR0cy5wYWRkaW5nUmlnaHQgPSB0aGlzLmdldE1hcmdpblgoKSArIFwicHhcIjtcblx0XHRcdHRzLnBhZGRpbmdMZWZ0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0XHR0cy5wYWRkaW5nVG9wID0gdGhpcy5nZXRNYXJnaW5ZKCkgKyBcInB4XCI7XG5cdFx0XHR0cy5wYWRkaW5nQm90dG9tID0gdGhpcy5nZXRNYXJnaW5ZKCkgKyBcInB4XCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5GaWxsID0gXCJhdXRvXCI7Ly9pbXBvcnRhbnQgISEhXG5cdFx0XHR0cy5jb2x1bW5GaWxsID0gXCJhdXRvXCI7Ly9pbXBvcnRhbnQgISEhXG5cdFx0XHR0cy5XZWJraXRDb2x1bW5zV2lkdGggPSB0aGlzLl9jb250YWluZXJXaWR0aCArIFwicHhcIjtcblx0XHRcdHRzLk1vekNvbHVtbldpZHRoID0gdGhpcy5fY29udGFpbmVyV2lkdGggKyBcInB4XCI7XG5cdFx0XHR0cy5jb2x1bW5XaWR0aCA9IHRoaXMuX2NvbnRhaW5lcldpZHRoICsgXCJweFwiO1xuXHRcdFx0dHMuTW96Q29sdW1uR2FwID0gdGhpcy5nZXRNYXJnaW5YKCkqMiArIFwicHhcIjtcblx0XHRcdHRzLldlYmtpdENvbHVtbkdhcCA9IHRoaXMuZ2V0TWFyZ2luWCgpKjIgKyBcInB4XCI7XG5cdFx0XHR0cy5jb2x1bW5HYXAgPSB0aGlzLmdldE1hcmdpblgoKSoyICsgXCJweFwiO1xuXHRcdFx0XG5cdFx0XHQvL0dvIHRvIGJvb2ttYXJrXG5cdFx0XHRpZih0aGlzLl9ib29rbWFyaykge1xuXHRcdFx0XHR0aGlzLmdvVG9Cb29rbWFyayh0aGlzLl9ib29rbWFyayk7XG5cdFx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fdGV4dC5vZmZzZXRMZWZ0O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvL1JlZnJlc2ggaW5mbyBjb250YWluZXJzXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHRcdC8vY29uc29sZS5sb2codGhpcy5fYm9va0NvbnRhaW5lci5vZmZzZXRIZWlnaHQgLSB0aGlzLmdldEhlaWdodCgpKTtcblx0XHR9XG5cdH1cblxuXHR0b1Njcm9sbCgpIHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0dGhpcy5jb2wgPSBmYWxzZTtcblx0XHRsZXQgY3MgPSB0aGlzLl9jb250YWluZXIuc3R5bGU7XG5cdFx0bGV0IHRzID0gdGhpcy5fdGV4dC5zdHlsZTtcblx0XHQvL2NvbnRhaW5lclxuXHRcdGNzLmhlaWdodCA9IFwiYXV0b1wiO1xuXHRcdGNzLm1heFdpZHRoID0gdGhpcy5nZXRNYXhXaWR0aCgpICsgXCJweFwiO1xuXHRcdGNzLm92ZXJmbG93ID0gXCJ2aXNpYmxlXCI7XG5cdFx0Ly90ZXh0XG5cdFx0dHMucG9zaXRpb24gPSBcInN0YXRpY1wiO1xuXHRcdHRzLmhlaWdodCA9IFwiYXV0b1wiO1xuXHRcdGNzLnBhZGRpbmdSaWdodCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdMZWZ0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0Y3MucGFkZGluZ1RvcCA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdCb3R0b20gPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblxuXHRcdGlmKCdXZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyAgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSkge1xuXHRcdFx0dHMuV2Via2l0Q29sdW1ucyA9IFwiYXV0byAxXCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5zID0gXCJhdXRvIDFcIjtcblx0XHRcdHRzLmNvbHVtbnMgPSBcImF1dG8gMVwiO1xuXHRcdH1cblxuXHRcdC8vU2VjdGlvbnMgKGZvciBtb3pDb2x1bW5zKVxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLl9zZWN0aW9uc1tpXS5zdHlsZS5taW5IZWlnaHQgPSBcIjBcIjtcblx0XHR9XG5cdFx0Ly9tYW51YWwgYnJlYWtzXG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fYnJlYWtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tID0gXCIwXCI7XG5cdFx0fVxuXHRcdC8vbGFzdCBlbGVtZW50XG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIwcHhcIjtcblxuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9O1xuXG5cdHNldE1heFdpZHRoKHcpIHtcblx0XHR0aGlzLl93aWR0aCA9IHc7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRNYXhXaWR0aCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fd2lkdGg7XG5cdH1cblxuXHRzZXRIZWlnaHQoaCkge1xuXHRcdHRoaXMuX2hlaWdodCA9IGg7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRIZWlnaHQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2hlaWdodDtcblx0fVxuXG5cdHNldE1hcmdpblgobSkge1xuXHRcdHRoaXMuX21hcmdpblggPSBtO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWFyZ2luWCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFyZ2luWDtcblx0fVxuXG5cdHNldE1hcmdpblkobSkge1xuXHRcdHRoaXMuX21hcmdpblkgPSBtO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWFyZ2luWSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFyZ2luWTtcblx0fVxuXG5cdGZvcndhcmQoKSB7XG5cdFx0aWYodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdCt0aGlzLl9wb3NpdGlvbiA+IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpKSB7XG5cdFx0XHQvL2xldCBjbG9uZSA9IHRoaXMuX3RleHQuY2xvbmVOb2RlKHRydWUpO1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiAtPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKGNsb25lKTtcblx0XHRcdC8vY2xvbmUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHQvL3RoaXMuX2NvbnRhaW5lci5pbnNlcnRCZWZvcmUoY2xvbmUsdGhpcy50ZXh0KTtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdGJhY2t3YXJkKCkge1xuXHRcdGlmKHRoaXMuX3Bvc2l0aW9uIDwgMCkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiArPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0fVxuXHR9XG5cblx0dG9GaXJzdFBhZ2UoKSB7XG5cdFx0aWYodGhpcy5fcG9zaXRpb24gPCAwKSB7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IDA7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbiArIFwicHhcIjtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdHRvTGFzdFBhZ2UoKSB7XG5cdFx0aWYodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdCt0aGlzLl9wb3NpdGlvbiA+IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpKSB7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpLXRoaXMuX2xhc3RFbGVtZW50Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbitcInB4XCI7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblx0XG5cdGdldFBhZ2VTdGFydCgpIHtcblx0XHRsZXQgaW5kZXgsIHN0YXJ0SW5kZXg7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IHRoaXMuX3NlY3Rpb25zLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tcGFnZS8pKSB7XG5cdFx0XHRcdGluZGV4ID0gaTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKGluZGV4IT09dW5kZWZpbmVkICYmIHN0YXJ0SW5kZXg9PT11bmRlZmluZWQpIHtcblx0XHRcdFx0XHRzdGFydEluZGV4ID0gaTtcblx0XHRcdFx0XHRsZXQgZWwgPSB0aGlzLl9zZWN0aW9uc1tzdGFydEluZGV4XTtcblx0XHRcdFx0XHRsZXQgZWxQb3NpdGlvbiA9IGVsLm9mZnNldExlZnQgLSB0aGlzLmdldE1hcmdpblgoKTtcblx0XHRcdFx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdFx0XHRcdHRoaXMuX3N0YXJ0UGFnZSA9IGVsUG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGNoZWNrRmlyc3RQYWdlKCkge1xuXHRcdGxldCBjaGVjayA9IHRoaXMuX3Bvc2l0aW9uPT09MCA/IHRydWUgOiBmYWxzZTtcblx0XHRyZXR1cm4gY2hlY2s7XG5cdH1cblxuXHRnZXRQYWdlTnVtYmVyKCkge1xuXHRcdC8vdGhpcy5fcG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGggaXMgc3RhcnQgb2YgYSBwYWdlIDogc3RhcnQgMCBpcyBwYWdlIDEsLi4uIChzbyA6ICsxKVxuXHRcdGxldCBwYWdlTnVtYmVyID0gTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLl9wb3NpdGlvbi90aGlzLl9jb250YWluZXJXaWR0aCkpKzE7XG5cdFx0Ly90aGlzLl9zdGFydFBhZ2UgKHBhZ2luYXRpb24gc3RhcnQpXG5cdFx0cGFnZU51bWJlciA9IHBhZ2VOdW1iZXItKHRoaXMuX3N0YXJ0UGFnZSk7XG5cdFx0cmV0dXJuIHBhZ2VOdW1iZXI7XG5cdH1cblxuXHRnZXRUb3RhbFBhZ2VzKCkge1xuXHRcdGxldCB0b3RhbFBhZ2VzID0gTWF0aC5mbG9vcih0aGlzLl9sYXN0RWxlbWVudC5vZmZzZXRMZWZ0L3RoaXMuX2NvbnRhaW5lcldpZHRoKTtcblx0XHR0b3RhbFBhZ2VzID0gdG90YWxQYWdlcy0odGhpcy5fc3RhcnRQYWdlKTtcblx0XHRyZXR1cm4gdG90YWxQYWdlcztcblx0fVxuXG5cdGdvVG9QYWdlKG51bWJlcikge1xuXHRcdG51bWJlciA9IChudW1iZXI8MS0odGhpcy5fc3RhcnRQYWdlKSA/IDEtKHRoaXMuX3N0YXJ0UGFnZSkgOiBudW1iZXIpO1xuXHRcdG51bWJlcj0gKG51bWJlcj50aGlzLmdldFRvdGFsUGFnZXMoKSA/IHRoaXMuZ2V0VG90YWxQYWdlcygpIDogbnVtYmVyKTtcblx0XHRudW1iZXIgPSBudW1iZXIgKyAodGhpcy5fc3RhcnRQYWdlKTtcblx0XHRsZXQgcG9zaXRpb24gPSB0aGlzLl9jb250YWluZXJXaWR0aCoobnVtYmVyLTEpO1xuXHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IC1wb3NpdGlvbiArIFwicHhcIjtcblx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG5cdGVsZW1lbnRQYWdlTnVtYmVyKGlkKSB7XG5cdFx0bGV0IGVsID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yKCcjJyArIGlkKTtcblx0XHRsZXQgZWxQb3NpdGlvbiA9IGVsLm9mZnNldExlZnQgLSB0aGlzLmdldE1hcmdpblgoKTtcblx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdGxldCBlbFBhZ2VOdW1iZXIgPSBlbFBvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoICsgMTsvL2VsUG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGggaXMgcG9zaXRpb24gb2YgYSBwYWdlIDogcG9zaXRpb24gMCBpcyBwYWdlIDEsLi4uXG5cdFx0ZWxQYWdlTnVtYmVyID0gZWxQYWdlTnVtYmVyLSh0aGlzLl9zdGFydFBhZ2UpO1xuXHRcdHJldHVybiBlbFBhZ2VOdW1iZXI7XG5cdH1cblxuXHRnZXRTZWN0aW9uVGl0bGUoKSB7XG5cdFx0bGV0IHBvc2l0aW9uID0gLXRoaXMuX3Bvc2l0aW9uO1xuXHRcdGxldCB0aXRsZTtcblx0XHRmb3IobGV0IGk9MTsgaTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYodGhpcy5fc2VjdGlvbnNbaV0ub2Zmc2V0TGVmdC10aGlzLl9jb250YWluZXJXaWR0aD49cG9zaXRpb24pIHtcblx0XHRcdFx0bGV0IGlkID0gdGhpcy5fc2VjdGlvbnNbaS0xXS5pZDtcblx0XHRcdFx0aWYoaWQhPT11bmRlZmluZWQgJiYgdGhpcy5nZXRQYWdlTnVtYmVyKCkgPT09IHRoaXMuZWxlbWVudFBhZ2VOdW1iZXIoaWQpKSB7XG5cdFx0XHRcdFx0dGl0bGUgPSBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRpdGxlID0gdGhpcy5fc2VjdGlvbnNbaS0xXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUnKSA/IHRoaXMuX3NlY3Rpb25zW2ktMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlJykgOiB0aGlzLl9zZWN0aW9uc1tpLTFdLnRpdGxlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGl0bGU7XG5cdH1cblx0XG5cdGdldFRvYygpIHtcblx0XHRpZih0aGlzLl90b2NzLmxlbmd0aD09PTApIHsgcmV0dXJuOyB9XG5cdFx0XG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fdG9jcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IHRvYyA9IHRoaXMuX3RvY3NbaV07XG5cdFx0XHRpZih0b2MuZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRvYycpKSB7XG5cdFx0XHRcdGxldCB0b2NUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0XHRcdFx0dG9jVGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy10aXRsZScpO1xuXHRcdFx0XHR0b2NUaXRsZS5pbm5lckhUTUwgPSB0b2MuZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRvYycpO1xuXHRcdFx0XHR0b2MuYXBwZW5kQ2hpbGQodG9jVGl0bGUpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXHRcdFx0bGlzdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWxpc3QnKTtcblx0XHRcdGZvcihsZXQgaj0wOyBqPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGxldCBzZWN0aW9uID0gdGhpcy5fc2VjdGlvbnNbal07XG5cdFx0XHRcdGlmKCFzZWN0aW9uLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tdG9jLykpIHtcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cdFx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWl0ZW0nKTtcblx0XHRcdFx0XHRsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblx0XHRcdFx0XHRsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICcjJyArIHNlY3Rpb24uaWQpO1xuXHRcdFx0XHRcdGxpbmsuc2V0QXR0cmlidXRlKCdjbGFzcycsICd3Yi1saW5rJyk7XG5cdFx0XHRcdFx0aXRlbS5hcHBlbmRDaGlsZChsaW5rKTtcblx0XHRcdFx0XHRsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRcdFx0dGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1pdGVtLXRpdGxlJyk7XG5cdFx0XHRcdFx0dGl0bGUuaW5uZXJIVE1MID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUtdG9jJykgPyBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZS10b2MnKSA6IHNlY3Rpb24udGl0bGU7XG5cdFx0XHRcdFx0bGluay5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cdFx0XHRcdFx0aWYoIXNlY3Rpb24uY2xhc3NOYW1lLm1hdGNoKC93Yi10b2Mtbm8tcGFnZS1udW1iZXIvKSkge1xuXHRcdFx0XHRcdFx0bGV0IHBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRcdFx0XHR0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWl0ZW0tcGFnZS1udW1iZXInKTtcblx0XHRcdFx0XHRcdHBhZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLXdiLWVsZW1lbnQtcGFnZS1udW1iZXInLCBzZWN0aW9uLmlkKTtcblx0XHRcdFx0XHRcdGxpbmsuYXBwZW5kQ2hpbGQocGFnZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRvYy5hcHBlbmRDaGlsZChsaXN0KTtcblx0XHR9XG5cdH1cblx0XG5cdGdldFRvY0N1cnJlbnRTZWN0aW9uKCkge1xuXHRcdGxldCBwb3NpdGlvbiA9IC10aGlzLl9wb3NpdGlvbjtcblx0XHR0aGlzLl90b2NTZWN0aW9ucy5wdXNoKHRoaXMuX2xhc3RFbGVtZW50KTtcblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl90b2NzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgdG9jID0gdGhpcy5fdG9jc1tpXTtcblx0XHRcdGZvcihsZXQgaT0xOyBpPHRoaXMuX3RvY1NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3RvY1NlY3Rpb25zW2ldLm9mZnNldExlZnQtdGhpcy5fY29udGFpbmVyV2lkdGg+PXBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0bGV0IGlkID0gdGhpcy5fdG9jU2VjdGlvbnNbaS0xXS5pZDtcblx0XHRcdFx0XHRsZXQgbGlua3MgPSB0b2MucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXHRcdFx0XHRcdGZvcihsZXQgaj0wOyBqPGxpbmtzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0XHRsZXQgbGluayA9IGxpbmtzW2pdO1xuXHRcdFx0XHRcdFx0aWYobGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5yZXBsYWNlKC9eIy8sJycpID09PSBpZCkge1xuXHRcdFx0XHRcdFx0XHRpZighbGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSs9JyBjdXJyZW50Jztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYobGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZT1saW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoLyBjdXJyZW50LywnJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdH1cblx0XHR0aGlzLl90b2NTZWN0aW9ucy5wb3AodGhpcy5fbGFzdEVsZW1lbnQpO1xuXHRcdFxuXHR9XG5cblx0aW5zZXJ0Qm9va21hcmsoKSB7XG5cdFx0bGV0IGJvb2ttYXJrID0gbnVsbDtcblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IGVsUG9zaXRpb24gPSB0aGlzLl9lbGVtZW50c1tpXS5vZmZzZXRMZWZ0LXRoaXMuZ2V0TWFyZ2luWCgpO1xuXHRcdFx0ZWxQb3NpdGlvbiA9IChlbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIT09MCA/IGVsUG9zaXRpb24tZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCA6IGVsUG9zaXRpb24pOy8vYWx3YXlzIGF0IGEgcGFnZSBiZWdpbm5pbmdcblx0XHRcdGlmKGVsUG9zaXRpb24gPT09IC10aGlzLl9wb3NpdGlvbilcblx0XHRcdHtcblx0XHRcdFx0Ym9va21hcmsgPSBpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoZWxQb3NpdGlvbiA+IC10aGlzLl9wb3NpdGlvbilcblx0XHRcdHtcblx0XHRcdFx0Ym9va21hcmsgPSBpLTE7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLl9ib29rbWFyayA9IGJvb2ttYXJrO1xuXHR9XG5cblx0Z29Ub0Jvb2ttYXJrKGJvb2ttYXJrKSB7XG5cdFx0bGV0IGVsZW1lbnQgPSB0aGlzLl9lbGVtZW50c1t0aGlzLl9ib29rbWFya107XG5cdFx0Ly9wb3NpdGlvbiA6IG9mZnNldExlZnQgb2YgZWxlbWVudCByZWxhdGl2ZSB0byB0ZXh0XG5cdFx0bGV0IHBvc2l0aW9uID0gZWxlbWVudC5vZmZzZXRMZWZ0LXRoaXMuZ2V0TWFyZ2luWCgpO1xuXHRcdHBvc2l0aW9uID0gKHBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIT09MCA/IHBvc2l0aW9uLXBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogcG9zaXRpb24pOy8vYWx3YXlzIGF0IGEgcGFnZSBiZWdpbm5pbmdcblx0XHQvL3RleHQgcG9zaXRpb24gPSAtcG9zaXRpb25cblx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSAtcG9zaXRpb24gKyBcInB4XCI7XG5cdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH1cblxuXHRyZWZyZXNoKCkge1xuXHRcdHRoaXMuaW5zZXJ0Qm9va21hcmsoKTtcblxuXHRcdGlmKHRoaXMuY29sPT09ZmFsc2UpIHtcblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fY3VycmVudFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX2N1cnJlbnRQYWdlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl90b3RhbFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX3RvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fY3VycmVudFRvdGFsUGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fY3VycmVudFRvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fZWxQYWdlTnVtYmVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25UaXRsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fc2VjdGlvblRpdGxlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fSBlbHNlIHtcblx0XHRcdFxuXHRcdFx0dGhpcy5nZXRQYWdlU3RhcnQoKTtcblx0XHRcdFxuXHRcdFx0aWYodGhpcy5fdG9jcy5sZW5ndGghPT0wKSB7XG5cdFx0XHRcdHRoaXMuZ2V0VG9jQ3VycmVudFNlY3Rpb24oKTtcblx0XHRcdH1cdFxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9jdXJyZW50UGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fY3VycmVudFBhZ2VzW2ldLmlubmVySFRNTCE9dGhpcy5nZXRQYWdlTnVtYmVyKCkpIHtcblx0XHRcdFx0XHR0aGlzLl9jdXJyZW50UGFnZXNbaV0uaW5uZXJIVE1MID0gdGhpcy5nZXRQYWdlTnVtYmVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fdG90YWxQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl90b3RhbFBhZ2VzW2ldLmlubmVySFRNTCE9dGhpcy5nZXRQYWdlTnVtYmVyKCkpIHtcblx0XHRcdFx0XHR0aGlzLl90b3RhbFBhZ2VzW2ldLmlubmVySFRNTCA9IHRoaXMuZ2V0UGFnZU51bWJlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuZ2V0UGFnZU51bWJlcigpIDwgMSkge1xuXHRcdFx0XHRcdHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSBpZih0aGlzLl9jdXJyZW50VG90YWxQYWdlc1tpXS5pbm5lckhUTUwhPT0gdGhpcy5nZXRQYWdlTnVtYmVyKCkgKyBcIi9cIiArIHRoaXMuZ2V0VG90YWxQYWdlcygpKSB7XG5cdFx0XHRcdFx0dGhpcy5fY3VycmVudFRvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gdGhpcy5nZXRQYWdlTnVtYmVyKCkgKyBcIi9cIiArIHRoaXMuZ2V0VG90YWxQYWdlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2VsUGFnZU51bWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bGV0IGlkID0gdGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItZWxlbWVudC1wYWdlLW51bWJlcicpO1xuXHRcdFx0XHRsZXQgcGFnZU51bWJlciA9IHRoaXMuZWxlbWVudFBhZ2VOdW1iZXIoaWQpO1xuXHRcdFx0XHRpZihwYWdlTnVtYmVyIDwgMSkge1xuXHRcdFx0XHRcdHRoaXMuX2VsUGFnZU51bWJlcnNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdFx0fSBlbHNlIGlmKHRoaXMuX2VsUGFnZU51bWJlcnNbaV0uaW5uZXJIVE1MIT1wYWdlTnVtYmVyKSB7XG5cdFx0XHRcdFx0dGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5pbm5lckhUTUwgPSBwYWdlTnVtYmVyO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25UaXRsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fc2VjdGlvblRpdGxlc1tpXS5pbm5lckhUTUwhPXRoaXMuZ2V0U2VjdGlvblRpdGxlKCkpIHtcblx0XHRcdFx0XHR0aGlzLl9zZWN0aW9uVGl0bGVzW2ldLmlubmVySFRNTCA9IHRoaXMuZ2V0U2VjdGlvblRpdGxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblx0fVxufVxuXG4iXX0=
