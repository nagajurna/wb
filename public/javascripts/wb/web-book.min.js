"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),WebBook=function(){function t(e,i){var s=this;_classCallCheck(this,t),this._bookContainer=e,this._textContainer=e.querySelector("[data-wb-text-container]"),this._text=e.querySelector("[data-wb-text]"),this._height=i.height,this._width=i.maxWidth,this._marginX=void 0===i.marginX?35:i.marginX,this._marginY=void 0===i.marginY?20:i.marginY,this._position=0,this.col=!0,this._bookmark=null,this._containerWidth=null,this._lastBreak=document.createElement("div"),this._lastBreak.className="wb-text-break",this._text.appendChild(this._lastBreak),this._lastElement=document.createElement("div"),this._lastElement.innerHTML="&nbsp;",this._lastElement.className="wb-section wb-no-toc",this._text.appendChild(this._lastElement),this._sections=this._text.querySelectorAll(".wb-section"),this._tocSections=[];for(var n=0;n<this._sections.length;n++)this._sections[n].className.match(/wb-no-toc/)||this._tocSections.push(this._sections[n]);this._breaks=this._text.querySelectorAll(".wb-text-break"),this._elements=this._text.querySelectorAll(":not(.wb-text-break)"),this._tocs=this._bookContainer.querySelectorAll("[data-wb-toc]"),this.getToc(),this._currentPages=this._bookContainer.querySelectorAll(".wb-current-page"),this._totalPages=this._bookContainer.querySelectorAll(".wb-total-pages"),this._currentTotalPages=this._bookContainer.querySelectorAll(".wb-currentByTotal-pages"),this._elPageNumbers=this._bookContainer.querySelectorAll("[data-wb-element-page-number]"),this._sectionTitles=this._bookContainer.querySelectorAll(".wb-current-section-title"),this._startPage=null;for(var o=this._bookContainer.querySelectorAll(".wb-link"),a=0;a<o.length;a++)o[a].addEventListener("click",function(t){if(!0===s.col){t.preventDefault();var e=t.currentTarget.getAttribute("href").replace(/^#/,"");s.goToPage(s.elementPageNumber(e))}},!1);"WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style?this.toBook():this.toScroll()}return _createClass(t,[{key:"toBook",value:function(){if("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style){this.col=!0;var t=this._textContainer.style,e=this._text.style;t.boxSizing="border-box",t.webkitBoxSizing="border-box",t.overflow="hidden",t.position="relative",t.padding="0px",t.height=this.getHeight()+"px",t.maxWidth=this.getMaxWidth()+"px",this._containerWidth=this._textContainer.clientWidth;for(var i=0;i<this._sections.length;i++)"10%"!==this._sections[i].style.minHeight&&(this._sections[i].style.minHeight="10%");for(var s=0;s<this._breaks.length;s++)"300%"!==this._breaks[s].style.marginBottom&&(this._breaks[s].style.marginBottom="300%");"300%"!==this._lastElement.style.marginBottom&&(this._lastElement.style.marginBottom="300%"),e.boxSizing="border-box",e.webkitBoxSizing="border-box",e.position="absolute",e.left=0,e.top=0,e.height="100%",e.width="100%",e.maxWidth="100%",e.maxHeight="100%",e.paddingRight=this.getMarginX()+"px",e.paddingLeft=this.getMarginX()+"px",e.paddingTop=this.getMarginY()+"px",e.paddingBottom=this.getMarginY()+"px",e.MozColumnFill="auto",e.columnFill="auto",e.WebkitColumnWidth=this._containerWidth+"px",e.MozColumnWidth=this._containerWidth+"px",e.columnWidth=this._containerWidth+"px",e.MozColumnGap=2*this.getMarginX()+"px",e.WebkitColumnGap=2*this.getMarginX()+"px",e.columnGap=2*this.getMarginX()+"px",this._bookmark&&(this.goToBookmark(this._bookmark),this._position=this._text.offsetLeft),this.refresh()}}},{key:"toScroll",value:function(){this.col=!1;var t=this._container.style,e=this._text.style;t.height="auto",t.maxWidth=this.getMaxWidth()+"px",t.overflow="visible",e.position="static",e.height="auto",t.paddingRight=this.getMarginX()+"px",t.paddingLeft=this.getMarginX()+"px",t.paddingTop=this.getMarginY()+"px",t.paddingBottom=this.getMarginY()+"px",("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style)&&(e.WebkitColumns="auto 1",e.MozColumns="auto 1",e.columns="auto 1");for(var i=0;i<this._sections.length;i++)this._sections[i].style.minHeight="0";for(var s=0;s<this._breaks.length;s++)this._breaks[s].style.marginBottom="0";this._lastElement.style.marginBottom="0px",this.refresh()}},{key:"setMaxWidth",value:function(t){return this._width=t,this}},{key:"getMaxWidth",value:function(){return this._width}},{key:"setHeight",value:function(t){return this._height=t,this}},{key:"getHeight",value:function(){return this._height}},{key:"setMarginX",value:function(t){return this._marginX=t,this}},{key:"getMarginX",value:function(){return this._marginX}},{key:"setMarginY",value:function(t){return this._marginY=t,this}},{key:"getMarginY",value:function(){return this._marginY}},{key:"forward",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._text.offsetLeft,this._position-=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"backward",value:function(){this._position<0&&(this._position=this._text.offsetLeft,this._position+=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"toFirstPage",value:function(){this._position<0&&(this._position=0,this._text.style.left=this._position+"px",this.refresh())}},{key:"toLastPage",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._containerWidth+this.getMarginX()-this._lastElement.offsetLeft,this._text.style.left=this._position+"px",this.refresh())}},{key:"getPageStart",value:function(){for(var t=void 0,e=void 0,i=0;i<this._sections.length-1;i++)if(this._sections[i].className.match(/wb-no-page/))t=i;else if(void 0!==t&&void 0===e){e=i;var s=this._sections[e].offsetLeft-this.getMarginX();s=s%this._containerWidth!=0?s-s%this._containerWidth:s,this._startPage=s/this._containerWidth}}},{key:"checkFirstPage",value:function(){return 0===this._position}},{key:"getPageNumber",value:function(){var t=Math.abs(Math.floor(this._position/this._containerWidth))+1;return t-=this._startPage}},{key:"getTotalPages",value:function(){var t=Math.floor(this._lastElement.offsetLeft/this._containerWidth);return t-=this._startPage}},{key:"goToPage",value:function(t){t=(t=t<1-this._startPage?1-this._startPage:t)>this.getTotalPages()?this.getTotalPages():t,t+=this._startPage;var e=this._containerWidth*(t-1);this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"elementPageNumber",value:function(t){var e=this._text.querySelector("#"+t).offsetLeft-this.getMarginX(),i=(e=e%this._containerWidth!=0?e-e%this._containerWidth:e)/this._containerWidth+1;return i-=this._startPage}},{key:"getSectionTitle",value:function(){for(var t=-this._position,e=void 0,i=1;i<this._sections.length;i++)if(this._sections[i].offsetLeft-this._containerWidth>=t){var s=this._sections[i-1].id;e=void 0!==s&&this.getPageNumber()===this.elementPageNumber(s)?"":this._sections[i-1].getAttribute("data-wb-title")?this._sections[i-1].getAttribute("data-wb-title"):this._sections[i-1].title;break}return e}},{key:"getToc",value:function(){if(0!==this._tocs.length)for(var t=0;t<this._tocs.length;t++){var e=this._tocs[t];if(e.getAttribute("data-wb-toc")){var i=document.createElement("p");i.setAttribute("class","wb-toc-title"),i.innerHTML=e.getAttribute("data-wb-toc"),e.appendChild(i)}var s=document.createElement("ul");s.setAttribute("class","wb-toc-list");for(var n=0;n<this._sections.length;n++){var o=this._sections[n];if(!o.className.match(/wb-no-toc/)){var a=document.createElement("li");if(a.setAttribute("class","wb-toc-item"),o.className.match(/wb-toc-no-page-number/)){var r=document.createElement("span");r.setAttribute("class","wb-toc-item-title"),r.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,a.appendChild(r)}else{var h=document.createElement("a");h.setAttribute("href","#"+o.id),h.setAttribute("class","wb-link"),a.appendChild(h);var l=document.createElement("span");l.setAttribute("class","wb-toc-item-title"),l.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,h.appendChild(l);var c=document.createElement("span");c.setAttribute("class","wb-toc-item-page-number"),c.setAttribute("data-wb-element-page-number",o.id),h.appendChild(c)}s.appendChild(a)}}e.appendChild(s)}}},{key:"getTocCurrentSection",value:function(){var t=-this._position;this._tocSections.push(this._lastElement),this._sections[0].className.match(/wb-no-toc/)&&this._tocSections.unshift(this._sections[0]);for(var e=0;e<this._tocs.length;e++)for(var i=this._tocs[e],s=1;s<this._tocSections.length;s++)if(this._tocSections[s].offsetLeft-this._containerWidth>=t){for(var n=this._tocSections[s-1].id,o=i.querySelectorAll("a"),a=0;a<o.length;a++){var r=o[a];r.getAttribute("href").replace(/^#/,"")===n?r.parentElement.className.match(/current/)||(r.parentElement.className+=" current"):r.parentElement.className.match(/current/)&&(r.parentElement.className=r.parentElement.className.replace(/ current/,""))}break}this._tocSections.pop(this._lastElement),this._sections[0].className.match(/wb-no-toc/)&&this._tocSections.shift(this._sections[0])}},{key:"insertBookmark",value:function(){for(var t=null,e=0;e<this._elements.length;e++){var i=this._elements[e].offsetLeft-this.getMarginX();if((i=i%this._containerWidth!=0?i-i%this._containerWidth:i)===-this._position){t=e;break}if(i>-this._position){t=e-1;break}}this._bookmark=t}},{key:"goToBookmark",value:function(t){var e=this._elements[this._bookmark].offsetLeft-this.getMarginX();e=e%this._containerWidth!=0?e-e%this._containerWidth:e,this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"refresh",value:function(){if(this.insertBookmark(),!1===this.col){for(var t=0;t<this._currentPages.length;t++)this._currentPages[t].innerHTML="";for(var e=0;e<this._totalPages.length;e++)this._totalPages[e].innerHTML="";for(var i=0;i<this._currentTotalPages.length;i++)this._currentTotalPages[i].innerHTML="";for(var s=0;s<this._elPageNumbers.length;s++)this._elPageNumbers[s].innerHTML="";for(var n=0;n<this._sectionTitles.length;n++)this._sectionTitles[n].innerHTML=""}else{this.getPageStart(),0!==this._tocs.length&&this.getTocCurrentSection();for(var o=0;o<this._currentPages.length;o++)this._currentPages[o].innerHTML!=this.getPageNumber()&&(this._currentPages[o].innerHTML=this.getPageNumber());for(var a=0;a<this._totalPages.length;a++)this._totalPages[a].innerHTML!=this.getPageNumber()&&(this._totalPages[a].innerHTML=this.getPageNumber());for(var r=0;r<this._currentTotalPages.length;r++)this.getPageNumber()<1?this._currentTotalPages[r].innerHTML="":this._currentTotalPages[r].innerHTML!==this.getPageNumber()+"/"+this.getTotalPages()&&(this._currentTotalPages[r].innerHTML=this.getPageNumber()+"/"+this.getTotalPages());for(var h=0;h<this._elPageNumbers.length;h++){var l=this._elPageNumbers[h].getAttribute("data-wb-element-page-number"),c=this.elementPageNumber(l);c<1?this._elPageNumbers[h].innerHTML="":this._elPageNumbers[h].innerHTML!=c&&(this._elPageNumbers[h].innerHTML=c)}for(var g=0;g<this._sectionTitles.length;g++)this._sectionTitles[g].innerHTML!=this.getSectionTitle()&&(this._sectionTitles[g].innerHTML=this.getSectionTitle())}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi1ib29rLmpzIl0sIm5hbWVzIjpbIldlYkJvb2siLCJib29rQ29udGFpbmVyIiwib3B0aW9ucyIsIl90aGlzIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9ib29rQ29udGFpbmVyIiwiX3RleHRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiX3RleHQiLCJfaGVpZ2h0IiwiX3dpZHRoIiwibWF4V2lkdGgiLCJfbWFyZ2luWCIsInVuZGVmaW5lZCIsIm1hcmdpblgiLCJfbWFyZ2luWSIsIm1hcmdpblkiLCJfcG9zaXRpb24iLCJoZWlnaHQiLCJfbGFzdEVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb2wiLCJjbGFzc05hbWUiLCJfYm9va21hcmsiLCJfc2VjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2xhc3RCcmVhayIsImFwcGVuZENoaWxkIiwiaSIsIm1hdGNoIiwiX2JyZWFrcyIsIl9lbGVtZW50cyIsIl90b2NzIiwiZ2V0VG9jIiwiX2N1cnJlbnRQYWdlcyIsIl90b3RhbFBhZ2VzIiwiX2VsUGFnZU51bWJlcnMiLCJsaW5rcyIsImxlbmd0aCIsIl9jdXJyZW50VG90YWxQYWdlcyIsImUiLCJpZCIsIl9zZWN0aW9uVGl0bGVzIiwicmVwbGFjZSIsIl9zdGFydFBhZ2UiLCJlbGVtZW50UGFnZU51bWJlciIsImJvZHkiLCJzdHlsZSIsInByZXZlbnREZWZhdWx0IiwidG9TY3JvbGwiLCJ0b0Jvb2siLCJjcyIsInRzIiwiYm94U2l6aW5nIiwid2Via2l0Qm94U2l6aW5nIiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsInBhZGRpbmciLCJnZXRIZWlnaHQiLCJnZXRNYXhXaWR0aCIsImNsaWVudFdpZHRoIiwibWluSGVpZ2h0IiwiX2NvbnRhaW5lcldpZHRoIiwibWFyZ2luQm90dG9tIiwibGVmdCIsInRvcCIsIndpZHRoIiwibWF4SGVpZ2h0IiwicGFkZGluZ1JpZ2h0IiwiZ2V0TWFyZ2luWCIsImdldE1hcmdpblkiLCJNb3pDb2x1bW5GaWxsIiwiY29sdW1uRmlsbCIsIldlYmtpdENvbHVtbldpZHRoIiwiV2Via2l0Q29sdW1uR2FwIiwiX2NvbnRhaW5lciIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJjb2x1bW5zIiwicmVmcmVzaCIsInciLCJoIiwibSIsIm9mZnNldExlZnQiLCJpbmRleCIsInN0YXJ0SW5kZXgiLCJlbFBvc2l0aW9uIiwicGFnZU51bWJlciIsIk1hdGgiLCJhYnMiLCJmbG9vciIsInRvdGFsUGFnZXMiLCJudW1iZXIiLCJnZXRUb3RhbFBhZ2VzIiwiZWxQYWdlTnVtYmVyIiwidGl0bGUiLCJnZXRQYWdlTnVtYmVyIiwiZ2V0QXR0cmlidXRlIiwidG9jIiwiZWwiLCJ0b2NUaXRsZSIsImxpc3QiLCJzZXRBdHRyaWJ1dGUiLCJqIiwic2VjdGlvbiIsIml0ZW0iLCJsaW5rIiwicGFnZSIsIl90b2NTZWN0aW9ucyIsInBhcmVudEVsZW1lbnQiLCJwb3AiLCJzaGlmdCIsImJvb2ttYXJrIiwicHVzaCIsInVuc2hpZnQiLCJpbnNlcnRCb29rbWFyayIsImdldFRvY0N1cnJlbnRTZWN0aW9uIiwiZ2V0U2VjdGlvblRpdGxlIl0sIm1hcHBpbmdzIjoiNlhBQU1BLG1CQUNMLFNBQUFBLEVBQVlDLEVBQWVDLEdBQVMsSUFBQUMsRUFBQUMsS0FBQUMsZ0JBQUFELEtBQUFKLEdBRW5DSSxLQUFLRSxlQUFpQkwsRUFDdEJHLEtBQUtHLGVBQWlCTixFQUFjTyxjQUFjLDRCQUNsREosS0FBS0ssTUFBUVIsRUFBY08sY0FBYyxrQkFKMUNKLEtBQUFNLFFBQUFSLEVBQVlELE9BQXdCRyxLQUFBTyxPQUFBVCxFQUFBVSxTQVFuQ1IsS0FBS1MsY0FBNkJDLElBQWxCWixFQUFRYSxRQUFzQixHQUFLYixFQUFRYSxRQVJ4QlgsS0FBQVksY0FBQUYsSUFBQVosRUFBQWUsUUFBQSxHQUFBZixFQUFBZSxRQUNuQ2IsS0FBQWMsVUFBQSxFQUNBZCxLQUFLRSxLQUFBQSxFQUNM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UixHQUFBc0UsYUFBQSwrQkFvQ0lWLEVBQWF2RixLQUFLNEMsa0JBQWtCSixHQWxDekMrQyxFQUFBLEVBQ0N2RixLQUFLeUMsZUFBZWQsR0FBcEJSLFVBQUEsR0FDQW5CLEtBQUFtQyxlQUFBUixHQUFBUixXQUFBb0UsSUFwQkZ2RixLQXNCT21DLGVBQUFSLEdBQUFSLFVBQUFvRSxHQUlOLElBQUEsSUFBRzVELEVBQUtJLEVBQUFBLEVBQUwvQixLQUFXcUMsZUFBWUEsT0FBQVYsSUFDekIzQixLQUFLb0gsZUFBQUEsR0FBTGpHLFdBQUFuQixLQUFBcUgsb0JBQ0FySCxLQUFBeUMsZUFBQWQsR0FBQVIsVUFBQW5CLEtBQUFxSCIsImZpbGUiOiJ3ZWItYm9vay5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBXZWJCb29rIHtcblx0Y29uc3RydWN0b3IoYm9va0NvbnRhaW5lciwgb3B0aW9ucykge1xuXHRcdC8vY29udGFpbmVyc1xuXHRcdHRoaXMuX2Jvb2tDb250YWluZXIgPSBib29rQ29udGFpbmVyO1xuXHRcdHRoaXMuX3RleHRDb250YWluZXIgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHQtY29udGFpbmVyXScpO1xuXHRcdHRoaXMuX3RleHQgPSBib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRleHRdJyk7XG5cdFx0Ly9vcHRpb25zXG5cdFx0dGhpcy5faGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG5cdFx0dGhpcy5fd2lkdGggPSBvcHRpb25zLm1heFdpZHRoO1xuXHRcdHRoaXMuX21hcmdpblggPSBvcHRpb25zLm1hcmdpblg9PT11bmRlZmluZWQgPyAzNSA6IG9wdGlvbnMubWFyZ2luWDtcblx0XHR0aGlzLl9tYXJnaW5ZID0gb3B0aW9ucy5tYXJnaW5ZPT09dW5kZWZpbmVkID8gMjAgOiBvcHRpb25zLm1hcmdpblk7XG5cdFx0Ly9pbml0IHBvc2l0aW9uLCBjb2wgLGNvbnRhaW5lcldpZHRoIGFuZCBib29rbWFya1xuXHRcdHRoaXMuX3Bvc2l0aW9uID0gMDtcblx0XHR0aGlzLmNvbCA9IHRydWU7Ly9kZWZhdWx0IHRydWUgPSB0b0Jvb2soKVxuXHRcdHRoaXMuX2Jvb2ttYXJrID0gbnVsbDtcblx0XHR0aGlzLl9jb250YWluZXJXaWR0aCA9IG51bGw7XG5cdFx0Ly90aGlzLmxhc3RCcmVhayBpcyB1c2VkIGFzIGEgZ2hvc3QgcGFnZVxuXHRcdHRoaXMuX2xhc3RCcmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0dGhpcy5fbGFzdEJyZWFrLmNsYXNzTmFtZSA9IFwid2ItdGV4dC1icmVha1wiO1xuXHRcdHRoaXMuX3RleHQuYXBwZW5kQ2hpbGQodGhpcy5fbGFzdEJyZWFrKTtcblx0XHQvL3RoaXMuX2xhc3RFbGVtZW50IGlzIHVzZWQgYXMgbGFuZG1hcmtcblx0XHR0aGlzLl9sYXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuaW5uZXJIVE1MID0gXCImbmJzcDtcIjsvL25vdCBlbXB0eSAoZm9yIG1vekNvbHVtbnMpXG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuY2xhc3NOYW1lID0gXCJ3Yi1zZWN0aW9uIHdiLW5vLXRvY1wiO1xuXHRcdHRoaXMuX3RleHQuYXBwZW5kQ2hpbGQodGhpcy5fbGFzdEVsZW1lbnQpO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR0aGlzLl9zZWN0aW9ucyA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvckFsbCgnLndiLXNlY3Rpb24nKTtcblx0XHQvL3NlY3Rpb25zIHdpdGhvdXQgd2Itbm8tdG9jXG5cdFx0dGhpcy5fdG9jU2VjdGlvbnMgPSBbXVxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZighdGhpcy5fc2VjdGlvbnNbaV0uY2xhc3NOYW1lLm1hdGNoKC93Yi1uby10b2MvKSkge1xuXHRcdFx0XHR0aGlzLl90b2NTZWN0aW9ucy5wdXNoKHRoaXMuX3NlY3Rpb25zW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly9icmVha3Ncblx0XHR0aGlzLl9icmVha3MgPSB0aGlzLl90ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi10ZXh0LWJyZWFrJyk7XG5cdFx0Ly9lbGVtZW50cyA6IHNlbGVjdCBhbGwgZWxlbWVudHMgYnV0IC50ZXh0LWJyZWFrcyAoZm9yIGJvb2ttYXJrcylcblx0XHR0aGlzLl9lbGVtZW50cyA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvckFsbCgnOm5vdCgud2ItdGV4dC1icmVhayknKTtcblx0XHQvL3RvY1xuXHRcdHRoaXMuX3RvY3MgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXdiLXRvY10nKTtcblx0XHQvL3NldFRvYyBiZWZvcmUgcXVlcnlpbmcgdGhpcy5lbFBhZ2VOdW1iZXJzXG5cdFx0dGhpcy5nZXRUb2MoKTtcblx0XHQvL2luZm9zIGNvbnRhaW5lcnNcblx0XHR0aGlzLl9jdXJyZW50UGFnZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1jdXJyZW50LXBhZ2UnKTtcblx0XHR0aGlzLl90b3RhbFBhZ2VzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItdG90YWwtcGFnZXMnKTtcblx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWN1cnJlbnRCeVRvdGFsLXBhZ2VzJyk7XG5cdFx0dGhpcy5fZWxQYWdlTnVtYmVycyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtd2ItZWxlbWVudC1wYWdlLW51bWJlcl0nKTtcblx0XHR0aGlzLl9zZWN0aW9uVGl0bGVzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItY3VycmVudC1zZWN0aW9uLXRpdGxlJyk7XG5cdFx0Ly9zdGFydCBwYWdpbmF0aW9uXG5cdFx0dGhpcy5fc3RhcnRQYWdlID0gbnVsbDtcblx0XHQvL2xpbmtzIDogcmVwbGFjZSBkZWZhdWx0IHdpdGggZ29Ub1BhZ2Vcblx0XHRsZXQgbGlua3MgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1saW5rJyk7XG5cdFx0XHRcdFxuXHRcdGZvcihsZXQgaT0wOyBpPGxpbmtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuXHRcdFx0XHRpZih0aGlzLmNvbD09PXRydWUpIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0bGV0IGhyZWYgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cdFx0XHRcdFx0bGV0IGlkID0gaHJlZi5yZXBsYWNlKC9eIy8sXCJcIik7XG5cdFx0XHRcdFx0dGhpcy5nb1RvUGFnZSh0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZhbHNlKVxuXHRcdH1cblx0XHRcblx0XHRcblx0XHRpZignV2Via2l0Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ01vekNvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdjb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSkge1xuXHRcdFx0dGhpcy50b0Jvb2soKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50b1Njcm9sbCgpO1xuXHRcdH1cblxuXHR9XG5cblx0dG9Cb29rKCkge1xuXHRcdGlmKCdXZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyAgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSkge1xuXHRcdFx0dGhpcy5jb2wgPSB0cnVlO1xuXHRcdFx0bGV0IGNzID0gdGhpcy5fdGV4dENvbnRhaW5lci5zdHlsZTtcblx0XHRcdGxldCB0cyA9IHRoaXMuX3RleHQuc3R5bGU7XG5cdFx0XHQvL3RleHQtY29udGFpbmVyXG5cdFx0XHRjcy5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdGNzLndlYmtpdEJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuXHRcdFx0Y3Mub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdFx0Y3MucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0XHRjcy5wYWRkaW5nID0gXCIwcHhcIjtcblx0XHRcdGNzLmhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCkgKyBcInB4XCI7XG5cdFx0XHRjcy5tYXhXaWR0aCA9IHRoaXMuZ2V0TWF4V2lkdGgoKSArIFwicHhcIjsvL21heFdpZHRoIDogcmVzcG9uc2l2ZVxuXHRcdFx0dGhpcy5fY29udGFpbmVyV2lkdGggPSB0aGlzLl90ZXh0Q29udGFpbmVyLmNsaWVudFdpZHRoOy8vcmVzcG9uc2l2ZVxuXHRcdFx0XG5cdFx0XHQvL3NlY3Rpb25zXG5cdFx0XHQvL2hhY2sgZmlyZWZveCAocG91ciBvZmZzZXRMZWZ0KSA6IG1pbkhlaWdodCA9IDEwJVxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fc2VjdGlvbnNbaV0uc3R5bGUubWluSGVpZ2h0IT09XCIxMCVcIikge1xuXHRcdFx0XHRcdHRoaXMuX3NlY3Rpb25zW2ldLnN0eWxlLm1pbkhlaWdodCA9IFwiMTAlXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vbWFudWFsIGJyZWFrc1xuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fYnJlYWtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX2JyZWFrc1tpXS5zdHlsZS5tYXJnaW5Cb3R0b20hPT1cIjMwMCVcIikge1xuXHRcdFx0XHRcdHRoaXMuX2JyZWFrc1tpXS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjMwMCVcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly9sYXN0IGVsZW1lbnRcblx0XHRcdGlmKHRoaXMuX2xhc3RFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSE9PVwiMzAwJVwiKSB7XG5cdFx0XHRcdHRoaXMuX2xhc3RFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMzAwJVwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3RleHRcblx0XHRcdHRzLmJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuXHRcdFx0dHMud2Via2l0Qm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG5cdFx0XHR0cy5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRcdHRzLmxlZnQgPSAwO1xuXHRcdFx0dHMudG9wID0gMDtcblx0XHRcdHRzLmhlaWdodCA9IFwiMTAwJVwiO1xuXHRcdFx0dHMud2lkdGggPSBcIjEwMCVcIjtcblx0XHRcdHRzLm1heFdpZHRoID0gXCIxMDAlXCI7XG5cdFx0XHR0cy5tYXhIZWlnaHQgPSBcIjEwMCVcIjtcblx0XHRcdHRzLnBhZGRpbmdSaWdodCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdFx0dHMucGFkZGluZ0xlZnQgPSB0aGlzLmdldE1hcmdpblgoKSArIFwicHhcIjtcblx0XHRcdHRzLnBhZGRpbmdUb3AgPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblx0XHRcdHRzLnBhZGRpbmdCb3R0b20gPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblx0XHRcdHRzLk1vekNvbHVtbkZpbGwgPSBcImF1dG9cIjsvL2ltcG9ydGFudCAhISFcblx0XHRcdHRzLmNvbHVtbkZpbGwgPSBcImF1dG9cIjsvL2ltcG9ydGFudCAhISFcblx0XHRcdHRzLldlYmtpdENvbHVtbldpZHRoID0gdGhpcy5fY29udGFpbmVyV2lkdGggKyBcInB4XCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5XaWR0aCA9IHRoaXMuX2NvbnRhaW5lcldpZHRoICsgXCJweFwiO1xuXHRcdFx0dHMuY29sdW1uV2lkdGggPSB0aGlzLl9jb250YWluZXJXaWR0aCArIFwicHhcIjtcblx0XHRcdHRzLk1vekNvbHVtbkdhcCA9IHRoaXMuZ2V0TWFyZ2luWCgpKjIgKyBcInB4XCI7XG5cdFx0XHR0cy5XZWJraXRDb2x1bW5HYXAgPSB0aGlzLmdldE1hcmdpblgoKSoyICsgXCJweFwiO1xuXHRcdFx0dHMuY29sdW1uR2FwID0gdGhpcy5nZXRNYXJnaW5YKCkqMiArIFwicHhcIjtcblx0XHRcdFxuXHRcdFx0Ly9HbyB0byBib29rbWFya1xuXHRcdFx0aWYodGhpcy5fYm9va21hcmspIHtcblx0XHRcdFx0dGhpcy5nb1RvQm9va21hcmsodGhpcy5fYm9va21hcmspO1xuXHRcdFx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9SZWZyZXNoIGluZm8gY29udGFpbmVyc1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0XHQvL2NvbnNvbGUubG9nKHRoaXMuX2Jvb2tDb250YWluZXIub2Zmc2V0SGVpZ2h0IC0gdGhpcy5nZXRIZWlnaHQoKSk7XG5cdFx0fVxuXHR9XG5cblx0dG9TY3JvbGwoKSB7XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcdHRoaXMuY29sID0gZmFsc2U7XG5cdFx0bGV0IGNzID0gdGhpcy5fY29udGFpbmVyLnN0eWxlO1xuXHRcdGxldCB0cyA9IHRoaXMuX3RleHQuc3R5bGU7XG5cdFx0Ly9jb250YWluZXJcblx0XHRjcy5oZWlnaHQgPSBcImF1dG9cIjtcblx0XHRjcy5tYXhXaWR0aCA9IHRoaXMuZ2V0TWF4V2lkdGgoKSArIFwicHhcIjtcblx0XHRjcy5vdmVyZmxvdyA9IFwidmlzaWJsZVwiO1xuXHRcdC8vdGV4dFxuXHRcdHRzLnBvc2l0aW9uID0gXCJzdGF0aWNcIjtcblx0XHR0cy5oZWlnaHQgPSBcImF1dG9cIjtcblx0XHRjcy5wYWRkaW5nUmlnaHQgPSB0aGlzLmdldE1hcmdpblgoKSArIFwicHhcIjtcblx0XHRjcy5wYWRkaW5nTGVmdCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdUb3AgPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblx0XHRjcy5wYWRkaW5nQm90dG9tID0gdGhpcy5nZXRNYXJnaW5ZKCkgKyBcInB4XCI7XG5cblx0XHRpZignV2Via2l0Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ01vekNvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdjb2x1bW5XaWR0aCcgIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcblx0XHRcdHRzLldlYmtpdENvbHVtbnMgPSBcImF1dG8gMVwiO1xuXHRcdFx0dHMuTW96Q29sdW1ucyA9IFwiYXV0byAxXCI7XG5cdFx0XHR0cy5jb2x1bW5zID0gXCJhdXRvIDFcIjtcblx0XHR9XG5cblx0XHQvL1NlY3Rpb25zIChmb3IgbW96Q29sdW1ucylcblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5fc2VjdGlvbnNbaV0uc3R5bGUubWluSGVpZ2h0ID0gXCIwXCI7XG5cdFx0fVxuXHRcdC8vbWFudWFsIGJyZWFrc1xuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2JyZWFrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5fYnJlYWtzW2ldLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMFwiO1xuXHRcdH1cblx0XHQvL2xhc3QgZWxlbWVudFxuXHRcdHRoaXMuX2xhc3RFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMHB4XCI7XG5cblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fTtcblxuXHRzZXRNYXhXaWR0aCh3KSB7XG5cdFx0dGhpcy5fd2lkdGggPSB3O1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWF4V2lkdGgoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3dpZHRoO1xuXHR9XG5cblx0c2V0SGVpZ2h0KGgpIHtcblx0XHR0aGlzLl9oZWlnaHQgPSBoO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0SGVpZ2h0KCkge1xuXHRcdHJldHVybiB0aGlzLl9oZWlnaHQ7XG5cdH1cblxuXHRzZXRNYXJnaW5YKG0pIHtcblx0XHR0aGlzLl9tYXJnaW5YID0gbTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGdldE1hcmdpblgoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX21hcmdpblg7XG5cdH1cblxuXHRzZXRNYXJnaW5ZKG0pIHtcblx0XHR0aGlzLl9tYXJnaW5ZID0gbTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGdldE1hcmdpblkoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX21hcmdpblk7XG5cdH1cblxuXHRmb3J3YXJkKCkge1xuXHRcdGlmKHRoaXMuX2xhc3RFbGVtZW50Lm9mZnNldExlZnQrdGhpcy5fcG9zaXRpb24gPiB0aGlzLl9jb250YWluZXJXaWR0aCt0aGlzLmdldE1hcmdpblgoKSkge1xuXHRcdFx0Ly9sZXQgY2xvbmUgPSB0aGlzLl90ZXh0LmNsb25lTm9kZSh0cnVlKTtcblx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fdGV4dC5vZmZzZXRMZWZ0O1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gLT0gdGhpcy5fY29udGFpbmVyV2lkdGg7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbiArIFwicHhcIjtcblx0XHRcdFxuXHRcdFx0Ly9jb25zb2xlLmxvZyhjbG9uZSk7XG5cdFx0XHQvL2Nsb25lLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXHRcdFx0Ly90aGlzLl9jb250YWluZXIuaW5zZXJ0QmVmb3JlKGNsb25lLHRoaXMudGV4dCk7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblxuXHRiYWNrd2FyZCgpIHtcblx0XHRpZih0aGlzLl9wb3NpdGlvbiA8IDApIHtcblx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fdGV4dC5vZmZzZXRMZWZ0O1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gKz0gdGhpcy5fY29udGFpbmVyV2lkdGg7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbiArIFwicHhcIjtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdHRvRmlyc3RQYWdlKCkge1xuXHRcdGlmKHRoaXMuX3Bvc2l0aW9uIDwgMCkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSAwO1xuXHRcdFx0dGhpcy5fdGV4dC5zdHlsZS5sZWZ0ID0gdGhpcy5fcG9zaXRpb24gKyBcInB4XCI7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblxuXHR0b0xhc3RQYWdlKCkge1xuXHRcdGlmKHRoaXMuX2xhc3RFbGVtZW50Lm9mZnNldExlZnQrdGhpcy5fcG9zaXRpb24gPiB0aGlzLl9jb250YWluZXJXaWR0aCt0aGlzLmdldE1hcmdpblgoKSkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl9jb250YWluZXJXaWR0aCt0aGlzLmdldE1hcmdpblgoKS10aGlzLl9sYXN0RWxlbWVudC5vZmZzZXRMZWZ0O1xuXHRcdFx0dGhpcy5fdGV4dC5zdHlsZS5sZWZ0ID0gdGhpcy5fcG9zaXRpb24rXCJweFwiO1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0fVxuXHR9XG5cdFxuXHRnZXRQYWdlU3RhcnQoKSB7XG5cdFx0bGV0IGluZGV4LCBzdGFydEluZGV4O1xuXHRcdGZvcihsZXQgaT0wOyBpPCB0aGlzLl9zZWN0aW9ucy5sZW5ndGgtMTsgaSsrKSB7XG5cdFx0XHRpZih0aGlzLl9zZWN0aW9uc1tpXS5jbGFzc05hbWUubWF0Y2goL3diLW5vLXBhZ2UvKSkge1xuXHRcdFx0XHRpbmRleCA9IGk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihpbmRleCE9PXVuZGVmaW5lZCAmJiBzdGFydEluZGV4PT09dW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0c3RhcnRJbmRleCA9IGk7XG5cdFx0XHRcdFx0bGV0IGVsID0gdGhpcy5fc2VjdGlvbnNbc3RhcnRJbmRleF07XG5cdFx0XHRcdFx0bGV0IGVsUG9zaXRpb24gPSBlbC5vZmZzZXRMZWZ0IC0gdGhpcy5nZXRNYXJnaW5YKCk7XG5cdFx0XHRcdFx0ZWxQb3NpdGlvbiA9IChlbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIT09MCA/IGVsUG9zaXRpb24tZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCA6IGVsUG9zaXRpb24pOy8vYWx3YXlzIGF0IGEgcGFnZSBiZWdpbm5pbmdcblx0XHRcdFx0XHR0aGlzLl9zdGFydFBhZ2UgPSBlbFBvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRjaGVja0ZpcnN0UGFnZSgpIHtcblx0XHRsZXQgY2hlY2sgPSB0aGlzLl9wb3NpdGlvbj09PTAgPyB0cnVlIDogZmFsc2U7XG5cdFx0cmV0dXJuIGNoZWNrO1xuXHR9XG5cblx0Z2V0UGFnZU51bWJlcigpIHtcblx0XHQvL3RoaXMuX3Bvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoIGlzIHN0YXJ0IG9mIGEgcGFnZSA6IHN0YXJ0IDAgaXMgcGFnZSAxLC4uLiAoc28gOiArMSlcblx0XHRsZXQgcGFnZU51bWJlciA9IE1hdGguYWJzKE1hdGguZmxvb3IodGhpcy5fcG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGgpKSsxO1xuXHRcdC8vdGhpcy5fc3RhcnRQYWdlIChwYWdpbmF0aW9uIHN0YXJ0KVxuXHRcdHBhZ2VOdW1iZXIgPSBwYWdlTnVtYmVyLSh0aGlzLl9zdGFydFBhZ2UpO1xuXHRcdHJldHVybiBwYWdlTnVtYmVyO1xuXHR9XG5cblx0Z2V0VG90YWxQYWdlcygpIHtcblx0XHRsZXQgdG90YWxQYWdlcyA9IE1hdGguZmxvb3IodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdC90aGlzLl9jb250YWluZXJXaWR0aCk7XG5cdFx0dG90YWxQYWdlcyA9IHRvdGFsUGFnZXMtKHRoaXMuX3N0YXJ0UGFnZSk7XG5cdFx0cmV0dXJuIHRvdGFsUGFnZXM7XG5cdH1cblxuXHRnb1RvUGFnZShudW1iZXIpIHtcblx0XHRudW1iZXIgPSAobnVtYmVyPDEtKHRoaXMuX3N0YXJ0UGFnZSkgPyAxLSh0aGlzLl9zdGFydFBhZ2UpIDogbnVtYmVyKTtcblx0XHRudW1iZXI9IChudW1iZXI+dGhpcy5nZXRUb3RhbFBhZ2VzKCkgPyB0aGlzLmdldFRvdGFsUGFnZXMoKSA6IG51bWJlcik7XG5cdFx0bnVtYmVyID0gbnVtYmVyICsgKHRoaXMuX3N0YXJ0UGFnZSk7XG5cdFx0bGV0IHBvc2l0aW9uID0gdGhpcy5fY29udGFpbmVyV2lkdGgqKG51bWJlci0xKTtcblx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSAtcG9zaXRpb24gKyBcInB4XCI7XG5cdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH1cblxuXHRlbGVtZW50UGFnZU51bWJlcihpZCkge1xuXHRcdGxldCBlbCA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvcignIycgKyBpZCk7XG5cdFx0bGV0IGVsUG9zaXRpb24gPSBlbC5vZmZzZXRMZWZ0IC0gdGhpcy5nZXRNYXJnaW5YKCk7XG5cdFx0ZWxQb3NpdGlvbiA9IChlbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIT09MCA/IGVsUG9zaXRpb24tZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCA6IGVsUG9zaXRpb24pOy8vYWx3YXlzIGF0IGEgcGFnZSBiZWdpbm5pbmdcblx0XHRsZXQgZWxQYWdlTnVtYmVyID0gZWxQb3NpdGlvbi90aGlzLl9jb250YWluZXJXaWR0aCArIDE7Ly9lbFBvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoIGlzIHBvc2l0aW9uIG9mIGEgcGFnZSA6IHBvc2l0aW9uIDAgaXMgcGFnZSAxLC4uLlxuXHRcdGVsUGFnZU51bWJlciA9IGVsUGFnZU51bWJlci0odGhpcy5fc3RhcnRQYWdlKTtcblx0XHRyZXR1cm4gZWxQYWdlTnVtYmVyO1xuXHR9XG5cblx0Z2V0U2VjdGlvblRpdGxlKCkge1xuXHRcdGxldCBwb3NpdGlvbiA9IC10aGlzLl9wb3NpdGlvbjtcblx0XHRsZXQgdGl0bGU7XG5cdFx0Zm9yKGxldCBpPTE7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLm9mZnNldExlZnQtdGhpcy5fY29udGFpbmVyV2lkdGg+PXBvc2l0aW9uKSB7XG5cdFx0XHRcdGxldCBpZCA9IHRoaXMuX3NlY3Rpb25zW2ktMV0uaWQ7XG5cdFx0XHRcdGlmKGlkIT09dW5kZWZpbmVkICYmIHRoaXMuZ2V0UGFnZU51bWJlcigpID09PSB0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKSkge1xuXHRcdFx0XHRcdHRpdGxlID0gXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aXRsZSA9IHRoaXMuX3NlY3Rpb25zW2ktMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlJykgPyB0aGlzLl9zZWN0aW9uc1tpLTFdLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZScpIDogdGhpcy5fc2VjdGlvbnNbaS0xXS50aXRsZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRpdGxlO1xuXHR9XG5cdFxuXHRnZXRUb2MoKSB7XG5cdFx0aWYodGhpcy5fdG9jcy5sZW5ndGg9PT0wKSB7IHJldHVybjsgfVxuXHRcdFxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3RvY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCB0b2MgPSB0aGlzLl90b2NzW2ldO1xuXHRcdFx0aWYodG9jLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10b2MnKSkge1xuXHRcdFx0XHRsZXQgdG9jVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cdFx0XHRcdHRvY1RpdGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3Yi10b2MtdGl0bGUnKTtcblx0XHRcdFx0dG9jVGl0bGUuaW5uZXJIVE1MID0gdG9jLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10b2MnKTtcblx0XHRcdFx0dG9jLmFwcGVuZENoaWxkKHRvY1RpdGxlKTtcblx0XHRcdH1cblx0XHRcdGxldCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblx0XHRcdGxpc3Quc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1saXN0Jyk7XG5cdFx0XHRmb3IobGV0IGo9MDsgajx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRsZXQgc2VjdGlvbiA9IHRoaXMuX3NlY3Rpb25zW2pdO1xuXHRcdFx0XHRpZighc2VjdGlvbi5jbGFzc05hbWUubWF0Y2goL3diLW5vLXRvYy8pKSB7XG5cdFx0XHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuXHRcdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1pdGVtJyk7XG5cdFx0XHRcdFx0aWYoIXNlY3Rpb24uY2xhc3NOYW1lLm1hdGNoKC93Yi10b2Mtbm8tcGFnZS1udW1iZXIvKSkge1xuXHRcdFx0XHRcdFx0bGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdFx0XHRcdFx0XHRsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICcjJyArIHNlY3Rpb24uaWQpO1xuXHRcdFx0XHRcdFx0bGluay5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3diLWxpbmsnKTtcblx0XHRcdFx0XHRcdGl0ZW0uYXBwZW5kQ2hpbGQobGluayk7XG5cdFx0XHRcdFx0XHRsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0XHRcdFx0XHR0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWl0ZW0tdGl0bGUnKTtcblx0XHRcdFx0XHRcdHRpdGxlLmlubmVySFRNTCA9IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlLXRvYycpID8gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUtdG9jJykgOiBzZWN0aW9uLnRpdGxlO1xuXHRcdFx0XHRcdFx0bGluay5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cdFx0XHRcdFx0XHRsZXQgcGFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblx0XHRcdFx0XHRcdHBhZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1pdGVtLXBhZ2UtbnVtYmVyJyk7XHRcblx0XHRcdFx0XHRcdHBhZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLXdiLWVsZW1lbnQtcGFnZS1udW1iZXInLCBzZWN0aW9uLmlkKTtcblx0XHRcdFx0XHRcdGxpbmsuYXBwZW5kQ2hpbGQocGFnZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblx0XHRcdFx0XHRcdHRpdGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3Yi10b2MtaXRlbS10aXRsZScpO1xuXHRcdFx0XHRcdFx0dGl0bGUuaW5uZXJIVE1MID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUtdG9jJykgPyBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZS10b2MnKSA6IHNlY3Rpb24udGl0bGU7XG5cdFx0XHRcdFx0XHRpdGVtLmFwcGVuZENoaWxkKHRpdGxlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGlzdC5hcHBlbmRDaGlsZChpdGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dG9jLmFwcGVuZENoaWxkKGxpc3QpO1xuXHRcdH1cblx0fVxuXHRcblx0Z2V0VG9jQ3VycmVudFNlY3Rpb24oKSB7XG5cdFx0bGV0IHBvc2l0aW9uID0gLXRoaXMuX3Bvc2l0aW9uO1xuXHRcdHRoaXMuX3RvY1NlY3Rpb25zLnB1c2godGhpcy5fbGFzdEVsZW1lbnQpO1xuXHRcdGlmKHRoaXMuX3NlY3Rpb25zWzBdLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tdG9jLykpIHtcblx0XHRcdHRoaXMuX3RvY1NlY3Rpb25zLnVuc2hpZnQodGhpcy5fc2VjdGlvbnNbMF0pO1xuXHRcdH1cblx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl90b2NzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgdG9jID0gdGhpcy5fdG9jc1tpXTtcblx0XHRcdGZvcihsZXQgaT0xOyBpPHRoaXMuX3RvY1NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3RvY1NlY3Rpb25zW2ldLm9mZnNldExlZnQtdGhpcy5fY29udGFpbmVyV2lkdGg+PXBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0bGV0IGlkID0gdGhpcy5fdG9jU2VjdGlvbnNbaS0xXS5pZDtcblx0XHRcdFx0XHRsZXQgbGlua3MgPSB0b2MucXVlcnlTZWxlY3RvckFsbCgnYScpO1xuXHRcdFx0XHRcdGZvcihsZXQgaj0wOyBqPGxpbmtzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0XHRsZXQgbGluayA9IGxpbmtzW2pdO1xuXHRcdFx0XHRcdFx0aWYobGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5yZXBsYWNlKC9eIy8sJycpID09PSBpZCkge1xuXHRcdFx0XHRcdFx0XHRpZighbGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSs9JyBjdXJyZW50Jztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYobGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGluay5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZT1saW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoLyBjdXJyZW50LywnJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdH1cblx0XHR0aGlzLl90b2NTZWN0aW9ucy5wb3AodGhpcy5fbGFzdEVsZW1lbnQpO1xuXHRcdGlmKHRoaXMuX3NlY3Rpb25zWzBdLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tdG9jLykpIHtcblx0XHRcdHRoaXMuX3RvY1NlY3Rpb25zLnNoaWZ0KHRoaXMuX3NlY3Rpb25zWzBdKTtcblx0XHR9XG5cdH1cblxuXHRpbnNlcnRCb29rbWFyaygpIHtcblx0XHRsZXQgYm9va21hcmsgPSBudWxsO1xuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2VsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgZWxQb3NpdGlvbiA9IHRoaXMuX2VsZW1lbnRzW2ldLm9mZnNldExlZnQtdGhpcy5nZXRNYXJnaW5YKCk7XG5cdFx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdFx0aWYoZWxQb3NpdGlvbiA9PT0gLXRoaXMuX3Bvc2l0aW9uKVxuXHRcdFx0e1xuXHRcdFx0XHRib29rbWFyayA9IGk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZihlbFBvc2l0aW9uID4gLXRoaXMuX3Bvc2l0aW9uKVxuXHRcdFx0e1xuXHRcdFx0XHRib29rbWFyayA9IGktMTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuX2Jvb2ttYXJrID0gYm9va21hcms7XG5cdH1cblxuXHRnb1RvQm9va21hcmsoYm9va21hcmspIHtcblx0XHRsZXQgZWxlbWVudCA9IHRoaXMuX2VsZW1lbnRzW3RoaXMuX2Jvb2ttYXJrXTtcblx0XHQvL3Bvc2l0aW9uIDogb2Zmc2V0TGVmdCBvZiBlbGVtZW50IHJlbGF0aXZlIHRvIHRleHRcblx0XHRsZXQgcG9zaXRpb24gPSBlbGVtZW50Lm9mZnNldExlZnQtdGhpcy5nZXRNYXJnaW5YKCk7XG5cdFx0cG9zaXRpb24gPSAocG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gcG9zaXRpb24tcG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGggOiBwb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdC8vdGV4dCBwb3NpdGlvbiA9IC1wb3NpdGlvblxuXHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IC1wb3NpdGlvbiArIFwicHhcIjtcblx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG5cdHJlZnJlc2goKSB7XG5cdFx0dGhpcy5pbnNlcnRCb29rbWFyaygpO1xuXG5cdFx0aWYodGhpcy5jb2w9PT1mYWxzZSkge1xuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9jdXJyZW50UGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fY3VycmVudFBhZ2VzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3RvdGFsUGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fdG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9jdXJyZW50VG90YWxQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9lbFBhZ2VOdW1iZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX2VsUGFnZU51bWJlcnNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvblRpdGxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9zZWN0aW9uVGl0bGVzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0XG5cdFx0XHR0aGlzLmdldFBhZ2VTdGFydCgpO1xuXHRcdFx0XG5cdFx0XHRpZih0aGlzLl90b2NzLmxlbmd0aCE9PTApIHtcblx0XHRcdFx0dGhpcy5nZXRUb2NDdXJyZW50U2VjdGlvbigpO1xuXHRcdFx0fVx0XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2N1cnJlbnRQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9jdXJyZW50UGFnZXNbaV0uaW5uZXJIVE1MIT10aGlzLmdldFBhZ2VOdW1iZXIoKSkge1xuXHRcdFx0XHRcdHRoaXMuX2N1cnJlbnRQYWdlc1tpXS5pbm5lckhUTUwgPSB0aGlzLmdldFBhZ2VOdW1iZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl90b3RhbFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3RvdGFsUGFnZXNbaV0uaW5uZXJIVE1MIT10aGlzLmdldFBhZ2VOdW1iZXIoKSkge1xuXHRcdFx0XHRcdHRoaXMuX3RvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gdGhpcy5nZXRQYWdlTnVtYmVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fY3VycmVudFRvdGFsUGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5nZXRQYWdlTnVtYmVyKCkgPCAxKSB7XG5cdFx0XHRcdFx0dGhpcy5fY3VycmVudFRvdGFsUGFnZXNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdFx0fSBlbHNlIGlmKHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzW2ldLmlubmVySFRNTCE9PSB0aGlzLmdldFBhZ2VOdW1iZXIoKSArIFwiL1wiICsgdGhpcy5nZXRUb3RhbFBhZ2VzKCkpIHtcblx0XHRcdFx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSB0aGlzLmdldFBhZ2VOdW1iZXIoKSArIFwiL1wiICsgdGhpcy5nZXRUb3RhbFBhZ2VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fZWxQYWdlTnVtYmVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRsZXQgaWQgPSB0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi1lbGVtZW50LXBhZ2UtbnVtYmVyJyk7XG5cdFx0XHRcdGxldCBwYWdlTnVtYmVyID0gdGhpcy5lbGVtZW50UGFnZU51bWJlcihpZCk7XG5cdFx0XHRcdGlmKHBhZ2VOdW1iZXIgPCAxKSB7XG5cdFx0XHRcdFx0dGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0XHR9IGVsc2UgaWYodGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5pbm5lckhUTUwhPXBhZ2VOdW1iZXIpIHtcblx0XHRcdFx0XHR0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmlubmVySFRNTCA9IHBhZ2VOdW1iZXI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvblRpdGxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9zZWN0aW9uVGl0bGVzW2ldLmlubmVySFRNTCE9dGhpcy5nZXRTZWN0aW9uVGl0bGUoKSkge1xuXHRcdFx0XHRcdHRoaXMuX3NlY3Rpb25UaXRsZXNbaV0uaW5uZXJIVE1MID0gdGhpcy5nZXRTZWN0aW9uVGl0bGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG59XG5cbiJdfQ==
