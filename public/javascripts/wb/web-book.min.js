"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),WebBook=function(){function t(e,i){var s=this;_classCallCheck(this,t),this._bookContainer=e,this._textContainer=e.querySelector("[data-wb-text-container]"),this._text=e.querySelector("[data-wb-text]"),this._height=i.height,this._width=i.maxWidth,this._marginX=void 0===i.marginX?35:i.marginX,this._marginY=void 0===i.marginY?20:i.marginY,this._position=0,this.col=!0,this._bookmark=null,this._containerWidth=null,this._lastBreak=document.createElement("div"),this._lastBreak.className="wb-text-break",this._text.appendChild(this._lastBreak),this._lastElement=document.createElement("div"),this._lastElement.innerHTML="&nbsp;",this._lastElement.className="wb-section wb-no-toc",this._text.appendChild(this._lastElement),this._sections=this._text.querySelectorAll(".wb-section"),this._tocSections=[];for(var n=0;n<this._sections.length;n++)this._sections[n].className.match(/wb-no-toc/)||this._tocSections.push(this._sections[n]);this._breaks=this._text.querySelectorAll(".wb-text-break"),this._elements=this._text.querySelectorAll(":not(.wb-text-break)"),this._tocs=this._bookContainer.querySelectorAll("[data-wb-toc]"),this.getToc(),this._currentPages=this._bookContainer.querySelectorAll(".wb-current-page"),this._totalPages=this._bookContainer.querySelectorAll(".wb-total-pages"),this._currentTotalPages=this._bookContainer.querySelectorAll(".wb-currentByTotal-pages"),this._elPageNumbers=this._bookContainer.querySelectorAll("[data-wb-element-page-number]"),this._sectionTitles=this._bookContainer.querySelectorAll(".wb-current-section-title"),this._startPage=null;for(var o=this._bookContainer.querySelectorAll(".wb-link"),a=0;a<o.length;a++)o[a].addEventListener("click",function(t){if(!0===s.col){t.preventDefault();var e=t.currentTarget.getAttribute("href").replace(/^#/,"");s.goToPage(s.elementPageNumber(e))}},!1);"WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style?this.toBook():this.toScroll()}return _createClass(t,[{key:"toBook",value:function(){if("webkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style){this.col=!0;var t=this._textContainer.style,e=this._text.style;t.position="relative",t.padding="0px",t.height=this.getHeight()+"px",t.maxWidth=this.getMaxWidth()+"px",this._containerWidth=this._textContainer.clientWidth;for(var i=0;i<this._sections.length;i++)"10%"!==this._sections[i].style.minHeight&&(this._sections[i].style.minHeight="10%");for(var s=0;s<this._breaks.length;s++)"300%"!==this._breaks[s].style.marginBottom&&(this._breaks[s].style.marginBottom="300%");"300%"!==this._lastElement.style.marginBottom&&(this._lastElement.style.marginBottom="300%"),e.webkitColumnWidth=this._containerWidth+"px",e.MozColumnWidth=this._containerWidth+"px",e.columnWidth=this._containerWidth+"px",e.MozColumnGap=2*this.getMarginX()+"px",e.webkitColumnGap=2*this.getMarginX()+"px",e.columnGap=2*this.getMarginX()+"px",e.MozColumnFill="auto",e.columnFill="auto",e.height="100%",e.width="100%",e.paddingRight=this.getMarginX()+"px",e.paddingLeft=this.getMarginX()+"px",e.paddingTop=this.getMarginY()+"px",e.paddingBottom=this.getMarginY()+"px",e.position="relative",e.left=0,e.top=0,t.overflow="hidden",this._position=this._text.offsetLeft,console.log(this._position),console.log(this._lastElement.offsetLeft),this._bookmark&&(this.goToBookmark(this._bookmark),this._position=this._text.offsetLeft),this.refresh()}}},{key:"toScroll",value:function(){this.col=!1;var t=this._container.style,e=this._text.style;t.height="auto",t.maxWidth=this.getMaxWidth()+"px",t.overflow="visible",e.position="static",e.height="auto",t.paddingRight=this.getMarginX()+"px",t.paddingLeft=this.getMarginX()+"px",t.paddingTop=this.getMarginY()+"px",t.paddingBottom=this.getMarginY()+"px",("webkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style)&&(e.webkitColumns="auto 1",e.MozColumns="auto 1",e.columns="auto 1");for(var i=0;i<this._sections.length;i++)this._sections[i].style.minHeight="0";for(var s=0;s<this._breaks.length;s++)this._breaks[s].style.marginBottom="0";this._lastElement.style.marginBottom="0px",this.refresh()}},{key:"setMaxWidth",value:function(t){return this._width=t,this}},{key:"getMaxWidth",value:function(){return this._width}},{key:"setHeight",value:function(t){return this._height=t,this}},{key:"getHeight",value:function(){return this._height}},{key:"setMarginX",value:function(t){return this._marginX=t,this}},{key:"getMarginX",value:function(){return this._marginX}},{key:"setMarginY",value:function(t){return this._marginY=t,this}},{key:"getMarginY",value:function(){return this._marginY}},{key:"forward",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._text.offsetLeft,this._position-=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"backward",value:function(){this._position<0&&(this._position=this._text.offsetLeft,this._position+=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"toFirstPage",value:function(){this._position<0&&(this._position=0,this._text.style.left=this._position+"px",this.refresh())}},{key:"toLastPage",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._containerWidth+this.getMarginX()-this._lastElement.offsetLeft,this._text.style.left=this._position+"px",this.refresh())}},{key:"getPageStart",value:function(){for(var t=void 0,e=void 0,i=0;i<this._sections.length-1;i++)if(this._sections[i].className.match(/wb-no-page/))t=i;else if(void 0!==t&&void 0===e){e=i;var s=this._sections[e].offsetLeft-this.getMarginX();s=s%this._containerWidth!=0?s-s%this._containerWidth:s,this._startPage=s/this._containerWidth}}},{key:"checkFirstPage",value:function(){return 0===this._position}},{key:"getPageNumber",value:function(){var t=Math.abs(Math.floor(this._position/this._containerWidth))+1;return t-=this._startPage}},{key:"getTotalPages",value:function(){var t=Math.floor(this._lastElement.offsetLeft/this._containerWidth);return t-=this._startPage}},{key:"goToPage",value:function(t){t=(t=t<1-this._startPage?1-this._startPage:t)>this.getTotalPages()?this.getTotalPages():t,t+=this._startPage;var e=this._containerWidth*(t-1);this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"elementPageNumber",value:function(t){var e=this._text.querySelector("#"+t).offsetLeft-this.getMarginX(),i=(e=e%this._containerWidth!=0?e-e%this._containerWidth:e)/this._containerWidth+1;return i-=this._startPage}},{key:"getSectionTitle",value:function(){for(var t=-this._position,e=void 0,i=1;i<this._sections.length;i++)if(this._sections[i].offsetLeft-this._containerWidth>=t){var s=this._sections[i-1].id;e=void 0!==s&&this.getPageNumber()===this.elementPageNumber(s)?"":this._sections[i-1].getAttribute("data-wb-title")?this._sections[i-1].getAttribute("data-wb-title"):this._sections[i-1].title;break}return e}},{key:"getToc",value:function(){if(0!==this._tocs.length)for(var t=0;t<this._tocs.length;t++){var e=this._tocs[t];if(e.getAttribute("data-wb-toc")){var i=document.createElement("p");i.setAttribute("class","wb-toc-title"),i.innerHTML=e.getAttribute("data-wb-toc"),e.appendChild(i)}var s=document.createElement("ul");s.setAttribute("class","wb-toc-list");for(var n=0;n<this._sections.length;n++){var o=this._sections[n];if(!o.className.match(/wb-no-toc/)){var a=document.createElement("li");if(a.setAttribute("class","wb-toc-item"),o.className.match(/wb-toc-no-page-number/)){var r=document.createElement("span");r.setAttribute("class","wb-toc-item-title"),r.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,a.appendChild(r)}else{var h=document.createElement("a");h.setAttribute("href","#"+o.id),h.setAttribute("class","wb-link"),a.appendChild(h);var l=document.createElement("span");l.setAttribute("class","wb-toc-item-title"),l.innerHTML=o.getAttribute("data-wb-title-toc")?o.getAttribute("data-wb-title-toc"):o.title,h.appendChild(l);var c=document.createElement("span");c.setAttribute("class","wb-toc-item-page-number"),c.setAttribute("data-wb-element-page-number",o.id),h.appendChild(c)}s.appendChild(a)}}e.appendChild(s)}}},{key:"getTocCurrentSection",value:function(){var t=-this._position;this._tocSections.push(this._lastElement),this._sections[0].className.match(/wb-no-toc/)&&this._tocSections.unshift(this._sections[0]);for(var e=0;e<this._tocs.length;e++)for(var i=this._tocs[e],s=1;s<this._tocSections.length;s++)if(this._tocSections[s].offsetLeft-this._containerWidth>=t){for(var n=this._tocSections[s-1].id,o=i.querySelectorAll("a"),a=0;a<o.length;a++){var r=o[a];r.getAttribute("href").replace(/^#/,"")===n?r.parentElement.className.match(/current/)||(r.parentElement.className+=" current"):r.parentElement.className.match(/current/)&&(r.parentElement.className=r.parentElement.className.replace(/ current/,""))}break}this._tocSections.pop(this._lastElement),this._sections[0].className.match(/wb-no-toc/)&&this._tocSections.shift(this._sections[0])}},{key:"insertBookmark",value:function(){for(var t=null,e=0;e<this._elements.length;e++){var i=this._elements[e].offsetLeft-this.getMarginX();if((i=i%this._containerWidth!=0?i-i%this._containerWidth:i)===-this._position){t=e;break}if(i>-this._position){t=e-1;break}}this._bookmark=t}},{key:"goToBookmark",value:function(t){var e=this._elements[this._bookmark].offsetLeft-this.getMarginX();e=e%this._containerWidth!=0?e-e%this._containerWidth:e,this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"refresh",value:function(){if(this.insertBookmark(),!1===this.col){for(var t=0;t<this._currentPages.length;t++)this._currentPages[t].innerHTML="";for(var e=0;e<this._totalPages.length;e++)this._totalPages[e].innerHTML="";for(var i=0;i<this._currentTotalPages.length;i++)this._currentTotalPages[i].innerHTML="";for(var s=0;s<this._elPageNumbers.length;s++)this._elPageNumbers[s].innerHTML="";for(var n=0;n<this._sectionTitles.length;n++)this._sectionTitles[n].innerHTML=""}else{this.getPageStart(),0!==this._tocs.length&&this.getTocCurrentSection();for(var o=0;o<this._currentPages.length;o++)this._currentPages[o].innerHTML!=this.getPageNumber()&&(this._currentPages[o].innerHTML=this.getPageNumber());for(var a=0;a<this._totalPages.length;a++)this._totalPages[a].innerHTML!=this.getPageNumber()&&(this._totalPages[a].innerHTML=this.getPageNumber());for(var r=0;r<this._currentTotalPages.length;r++)this.getPageNumber()<1?this._currentTotalPages[r].innerHTML="":this._currentTotalPages[r].innerHTML!==this.getPageNumber()+"/"+this.getTotalPages()&&(this._currentTotalPages[r].innerHTML=this.getPageNumber()+"/"+this.getTotalPages());for(var h=0;h<this._elPageNumbers.length;h++){var l=this._elPageNumbers[h].getAttribute("data-wb-element-page-number"),c=this.elementPageNumber(l);c<1?this._elPageNumbers[h].innerHTML="":this._elPageNumbers[h].innerHTML!=c&&(this._elPageNumbers[h].innerHTML=c)}for(var g=0;g<this._sectionTitles.length;g++)this._sectionTitles[g].innerHTML!=this.getSectionTitle()&&(this._sectionTitles[g].innerHTML=this.getSectionTitle())}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi1ib29rLmpzIl0sIm5hbWVzIjpbIldlYkJvb2siLCJib29rQ29udGFpbmVyIiwib3B0aW9ucyIsIl90aGlzIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9ib29rQ29udGFpbmVyIiwiX3RleHRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiX3RleHQiLCJfaGVpZ2h0IiwiX3dpZHRoIiwibWF4V2lkdGgiLCJfbWFyZ2luWCIsInVuZGVmaW5lZCIsIm1hcmdpblgiLCJfbWFyZ2luWSIsIm1hcmdpblkiLCJfcG9zaXRpb24iLCJoZWlnaHQiLCJfbGFzdEVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb2wiLCJjbGFzc05hbWUiLCJfYm9va21hcmsiLCJfc2VjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2xhc3RCcmVhayIsImFwcGVuZENoaWxkIiwiaSIsIm1hdGNoIiwiX2JyZWFrcyIsIl9lbGVtZW50cyIsIl90b2NzIiwiZ2V0VG9jIiwiX2N1cnJlbnRQYWdlcyIsIl90b3RhbFBhZ2VzIiwiX2VsUGFnZU51bWJlcnMiLCJsaW5rcyIsImxlbmd0aCIsIl9jdXJyZW50VG90YWxQYWdlcyIsImUiLCJpZCIsIl9zZWN0aW9uVGl0bGVzIiwicmVwbGFjZSIsIl9zdGFydFBhZ2UiLCJlbGVtZW50UGFnZU51bWJlciIsImJvZHkiLCJzdHlsZSIsInByZXZlbnREZWZhdWx0IiwidG9TY3JvbGwiLCJ0b0Jvb2siLCJjcyIsInRzIiwicG9zaXRpb24iLCJwYWRkaW5nIiwiZ2V0SGVpZ2h0IiwiZ2V0TWF4V2lkdGgiLCJfY29udGFpbmVyV2lkdGgiLCJjbGllbnRXaWR0aCIsIm1pbkhlaWdodCIsIm1hcmdpbkJvdHRvbSIsIndlYmtpdENvbHVtbldpZHRoIiwiTW96Q29sdW1uV2lkdGgiLCJjb2x1bW5XaWR0aCIsIk1vekNvbHVtbkdhcCIsIndlYmtpdENvbHVtbkdhcCIsImNvbHVtbkdhcCIsImdldE1hcmdpblgiLCJNb3pDb2x1bW5GaWxsIiwiY29sdW1uRmlsbCIsIndpZHRoIiwiZ2V0TWFyZ2luWSIsInBhZGRpbmdSaWdodCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1RvcCIsInRvcCIsIm9mZnNldExlZnQiLCJjb25zb2xlIiwiX2NvbnRhaW5lciIsInJlZnJlc2giLCJvdmVyZmxvdyIsInBhZGRpbmdCb3R0b20iLCJ3ZWJraXRDb2x1bW5zIiwidyIsImgiLCJtIiwibGVmdCIsImluZGV4Iiwic3RhcnRJbmRleCIsImVsUG9zaXRpb24iLCJwYWdlTnVtYmVyIiwiTWF0aCIsImFicyIsImZsb29yIiwidG90YWxQYWdlcyIsIm51bWJlciIsImdldFRvdGFsUGFnZXMiLCJlbFBhZ2VOdW1iZXIiLCJ0aXRsZSIsImdldFBhZ2VOdW1iZXIiLCJnZXRBdHRyaWJ1dGUiLCJ0b2MiLCJlbCIsInRvY1RpdGxlIiwibGlzdCIsInNldEF0dHJpYnV0ZSIsImoiLCJzZWN0aW9uIiwiaXRlbSIsImxpbmsiLCJwYWdlIiwiX3RvY1NlY3Rpb25zIiwidW5zaGlmdCIsInBhcmVudEVsZW1lbnQiLCJzaGlmdCIsImJvb2ttYXJrIiwiaW5zZXJ0Qm9va21hcmsiLCJnZXRQYWdlU3RhcnQiLCJnZXRUb2NDdXJyZW50U2VjdGlvbiIsImdldFNlY3Rpb25UaXRsZSJdLCJtYXBwaW5ncyI6IjZYQUFNQSxtQkFDTCxTQUFBQSxFQUFZQyxFQUFlQyxHQUFTLElBQUFDLEVBQUFDLEtBQUFDLGdCQUFBRCxLQUFBSixHQUVuQ0ksS0FBS0UsZUFBaUJMLEVBQ3RCRyxLQUFLRyxlQUFpQk4sRUFBY08sY0FBYyw0QkFDbERKLEtBQUtLLE1BQVFSLEVBQWNPLGNBQWMsa0JBSjFDSixLQUFBTSxRQUFBUixFQUFZRCxPQUF3QkcsS0FBQU8sT0FBQVQsRUFBQVUsU0FRbkNSLEtBQUtTLGNBQTZCQyxJQUFsQlosRUFBUWEsUUFBc0IsR0FBS2IsRUFBUWEsUUFSeEJYLEtBQUFZLGNBQUFGLElBQUFaLEVBQUFlLFFBQUEsR0FBQWYsRUFBQWUsUUFDbkNi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SUFBSWEsRUFBS3hDLEtBQUttQyxlQUFlUixHQUFHd0UsYUFBYSwrQkFqQzlDVixFQUFBekYsS0FBYTJCLGtCQUFPYyxHQUNuQmdELEVBQUtoRCxFQUNMekMsS0FBQW1DLGVBQUFSLEdBQUFSLFVBQUEsR0FFS25CLEtBQUFtQyxlQUFBUixHQUFBUixXQUFBc0UsSUFrQ0p6RixLQUFLbUMsZUFBZVIsR0FBR1IsVUFBWXNFLEdBN0JwQyxJQUFBLElBQUs0QixFQUFBQSxFQUFBQSxFQUFBQSxLQUFBQSxlQUFMaEYsT0FBQVYsSUFDQTNCLEtBQUF5QyxlQUFBZCxHQUFBUixXQUFBbkIsS0FBQXNILG9CQWtDQ3RILEtBQUt5QyxlQUFlZCxHQUFHUixVQUFZbkIsS0FBS3NIIiwiZmlsZSI6IndlYi1ib29rLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFdlYkJvb2sge1xuXHRjb25zdHJ1Y3Rvcihib29rQ29udGFpbmVyLCBvcHRpb25zKSB7XG5cdFx0Ly9jb250YWluZXJzXG5cdFx0dGhpcy5fYm9va0NvbnRhaW5lciA9IGJvb2tDb250YWluZXI7XG5cdFx0dGhpcy5fdGV4dENvbnRhaW5lciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dC1jb250YWluZXJdJyk7XG5cdFx0dGhpcy5fdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XHQvL29wdGlvbnNcblx0XHR0aGlzLl9oZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcblx0XHR0aGlzLl93aWR0aCA9IG9wdGlvbnMubWF4V2lkdGg7XG5cdFx0dGhpcy5fbWFyZ2luWCA9IG9wdGlvbnMubWFyZ2luWD09PXVuZGVmaW5lZCA/IDM1IDogb3B0aW9ucy5tYXJnaW5YO1xuXHRcdHRoaXMuX21hcmdpblkgPSBvcHRpb25zLm1hcmdpblk9PT11bmRlZmluZWQgPyAyMCA6IG9wdGlvbnMubWFyZ2luWTtcblx0XHQvL2luaXQgcG9zaXRpb24sIGNvbCAsY29udGFpbmVyV2lkdGggYW5kIGJvb2ttYXJrXG5cdFx0dGhpcy5fcG9zaXRpb24gPSAwO1xuXHRcdHRoaXMuY29sID0gdHJ1ZTsvL2RlZmF1bHQgdHJ1ZSA9IHRvQm9vaygpXG5cdFx0dGhpcy5fYm9va21hcmsgPSBudWxsO1xuXHRcdHRoaXMuX2NvbnRhaW5lcldpZHRoID0gbnVsbDtcblx0XHQvL3RoaXMubGFzdEJyZWFrIGlzIHVzZWQgYXMgYSBnaG9zdCBwYWdlXG5cdFx0dGhpcy5fbGFzdEJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLl9sYXN0QnJlYWsuY2xhc3NOYW1lID0gXCJ3Yi10ZXh0LWJyZWFrXCI7XG5cdFx0dGhpcy5fdGV4dC5hcHBlbmRDaGlsZCh0aGlzLl9sYXN0QnJlYWspO1xuXHRcdC8vdGhpcy5fbGFzdEVsZW1lbnQgaXMgdXNlZCBhcyBsYW5kbWFya1xuXHRcdHRoaXMuX2xhc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5pbm5lckhUTUwgPSBcIiZuYnNwO1wiOy8vbm90IGVtcHR5IChmb3IgbW96Q29sdW1ucylcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5jbGFzc05hbWUgPSBcIndiLXNlY3Rpb24gd2Itbm8tdG9jXCI7XG5cdFx0dGhpcy5fdGV4dC5hcHBlbmRDaGlsZCh0aGlzLl9sYXN0RWxlbWVudCk7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHRoaXMuX3NlY3Rpb25zID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCcud2Itc2VjdGlvbicpO1xuXHRcdC8vc2VjdGlvbnMgd2l0aG91dCB3Yi1uby10b2Ncblx0XHR0aGlzLl90b2NTZWN0aW9ucyA9IFtdXG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKCF0aGlzLl9zZWN0aW9uc1tpXS5jbGFzc05hbWUubWF0Y2goL3diLW5vLXRvYy8pKSB7XG5cdFx0XHRcdHRoaXMuX3RvY1NlY3Rpb25zLnB1c2godGhpcy5fc2VjdGlvbnNbaV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvL2JyZWFrc1xuXHRcdHRoaXMuX2JyZWFrcyA9IHRoaXMuX3RleHQucXVlcnlTZWxlY3RvckFsbCgnLndiLXRleHQtYnJlYWsnKTtcblx0XHQvL2VsZW1lbnRzIDogc2VsZWN0IGFsbCBlbGVtZW50cyBidXQgLnRleHQtYnJlYWtzIChmb3IgYm9va21hcmtzKVxuXHRcdHRoaXMuX2VsZW1lbnRzID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCc6bm90KC53Yi10ZXh0LWJyZWFrKScpO1xuXHRcdC8vdG9jXG5cdFx0dGhpcy5fdG9jcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtd2ItdG9jXScpO1xuXHRcdC8vc2V0VG9jIGJlZm9yZSBxdWVyeWluZyB0aGlzLmVsUGFnZU51bWJlcnNcblx0XHR0aGlzLmdldFRvYygpO1xuXHRcdC8vaW5mb3MgY29udGFpbmVyc1xuXHRcdHRoaXMuX2N1cnJlbnRQYWdlcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWN1cnJlbnQtcGFnZScpO1xuXHRcdHRoaXMuX3RvdGFsUGFnZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi10b3RhbC1wYWdlcycpO1xuXHRcdHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItY3VycmVudEJ5VG90YWwtcGFnZXMnKTtcblx0XHR0aGlzLl9lbFBhZ2VOdW1iZXJzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS13Yi1lbGVtZW50LXBhZ2UtbnVtYmVyXScpO1xuXHRcdHRoaXMuX3NlY3Rpb25UaXRsZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1jdXJyZW50LXNlY3Rpb24tdGl0bGUnKTtcblx0XHQvL3N0YXJ0IHBhZ2luYXRpb25cblx0XHR0aGlzLl9zdGFydFBhZ2UgPSBudWxsO1xuXHRcdC8vbGlua3MgOiByZXBsYWNlIGRlZmF1bHQgd2l0aCBnb1RvUGFnZVxuXHRcdGxldCBsaW5rcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWxpbmsnKTtcblx0XHRcdFx0XG5cdFx0Zm9yKGxldCBpPTA7IGk8bGlua3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0XHRcdGlmKHRoaXMuY29sPT09dHJ1ZSkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRsZXQgaHJlZiA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0XHRcdFx0XHRsZXQgaWQgPSBocmVmLnJlcGxhY2UoL14jLyxcIlwiKTtcblx0XHRcdFx0XHR0aGlzLmdvVG9QYWdlKHRoaXMuZWxlbWVudFBhZ2VOdW1iZXIoaWQpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgZmFsc2UpXG5cdFx0fVxuXHRcdFxuXHRcdFxuXHRcdGlmKCdXZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlKSB7XG5cdFx0XHR0aGlzLnRvQm9vaygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRvU2Nyb2xsKCk7XG5cdFx0fVxuXG5cdH1cblxuXHR0b0Jvb2soKSB7XG5cdFx0aWYoJ3dlYmtpdENvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlIHx8ICdNb3pDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnY29sdW1uV2lkdGgnICBpbiBkb2N1bWVudC5ib2R5LnN0eWxlKSB7XG5cdFx0XHR0aGlzLmNvbCA9IHRydWU7XG5cdFx0XHRsZXQgY3MgPSB0aGlzLl90ZXh0Q29udGFpbmVyLnN0eWxlO1xuXHRcdFx0bGV0IHRzID0gdGhpcy5fdGV4dC5zdHlsZTtcblx0XHRcdC8vdGV4dC1jb250YWluZXJcblx0XHRcdC8vY3MuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG5cdFx0XHQvL2NzLldlYmtpdEJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuXHRcdFx0Y3MucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0XHRjcy5wYWRkaW5nID0gXCIwcHhcIjtcblx0XHRcdGNzLmhlaWdodCA9IHRoaXMuZ2V0SGVpZ2h0KCkgKyBcInB4XCI7XG5cdFx0XHRjcy5tYXhXaWR0aCA9IHRoaXMuZ2V0TWF4V2lkdGgoKSArIFwicHhcIjsvL21heFdpZHRoIDogcmVzcG9uc2l2ZVxuXHRcdFx0dGhpcy5fY29udGFpbmVyV2lkdGggPSB0aGlzLl90ZXh0Q29udGFpbmVyLmNsaWVudFdpZHRoOy8vcmVzcG9uc2l2ZVxuXHRcdFx0XG5cdFx0XHQvL3NlY3Rpb25zXG5cdFx0XHQvL2hhY2sgZmlyZWZveCAocG91ciBvZmZzZXRMZWZ0KSA6IG1pbkhlaWdodCA9IDEwJVxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fc2VjdGlvbnNbaV0uc3R5bGUubWluSGVpZ2h0IT09XCIxMCVcIikge1xuXHRcdFx0XHRcdHRoaXMuX3NlY3Rpb25zW2ldLnN0eWxlLm1pbkhlaWdodCA9IFwiMTAlXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vbWFudWFsIGJyZWFrc1xuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fYnJlYWtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX2JyZWFrc1tpXS5zdHlsZS5tYXJnaW5Cb3R0b20hPT1cIjMwMCVcIikge1xuXHRcdFx0XHRcdHRoaXMuX2JyZWFrc1tpXS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjMwMCVcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly9sYXN0IGVsZW1lbnRcblx0XHRcdGlmKHRoaXMuX2xhc3RFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSE9PVwiMzAwJVwiKSB7XG5cdFx0XHRcdHRoaXMuX2xhc3RFbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMzAwJVwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3RleHRcblx0XHRcdC8vdHMuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG5cdFx0XHQvL3RzLldlYmtpdEJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1x0XHRcdFxuXHRcdFx0dHMud2Via2l0Q29sdW1uV2lkdGggPSB0aGlzLl9jb250YWluZXJXaWR0aCArIFwicHhcIjtcblx0XHRcdHRzLk1vekNvbHVtbldpZHRoID0gdGhpcy5fY29udGFpbmVyV2lkdGggKyBcInB4XCI7XG5cdFx0XHR0cy5jb2x1bW5XaWR0aCA9IHRoaXMuX2NvbnRhaW5lcldpZHRoICsgXCJweFwiO1xuXHRcdFx0dHMuTW96Q29sdW1uR2FwID0gdGhpcy5nZXRNYXJnaW5YKCkqMiArIFwicHhcIjtcblx0XHRcdHRzLndlYmtpdENvbHVtbkdhcCA9IHRoaXMuZ2V0TWFyZ2luWCgpKjIgKyBcInB4XCI7XG5cdFx0XHR0cy5jb2x1bW5HYXAgPSB0aGlzLmdldE1hcmdpblgoKSoyICsgXCJweFwiO1xuXHRcdFx0dHMuTW96Q29sdW1uRmlsbCA9IFwiYXV0b1wiOy8vaW1wb3J0YW50ICEhIVxuXHRcdFx0dHMuY29sdW1uRmlsbCA9IFwiYXV0b1wiOy8vaW1wb3J0YW50ICEhIVxuXHRcdFx0dHMuaGVpZ2h0ID0gXCIxMDAlXCI7XG5cdFx0XHR0cy53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdFx0dHMucGFkZGluZ1JpZ2h0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0XHR0cy5wYWRkaW5nTGVmdCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdFx0dHMucGFkZGluZ1RvcCA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdFx0dHMucGFkZGluZ0JvdHRvbSA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdFx0dHMucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0XHR0cy5sZWZ0ID0gMDtcblx0XHRcdHRzLnRvcCA9IDA7XG5cdFx0XHQvL1RleHQtY29udGFpbmVyIG92ZXJmbG93IGhpZGRlblxuXHRcdFx0Y3Mub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdFx0XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMuX3Bvc2l0aW9uKTtcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMuX2xhc3RFbGVtZW50Lm9mZnNldExlZnQpO1xuXHRcdFx0XG5cdFx0XHQvL0dvIHRvIGJvb2ttYXJrXG5cdFx0XHRpZih0aGlzLl9ib29rbWFyaykge1xuXHRcdFx0XHR0aGlzLmdvVG9Cb29rbWFyayh0aGlzLl9ib29rbWFyayk7XG5cdFx0XHRcdHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fdGV4dC5vZmZzZXRMZWZ0O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvL1JlZnJlc2ggaW5mbyBjb250YWluZXJzXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblxuXHR0b1Njcm9sbCgpIHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0dGhpcy5jb2wgPSBmYWxzZTtcblx0XHRsZXQgY3MgPSB0aGlzLl9jb250YWluZXIuc3R5bGU7XG5cdFx0bGV0IHRzID0gdGhpcy5fdGV4dC5zdHlsZTtcblx0XHQvL2NvbnRhaW5lclxuXHRcdGNzLmhlaWdodCA9IFwiYXV0b1wiO1xuXHRcdGNzLm1heFdpZHRoID0gdGhpcy5nZXRNYXhXaWR0aCgpICsgXCJweFwiO1xuXHRcdGNzLm92ZXJmbG93ID0gXCJ2aXNpYmxlXCI7XG5cdFx0Ly90ZXh0XG5cdFx0dHMucG9zaXRpb24gPSBcInN0YXRpY1wiO1xuXHRcdHRzLmhlaWdodCA9IFwiYXV0b1wiO1xuXHRcdGNzLnBhZGRpbmdSaWdodCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdMZWZ0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0Y3MucGFkZGluZ1RvcCA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdCb3R0b20gPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblxuXHRcdGlmKCd3ZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyAgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSkge1xuXHRcdFx0dHMud2Via2l0Q29sdW1ucyA9IFwiYXV0byAxXCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5zID0gXCJhdXRvIDFcIjtcblx0XHRcdHRzLmNvbHVtbnMgPSBcImF1dG8gMVwiO1xuXHRcdH1cblx0XHRcblxuXHRcdC8vU2VjdGlvbnMgKGZvciBtb3pDb2x1bW5zKVxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLl9zZWN0aW9uc1tpXS5zdHlsZS5taW5IZWlnaHQgPSBcIjBcIjtcblx0XHR9XG5cdFx0Ly9tYW51YWwgYnJlYWtzXG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fYnJlYWtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tID0gXCIwXCI7XG5cdFx0fVxuXHRcdC8vbGFzdCBlbGVtZW50XG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIwcHhcIjtcblxuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9O1xuXG5cdHNldE1heFdpZHRoKHcpIHtcblx0XHR0aGlzLl93aWR0aCA9IHc7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRNYXhXaWR0aCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fd2lkdGg7XG5cdH1cblxuXHRzZXRIZWlnaHQoaCkge1xuXHRcdHRoaXMuX2hlaWdodCA9IGg7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRIZWlnaHQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2hlaWdodDtcblx0fVxuXG5cdHNldE1hcmdpblgobSkge1xuXHRcdHRoaXMuX21hcmdpblggPSBtO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWFyZ2luWCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFyZ2luWDtcblx0fVxuXG5cdHNldE1hcmdpblkobSkge1xuXHRcdHRoaXMuX21hcmdpblkgPSBtO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWFyZ2luWSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFyZ2luWTtcblx0fVxuXG5cdGZvcndhcmQoKSB7XG5cdFx0aWYodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdCt0aGlzLl9wb3NpdGlvbiA+IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpKSB7XG5cdFx0XHQvL2xldCBjbG9uZSA9IHRoaXMuX3RleHQuY2xvbmVOb2RlKHRydWUpO1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiAtPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKGNsb25lKTtcblx0XHRcdC8vY2xvbmUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHQvL3RoaXMuX2NvbnRhaW5lci5pbnNlcnRCZWZvcmUoY2xvbmUsdGhpcy50ZXh0KTtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdGJhY2t3YXJkKCkge1xuXHRcdGlmKHRoaXMuX3Bvc2l0aW9uIDwgMCkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiArPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0fVxuXHR9XG5cblx0dG9GaXJzdFBhZ2UoKSB7XG5cdFx0aWYodGhpcy5fcG9zaXRpb24gPCAwKSB7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IDA7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbiArIFwicHhcIjtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdHRvTGFzdFBhZ2UoKSB7XG5cdFx0aWYodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdCt0aGlzLl9wb3NpdGlvbiA+IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpKSB7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpLXRoaXMuX2xhc3RFbGVtZW50Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbitcInB4XCI7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblx0XG5cdGdldFBhZ2VTdGFydCgpIHtcblx0XHRsZXQgaW5kZXgsIHN0YXJ0SW5kZXg7XG5cdFx0Zm9yKGxldCBpPTA7IGk8IHRoaXMuX3NlY3Rpb25zLmxlbmd0aC0xOyBpKyspIHtcblx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tcGFnZS8pKSB7XG5cdFx0XHRcdGluZGV4ID0gaTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKGluZGV4IT09dW5kZWZpbmVkICYmIHN0YXJ0SW5kZXg9PT11bmRlZmluZWQpIHtcblx0XHRcdFx0XHRzdGFydEluZGV4ID0gaTtcblx0XHRcdFx0XHRsZXQgZWwgPSB0aGlzLl9zZWN0aW9uc1tzdGFydEluZGV4XTtcblx0XHRcdFx0XHRsZXQgZWxQb3NpdGlvbiA9IGVsLm9mZnNldExlZnQgLSB0aGlzLmdldE1hcmdpblgoKTtcblx0XHRcdFx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdFx0XHRcdHRoaXMuX3N0YXJ0UGFnZSA9IGVsUG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGNoZWNrRmlyc3RQYWdlKCkge1xuXHRcdGxldCBjaGVjayA9IHRoaXMuX3Bvc2l0aW9uPT09MCA/IHRydWUgOiBmYWxzZTtcblx0XHRyZXR1cm4gY2hlY2s7XG5cdH1cblxuXHRnZXRQYWdlTnVtYmVyKCkge1xuXHRcdC8vdGhpcy5fcG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGggaXMgc3RhcnQgb2YgYSBwYWdlIDogc3RhcnQgMCBpcyBwYWdlIDEsLi4uIChzbyA6ICsxKVxuXHRcdGxldCBwYWdlTnVtYmVyID0gTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLl9wb3NpdGlvbi90aGlzLl9jb250YWluZXJXaWR0aCkpKzE7XG5cdFx0Ly90aGlzLl9zdGFydFBhZ2UgKHBhZ2luYXRpb24gc3RhcnQpXG5cdFx0cGFnZU51bWJlciA9IHBhZ2VOdW1iZXItKHRoaXMuX3N0YXJ0UGFnZSk7XG5cdFx0cmV0dXJuIHBhZ2VOdW1iZXI7XG5cdH1cblxuXHRnZXRUb3RhbFBhZ2VzKCkge1xuXHRcdGxldCB0b3RhbFBhZ2VzID0gTWF0aC5mbG9vcih0aGlzLl9sYXN0RWxlbWVudC5vZmZzZXRMZWZ0L3RoaXMuX2NvbnRhaW5lcldpZHRoKTtcblx0XHR0b3RhbFBhZ2VzID0gdG90YWxQYWdlcy0odGhpcy5fc3RhcnRQYWdlKTtcblx0XHRyZXR1cm4gdG90YWxQYWdlcztcblx0fVxuXG5cdGdvVG9QYWdlKG51bWJlcikge1xuXHRcdG51bWJlciA9IChudW1iZXI8MS0odGhpcy5fc3RhcnRQYWdlKSA/IDEtKHRoaXMuX3N0YXJ0UGFnZSkgOiBudW1iZXIpO1xuXHRcdG51bWJlcj0gKG51bWJlcj50aGlzLmdldFRvdGFsUGFnZXMoKSA/IHRoaXMuZ2V0VG90YWxQYWdlcygpIDogbnVtYmVyKTtcblx0XHRudW1iZXIgPSBudW1iZXIgKyAodGhpcy5fc3RhcnRQYWdlKTtcblx0XHRsZXQgcG9zaXRpb24gPSB0aGlzLl9jb250YWluZXJXaWR0aCoobnVtYmVyLTEpO1xuXHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IC1wb3NpdGlvbiArIFwicHhcIjtcblx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG5cdGVsZW1lbnRQYWdlTnVtYmVyKGlkKSB7XG5cdFx0bGV0IGVsID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yKCcjJyArIGlkKTtcblx0XHRsZXQgZWxQb3NpdGlvbiA9IGVsLm9mZnNldExlZnQgLSB0aGlzLmdldE1hcmdpblgoKTtcblx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdGxldCBlbFBhZ2VOdW1iZXIgPSBlbFBvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoICsgMTsvL2VsUG9zaXRpb24vdGhpcy5fY29udGFpbmVyV2lkdGggaXMgcG9zaXRpb24gb2YgYSBwYWdlIDogcG9zaXRpb24gMCBpcyBwYWdlIDEsLi4uXG5cdFx0ZWxQYWdlTnVtYmVyID0gZWxQYWdlTnVtYmVyLSh0aGlzLl9zdGFydFBhZ2UpO1xuXHRcdHJldHVybiBlbFBhZ2VOdW1iZXI7XG5cdH1cblxuXHRnZXRTZWN0aW9uVGl0bGUoKSB7XG5cdFx0bGV0IHBvc2l0aW9uID0gLXRoaXMuX3Bvc2l0aW9uO1xuXHRcdGxldCB0aXRsZTtcblx0XHRmb3IobGV0IGk9MTsgaTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYodGhpcy5fc2VjdGlvbnNbaV0ub2Zmc2V0TGVmdC10aGlzLl9jb250YWluZXJXaWR0aD49cG9zaXRpb24pIHtcblx0XHRcdFx0bGV0IGlkID0gdGhpcy5fc2VjdGlvbnNbaS0xXS5pZDtcblx0XHRcdFx0aWYoaWQhPT11bmRlZmluZWQgJiYgdGhpcy5nZXRQYWdlTnVtYmVyKCkgPT09IHRoaXMuZWxlbWVudFBhZ2VOdW1iZXIoaWQpKSB7XG5cdFx0XHRcdFx0dGl0bGUgPSBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRpdGxlID0gdGhpcy5fc2VjdGlvbnNbaS0xXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUnKSA/IHRoaXMuX3NlY3Rpb25zW2ktMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlJykgOiB0aGlzLl9zZWN0aW9uc1tpLTFdLnRpdGxlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGl0bGU7XG5cdH1cblx0XG5cdGdldFRvYygpIHtcblx0XHRpZih0aGlzLl90b2NzLmxlbmd0aD09PTApIHsgcmV0dXJuOyB9XG5cdFx0XG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fdG9jcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IHRvYyA9IHRoaXMuX3RvY3NbaV07XG5cdFx0XHRpZih0b2MuZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRvYycpKSB7XG5cdFx0XHRcdGxldCB0b2NUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0XHRcdFx0dG9jVGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy10aXRsZScpO1xuXHRcdFx0XHR0b2NUaXRsZS5pbm5lckhUTUwgPSB0b2MuZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRvYycpO1xuXHRcdFx0XHR0b2MuYXBwZW5kQ2hpbGQodG9jVGl0bGUpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXHRcdFx0bGlzdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWxpc3QnKTtcblx0XHRcdGZvcihsZXQgaj0wOyBqPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGxldCBzZWN0aW9uID0gdGhpcy5fc2VjdGlvbnNbal07XG5cdFx0XHRcdGlmKCFzZWN0aW9uLmNsYXNzTmFtZS5tYXRjaCgvd2Itbm8tdG9jLykpIHtcblx0XHRcdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cdFx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWl0ZW0nKTtcblx0XHRcdFx0XHRpZighc2VjdGlvbi5jbGFzc05hbWUubWF0Y2goL3diLXRvYy1uby1wYWdlLW51bWJlci8pKSB7XG5cdFx0XHRcdFx0XHRsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblx0XHRcdFx0XHRcdGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgJyMnICsgc2VjdGlvbi5pZCk7XG5cdFx0XHRcdFx0XHRsaW5rLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnd2ItbGluaycpO1xuXHRcdFx0XHRcdFx0aXRlbS5hcHBlbmRDaGlsZChsaW5rKTtcblx0XHRcdFx0XHRcdGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblx0XHRcdFx0XHRcdHRpdGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3Yi10b2MtaXRlbS10aXRsZScpO1xuXHRcdFx0XHRcdFx0dGl0bGUuaW5uZXJIVE1MID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItdGl0bGUtdG9jJykgPyBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZS10b2MnKSA6IHNlY3Rpb24udGl0bGU7XG5cdFx0XHRcdFx0XHRsaW5rLmFwcGVuZENoaWxkKHRpdGxlKTtcblx0XHRcdFx0XHRcdGxldCBwYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdFx0XHRcdFx0cGFnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnd2ItdG9jLWl0ZW0tcGFnZS1udW1iZXInKTtcdFxuXHRcdFx0XHRcdFx0cGFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2ItZWxlbWVudC1wYWdlLW51bWJlcicsIHNlY3Rpb24uaWQpO1xuXHRcdFx0XHRcdFx0bGluay5hcHBlbmRDaGlsZChwYWdlKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHRcdFx0XHRcdFx0dGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1pdGVtLXRpdGxlJyk7XG5cdFx0XHRcdFx0XHR0aXRsZS5pbm5lckhUTUwgPSBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10aXRsZS10b2MnKSA/IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlLXRvYycpIDogc2VjdGlvbi50aXRsZTtcblx0XHRcdFx0XHRcdGl0ZW0uYXBwZW5kQ2hpbGQodGl0bGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsaXN0LmFwcGVuZENoaWxkKGl0ZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0b2MuYXBwZW5kQ2hpbGQobGlzdCk7XG5cdFx0fVxuXHR9XG5cdFxuXHRnZXRUb2NDdXJyZW50U2VjdGlvbigpIHtcblx0XHRsZXQgcG9zaXRpb24gPSAtdGhpcy5fcG9zaXRpb247XG5cdFx0dGhpcy5fdG9jU2VjdGlvbnMucHVzaCh0aGlzLl9sYXN0RWxlbWVudCk7XG5cdFx0aWYodGhpcy5fc2VjdGlvbnNbMF0uY2xhc3NOYW1lLm1hdGNoKC93Yi1uby10b2MvKSkge1xuXHRcdFx0dGhpcy5fdG9jU2VjdGlvbnMudW5zaGlmdCh0aGlzLl9zZWN0aW9uc1swXSk7XG5cdFx0fVxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3RvY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCB0b2MgPSB0aGlzLl90b2NzW2ldO1xuXHRcdFx0Zm9yKGxldCBpPTE7IGk8dGhpcy5fdG9jU2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fdG9jU2VjdGlvbnNbaV0ub2Zmc2V0TGVmdC10aGlzLl9jb250YWluZXJXaWR0aD49cG9zaXRpb24pIHtcblx0XHRcdFx0XHRsZXQgaWQgPSB0aGlzLl90b2NTZWN0aW9uc1tpLTFdLmlkO1xuXHRcdFx0XHRcdGxldCBsaW5rcyA9IHRvYy5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG5cdFx0XHRcdFx0Zm9yKGxldCBqPTA7IGo8bGlua3MubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdGxldCBsaW5rID0gbGlua3Nbal07XG5cdFx0XHRcdFx0XHRpZihsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpLnJlcGxhY2UoL14jLywnJykgPT09IGlkKSB7XG5cdFx0XHRcdFx0XHRcdGlmKCFsaW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLm1hdGNoKC9jdXJyZW50LykpIHtcblx0XHRcdFx0XHRcdFx0XHRsaW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lKz0nIGN1cnJlbnQnO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpZihsaW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLm1hdGNoKC9jdXJyZW50LykpIHtcblx0XHRcdFx0XHRcdFx0XHRsaW5rLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lPWxpbmsucGFyZW50RWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSgvIGN1cnJlbnQvLCcnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fVxuXHRcdHRoaXMuX3RvY1NlY3Rpb25zLnBvcCh0aGlzLl9sYXN0RWxlbWVudCk7XG5cdFx0aWYodGhpcy5fc2VjdGlvbnNbMF0uY2xhc3NOYW1lLm1hdGNoKC93Yi1uby10b2MvKSkge1xuXHRcdFx0dGhpcy5fdG9jU2VjdGlvbnMuc2hpZnQodGhpcy5fc2VjdGlvbnNbMF0pO1xuXHRcdH1cblx0fVxuXG5cdGluc2VydEJvb2ttYXJrKCkge1xuXHRcdGxldCBib29rbWFyayA9IG51bGw7XG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBlbFBvc2l0aW9uID0gdGhpcy5fZWxlbWVudHNbaV0ub2Zmc2V0TGVmdC10aGlzLmdldE1hcmdpblgoKTtcblx0XHRcdGVsUG9zaXRpb24gPSAoZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCE9PTAgPyBlbFBvc2l0aW9uLWVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGggOiBlbFBvc2l0aW9uKTsvL2Fsd2F5cyBhdCBhIHBhZ2UgYmVnaW5uaW5nXG5cdFx0XHRpZihlbFBvc2l0aW9uID09PSAtdGhpcy5fcG9zaXRpb24pXG5cdFx0XHR7XG5cdFx0XHRcdGJvb2ttYXJrID0gaTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKGVsUG9zaXRpb24gPiAtdGhpcy5fcG9zaXRpb24pXG5cdFx0XHR7XG5cdFx0XHRcdGJvb2ttYXJrID0gaS0xO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5fYm9va21hcmsgPSBib29rbWFyaztcblx0fVxuXG5cdGdvVG9Cb29rbWFyayhib29rbWFyaykge1xuXHRcdGxldCBlbGVtZW50ID0gdGhpcy5fZWxlbWVudHNbdGhpcy5fYm9va21hcmtdO1xuXHRcdC8vcG9zaXRpb24gOiBvZmZzZXRMZWZ0IG9mIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGV4dFxuXHRcdGxldCBwb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0TGVmdC10aGlzLmdldE1hcmdpblgoKTtcblx0XHRwb3NpdGlvbiA9IChwb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCE9PTAgPyBwb3NpdGlvbi1wb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCA6IHBvc2l0aW9uKTsvL2Fsd2F5cyBhdCBhIHBhZ2UgYmVnaW5uaW5nXG5cdFx0Ly90ZXh0IHBvc2l0aW9uID0gLXBvc2l0aW9uXG5cdFx0dGhpcy5fdGV4dC5zdHlsZS5sZWZ0ID0gLXBvc2l0aW9uICsgXCJweFwiO1xuXHRcdHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fdGV4dC5vZmZzZXRMZWZ0O1xuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9XG5cblx0cmVmcmVzaCgpIHtcblx0XHR0aGlzLmluc2VydEJvb2ttYXJrKCk7XG5cblx0XHRpZih0aGlzLmNvbD09PWZhbHNlKSB7XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2N1cnJlbnRQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl9jdXJyZW50UGFnZXNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fdG90YWxQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR0aGlzLl90b3RhbFBhZ2VzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2VsUGFnZU51bWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dGhpcy5fZWxQYWdlTnVtYmVyc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9zZWN0aW9uVGl0bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuX3NlY3Rpb25UaXRsZXNbaV0uaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRcblx0XHRcdHRoaXMuZ2V0UGFnZVN0YXJ0KCk7XG5cdFx0XHRcblx0XHRcdGlmKHRoaXMuX3RvY3MubGVuZ3RoIT09MCkge1xuXHRcdFx0XHR0aGlzLmdldFRvY0N1cnJlbnRTZWN0aW9uKCk7XG5cdFx0XHR9XHRcblx0XHRcdFxuXHRcdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fY3VycmVudFBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX2N1cnJlbnRQYWdlc1tpXS5pbm5lckhUTUwhPXRoaXMuZ2V0UGFnZU51bWJlcigpKSB7XG5cdFx0XHRcdFx0dGhpcy5fY3VycmVudFBhZ2VzW2ldLmlubmVySFRNTCA9IHRoaXMuZ2V0UGFnZU51bWJlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3RvdGFsUGFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYodGhpcy5fdG90YWxQYWdlc1tpXS5pbm5lckhUTUwhPXRoaXMuZ2V0UGFnZU51bWJlcigpKSB7XG5cdFx0XHRcdFx0dGhpcy5fdG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSB0aGlzLmdldFBhZ2VOdW1iZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9jdXJyZW50VG90YWxQYWdlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLmdldFBhZ2VOdW1iZXIoKSA8IDEpIHtcblx0XHRcdFx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlc1tpXS5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0XHR9IGVsc2UgaWYodGhpcy5fY3VycmVudFRvdGFsUGFnZXNbaV0uaW5uZXJIVE1MIT09IHRoaXMuZ2V0UGFnZU51bWJlcigpICsgXCIvXCIgKyB0aGlzLmdldFRvdGFsUGFnZXMoKSkge1xuXHRcdFx0XHRcdHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzW2ldLmlubmVySFRNTCA9IHRoaXMuZ2V0UGFnZU51bWJlcigpICsgXCIvXCIgKyB0aGlzLmdldFRvdGFsUGFnZXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9lbFBhZ2VOdW1iZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxldCBpZCA9IHRoaXMuX2VsUGFnZU51bWJlcnNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLWVsZW1lbnQtcGFnZS1udW1iZXInKTtcblx0XHRcdFx0bGV0IHBhZ2VOdW1iZXIgPSB0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKTtcblx0XHRcdFx0aWYocGFnZU51bWJlciA8IDEpIHtcblx0XHRcdFx0XHR0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSBpZih0aGlzLl9lbFBhZ2VOdW1iZXJzW2ldLmlubmVySFRNTCE9cGFnZU51bWJlcikge1xuXHRcdFx0XHRcdHRoaXMuX2VsUGFnZU51bWJlcnNbaV0uaW5uZXJIVE1MID0gcGFnZU51bWJlcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IobGV0IGk9MDsgaTx0aGlzLl9zZWN0aW9uVGl0bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3NlY3Rpb25UaXRsZXNbaV0uaW5uZXJIVE1MIT10aGlzLmdldFNlY3Rpb25UaXRsZSgpKSB7XG5cdFx0XHRcdFx0dGhpcy5fc2VjdGlvblRpdGxlc1tpXS5pbm5lckhUTUwgPSB0aGlzLmdldFNlY3Rpb25UaXRsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cdH1cbn1cblxuIl19
